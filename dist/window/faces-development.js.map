{"version":3,"file":"faces-development.js","mappings":"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","sources":["webpack://jsf.js_next_gen/./node_modules/mona-dish/dist/js/commonjs/index_core.js","webpack://jsf.js_next_gen/./src/main/typescript/api/_api.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/AjaxImpl.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/PushImpl.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/core/Const.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/core/ImplTypes.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/i18n/Messages.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/Assertions.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/AsyncRunnable.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/ExtDomQuery.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/FileUtils.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/HiddenInputBuilder.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/Lang.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/util/XhrQueueController.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/ErrorData.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/EventData.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/RequestDataResolver.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/ResonseDataResolver.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/Response.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/ResponseProcessor.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/XhrFormData.ts","webpack://jsf.js_next_gen/./src/main/typescript/impl/xhrCore/XhrRequest.ts","webpack://jsf.js_next_gen/./src/main/typescript/myfaces/OamSubmit.ts","webpack://jsf.js_next_gen/webpack/bootstrap","webpack://jsf.js_next_gen/./src/main/typescript/api/faces.ts"],"sourcesContent":["!function(){\"use strict\";var e={447:function(e,t,r){r.r(t),r.d(t,{append:function(){return i},appendIf:function(){return a},assign:function(){return s},assignIf:function(){return o},buildPath:function(){return v},deepCopy:function(){return p},resolve:function(){return u},shallowMerge:function(){return m},simpleShallowMerge:function(){return g}});var n=r(484);class l{constructor(e){this.parent=e}set value(e){}get value(){return this.parent}}function s(e,...t){if(t.length<1)return new l(e);const r=v(e,...t);return new class{set value(e){r.target[r.key]=e}get value(){return r.target[r.key]}}}function i(e,...t){if(t.length<1)return new l(e);const r=v(e,...t);return new class{set value(e){Array.isArray(e)||(e=[e]),r.target[r.key]?(Array.isArray(r.target[r.key])||(r.target[r.key]=[r.target[r.key]]),r.target[r.key].push(...e)):r.target[r.key]=e}}}function o(e,t,...r){return!e||r.length<1?new l(t):s(t,...r)}function a(e,t,...r){return!e||r.length<1?new l(t):i(t,...r)}function u(e,...t){let r=null;t=f(t);let n=e;for(let e=0;e<t.length;e++){let l=t[e];if(l=-1!=c(l)?c(l):l,n=null==n?void 0:n[l],void 0===n)return null;r=n}return n}function h(e){let t=e.indexOf(\"[\");return t>=0?e.substring(0,t):e}function c(e){let t=e.indexOf(\"[\"),r=e.indexOf(\"]\");return t>=0&&r>0&&t<r?parseInt(e.substring(t+1,r)):-1}function d(e,t,r={}){let n=[];n.length=t,n[t-1]=r,e.push(...n)}function f(e){return new n.Es2019Array(...e).flatMap((e=>e.split(\"[\"))).map((e=>-1!=e.indexOf(\"]\")?\"[\"+e:e)).filter((e=>\"\"!=e))}function v(e,...t){t=f(t);let r=e,n=null,l=null,s=-1;for(let e=0;e<t.length;e++)if(l=h(t[e]),s=c(t[e]),-1!=s){if(!Array.isArray(r))throw Error(\"Associative array referenced as index array in path reference\");let l=-1;e<t.length-1&&(l=c(t[e+1]));let i=void 0!==(null==r?void 0:r[s]);d(r,s+1,-1!=l?[]:{}),n=s,e==t.length-1?r[s]=i?r[s]:null:r=r[s]}else{if(Array.isArray(r))throw Error(\"Index array referenced as associative array in path reference\");let s=-1;e<t.length-1&&(s=c(t[e+1])),n=l;let i=void 0!==(null==r?void 0:r[l]);e==t.length-1?i||(r[l]=null):(i||(r[l]=-1==s?{}:[]),r=r[l])}return{target:r,key:n}}function p(e){return JSON.parse(JSON.stringify(e))}function g(...e){return m(!0,!1,...e)}function m(e=!0,t=!1,...r){let l={};return new n.Es2019Array(...r).map((e=>({arr:e,keys:Object.keys(e)}))).forEach((({arr:r,keys:s})=>{s.forEach((s=>{let i=r[s];if(!Array.isArray(i)&&t&&(i=new n.Es2019Array(...[i])),e||!(null==l?void 0:l[s]))if(t)if(void 0===(null==l?void 0:l[s]))l[s]=i;else if(Array.isArray(l[s]))l[s].push(...i);else{let e=l[s];l[s]=new n.Es2019Array(...[]),l[s].push(e),l[s].push(...i)}else l[s]=r[s]}))})),l}},549:function(e,t,r){r.d(t,{De:function(){return c},ac:function(){return u},ko:function(){return h}});var n=r(484),l=r(152),s=r(805),i=r(447),o=s.Lang.objAssign;class a extends l.ValueEmbedder{constructor(e,t,r){super(e,t),this.arrPos=null!=r?r:-1}get value(){return\"\"==this.key&&this.arrPos>=0?this._value[this.arrPos]:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]:this._value[this.key]}set value(e){\"\"==this.key&&this.arrPos>=0?this._value[this.arrPos]=e:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]=e:this._value[this.key]=e}}a.absent=a.fromNullable(null);const u=\"__END_POINT__\",h=\"__ANY_POINT__\";class c extends l.Optional{constructor(e,t){super(e),this.configDef=t}get shallowCopy(){return this.shallowCopy$()}shallowCopy$(){let e=new c({});return e.shallowMerge(this.value),e}get deepCopy(){return this.deepCopy$()}deepCopy$(){return new c(o({},this.value))}static fromNullable(e){return new c(e)}shallowMerge(e,t=!0,r=!1){let n=(0,i.shallowMerge)(t,r,this.value,e.value);Array.isArray(this._value)?(this._value.length=0,this._value.push(...n)):(Object.getOwnPropertyNames(this._value).forEach((e=>delete this._value[e])),Object.getOwnPropertyNames(n).forEach((e=>this._value[e]=n[e])))}append(...e){return(0,i.append)(this._value,...e)}appendIf(e,...t){return(0,i.appendIf)(e,this._value,...t)}assign(...e){return(0,i.assign)(this.value,...e)}assignIf(e,...t){return(0,i.assignIf)(e,this._value,...t)}getIf(...e){return this.assertAccessPath(...e),this.getClass().fromNullable((0,i.resolve)(this.value,...e))}get(e){return this.getClass().fromNullable(super.get(e).value)}delete(e){return e in this.value&&delete this.value[e],this}toJson(){return JSON.stringify(this.value)}getClass(){return c}setVal(e){this._value=e}assertAccessPath(...e){var t,r,s,i,o,a,u,c,d;if(e=this.preprocessKeys(...e),!this.configDef)return;let f=l.Optional.fromNullable(Object.keys(this.configDef).map((e=>{let t={};return t[e]=this.configDef[e],t})));for(let v=0;v<e.length;v++){let p=this.keyVal(e[v]),g=this.arrayIndex(e[v]);if(f=this.isArray(g)?\"\"!=p?Array.isArray(f.value)?l.Optional.fromNullable(null===(r=null===(t=new n.Es2019Array(...f.value).find((e=>{var t;return!(null===(t=null==e?void 0:e[p])||void 0===t||!t)})))||void 0===t?void 0:t[p])||void 0===r?void 0:r[g]):l.Optional.fromNullable(null!==(o=null===(i=null===(s=f.value)||void 0===s?void 0:s[p])||void 0===i?void 0:i[g])&&void 0!==o?o:null):Array.isArray(f.value)?l.Optional.fromNullable(null===(a=f.value)||void 0===a?void 0:a[g]):l.Optional.absent:Array.isArray(f.value)?l.Optional.fromNullable(null===(u=new n.Es2019Array(...f.value).find((e=>{var t;return!(null===(t=null==e?void 0:e[p])||void 0===t||!t)})))||void 0===u?void 0:u[p]):l.Optional.fromNullable(null!==(d=null===(c=f.value)||void 0===c?void 0:c[p])&&void 0!==d?d:null),!f.isPresent())throw Error(\"Access Path to config invalid\");if(f.value==h)return}}isNoArray(e){return-1==e}isArray(e){return!this.isNoArray(e)}}},585:function(e,t,r){r.d(t,{DQ:function(){return w},DQ$:function(){return E},DomQuery:function(){return y},DomQueryCollector:function(){return b},ElementAttribute:function(){return p}});var n,l=r(152),s=r(255),i=r(805),o=r(456),a=r(484),u=r(447),h=function(e,t,r,n){return new(r||(r=Promise))((function(l,s){function i(e){try{a(n.next(e))}catch(e){s(e)}}function o(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?l(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}a((n=n.apply(e,t||[])).next())}))},c=i.Lang.trim,d=i.Lang.isString,f=i.Lang.equalsIgnoreCase,v=i.Lang.objToArray;!function(e){e.SELECT=\"select\",e.BUTTON=\"button\",e.SUBMIT=\"submit\",e.RESET=\"reset\",e.IMAGE=\"image\",e.RADIO=\"radio\",e.CHECKBOX=\"checkbox\"}(n||(n={}));class p extends l.ValueEmbedder{constructor(e,t,r=null){super(e,t),this.element=e,this.name=t,this.defaultVal=r}get value(){let e=this.element.get(0).orElse().values;return e.length?e[0].getAttribute(this.name):this.defaultVal}set value(e){let t=this.element.get(0).orElse().values;for(let r=0;r<t.length;r++)t[r].setAttribute(this.name,e);t[0].setAttribute(this.name,e)}getClass(){return p}static fromNullable(e,t=\"value\"){return new p(e,t)}}class g extends l.ValueEmbedder{constructor(e,t,r=null){super(e,t),this.element=e,this.name=t,this.defaultVal=r}get value(){let e=this.element.values;return e.length?e[0].style[this.name]:this.defaultVal}set value(e){let t=this.element.values;for(let r=0;r<t.length;r++)t[r].style[this.name]=e}getClass(){return p}static fromNullable(e,t=\"value\"){return new p(e,t)}}const m=()=>!0;class y{constructor(...e){if(this.rootNode=[],this.pos=-1,this._limits=-1,!l.Optional.fromNullable(e).isAbsent()&&e.length)for(let t=0;t<e.length;t++)if(e[t])if(d(e[t])){let r=y.querySelectorAll(e[t]);r.isAbsent()||e.push(...r.values)}else e[t]instanceof y?this.rootNode.push(...e[t].values):this.rootNode.push(e[t]);else;}get value(){return this.getAsElem(0)}get values(){return this.allElems()}get global(){return o.R}get stream(){throw Error(\"Not implemented, include Stream.ts for this to work\")}get lazyStream(){throw Error(\"Not implemented, include Stream.ts for this to work\")}get id(){return new p(this.get(0),\"id\")}get length(){return this.rootNode.length}get tagName(){return this.getAsElem(0).getIf(\"tagName\")}get nodeName(){return this.getAsElem(0).getIf(\"nodeName\")}isTag(e){return!this.isAbsent()&&(this.nodeName.orElse(\"__none___\").value.toLowerCase()==e.toLowerCase()||this.tagName.orElse(\"__none___\").value.toLowerCase()==e.toLowerCase())}get type(){return this.getAsElem(0).getIf(\"type\")}get name(){return new l.ValueEmbedder(this.getAsElem(0).value,\"name\")}get inputValue(){return this.getAsElem(0).getIf(\"value\").isPresent()?new l.ValueEmbedder(this.getAsElem(0).value):l.ValueEmbedder.absent}get val(){return this.inputValue.value}set val(e){this.inputValue.value=e}get nodeId(){return this.id.value}set nodeId(e){this.id.value=e}get checked(){return new a.Es2019Array(...this.values).every((e=>!!e.checked))}set checked(e){this.eachElem((t=>t.checked=e))}get elements(){return this.querySelectorAll(\"input, checkbox, select, textarea, fieldset\")}get deepElements(){return this.querySelectorAllDeep(\"input, select, textarea, checkbox, fieldset\")}querySelectorAllDeep(e){let t=[],r=this.querySelectorAll(e);r.length&&t.push(r);let n=this.querySelectorAll(\"*\").shadowRoot;if(n.length){let r=n.querySelectorAllDeep(e);r.length&&t.push(r)}return new y(...t)}get disabled(){return this.attr(\"disabled\").isPresent()}set disabled(e){e?this.attr(\"disabled\").value=\"disabled\":this.removeAttribute(\"disabled\")}removeAttribute(e){this.eachElem((t=>t.removeAttribute(e)))}get childNodes(){let e=[];return this.eachElem((t=>{e=e.concat(v(t.childNodes))})),new y(...e)}get asArray(){return new a.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>y.byId(e)))}get offsetWidth(){return new a.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>e.offsetWidth)).reduce(((e,t)=>e+t),0)}get offsetHeight(){return new a.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>e.offsetHeight)).reduce(((e,t)=>e+t),0)}get offsetLeft(){return new a.Es2019Array(...this.rootNode).filter((e=>null!=e)).map((e=>e.offsetLeft)).reduce(((e,t)=>e+t),0)}get offsetTop(){return new a.Es2019Array(this.rootNode).filter((e=>null!=e)).map((e=>e.offsetTop)).reduce(((e,t)=>e+t),0)}get asNodeArray(){return new a.Es2019Array(...this.rootNode.filter((e=>null!=e)))}static querySelectorAllDeep(e){return new y(document).querySelectorAllDeep(e)}static querySelectorAll(e){return-1!=e.indexOf(\"/shadow/\")?new y(document)._querySelectorAllDeep(e):new y(document)._querySelectorAll(e)}static byId(e,t=!1){return d(e)?t?new y(document).byIdDeep(e):new y(document).byId(e):new y(e)}static byTagName(e){return d(e)?new y(document).byTagName(e):new y(e)}static globalEval(e,t){return new y(document).globalEval(e,t)}static globalEvalSticky(e,t){return new y(document).globalEvalSticky(e,t)}static fromMarkup(e){const t=document.implementation.createHTMLDocument(\"\");let r=(e=c(e)).toLowerCase();if(-1!=r.search(/<!doctype[^\\w\\-]+/gi)||-1!=r.search(/<html[^\\w\\-]+/gi)||-1!=r.search(/<head[^\\w\\-]+/gi)||-1!=r.search(/<body[^\\w\\-]+/gi))return t.documentElement.innerHTML=e,new y(t.documentElement);{let t=function(e,t){let r=[\"<\",t,\">\"].join(\"\"),n=[\"<\",t,\" \"].join(\"\");return 0==e.indexOf(r)||0==e.indexOf(n)},n=new y(document.createElement(\"div\"));return t(r,\"thead\")||t(r,\"tbody\")?(n.html(`<table>${e}</table>`),n.querySelectorAll(\"table\").get(0).childNodes.detach()):t(r,\"tfoot\")?(n.html(`<table><thead></thead><tbody><tbody${e}</table>`),n.querySelectorAll(\"table\").get(2).childNodes.detach()):t(r,\"tr\")?(n.html(`<table><tbody>${e}</tbody></table>`),n.querySelectorAll(\"tbody\").get(0).childNodes.detach()):t(r,\"td\")?(n.html(`<table><tbody><tr>${e}</tr></tbody></table>`),n.querySelectorAll(\"tr\").get(0).childNodes.detach()):(n.html(e),n.childNodes.detach())}}get(e){return e<this.rootNode.length?new y(this.rootNode[e]):y.absent}getAsElem(e,t=l.Optional.absent){return e<this.rootNode.length?l.Optional.fromNullable(this.rootNode[e]):t}filesFromElem(e){var t;return e<this.rootNode.length&&(null===(t=this.rootNode[e])||void 0===t?void 0:t.files)?this.rootNode[e].files:[]}allElems(){return this.rootNode}isAbsent(){return 0==this.length}isPresent(e){let t=this.isAbsent();return!t&&e&&e.call(this,this),!t}ifPresentLazy(e=function(){}){return this.isPresent.call(this,e),this}delete(){this.eachElem((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}querySelectorAll(e){return-1!=e.indexOf(\"/shadow/\")?this._querySelectorAllDeep(e):this._querySelectorAll(e)}closest(e){return-1!=e.indexOf(\"/shadow/\")?this._closestDeep(e):this._closest(e)}byId(e,t){let r=[];return t&&(r=r.concat(...new a.Es2019Array(...(null==this?void 0:this.rootNode)||[]).filter((t=>e==t.id)).map((e=>new y(e))))),r=r.concat(this.querySelectorAll(`[id=\"${e}\"]`)),new y(...r)}byIdDeep(e,t){let r=[];t&&(r=r.concat(new a.Es2019Array(...(null==this?void 0:this.rootNode)||[]).filter((t=>e==t.id)).map((e=>new y(e)))));let n=this.querySelectorAllDeep(`[id=\"${e}\"]`);return n.length&&r.push(n),new y(...r)}byTagName(e,t,r){var n;let l=[];return t&&(l=new a.Es2019Array(...null!==(n=null==this?void 0:this.rootNode)&&void 0!==n?n:[]).filter((t=>(null==t?void 0:t.tagName)==e)).reduce(((e,t)=>e.concat([t])),l)),r?l.push(this.querySelectorAllDeep(e)):l.push(this.querySelectorAll(e)),new y(...l)}attr(e,t=null){return new p(this,e,t)}style(e,t=null){return new g(this,e,t)}hasClass(e){let t=!1;return this.eachElem((r=>{if(t=r.classList.contains(e),t)return!1})),t}addClass(e){return this.eachElem((t=>t.classList.add(e))),this}removeClass(e){return this.eachElem((t=>t.classList.remove(e))),this}isMultipartCandidate(e=!1){const t=\"input[type='file']\";return this.matchesSelector(t)||(e?this.querySelectorAllDeep(t):this.querySelectorAll(t)).first().isPresent()}html(e){return l.Optional.fromNullable(e).isAbsent()?this.isPresent()?l.Optional.fromNullable(this.innerHTML):l.Optional.absent:(this.innerHTML=e,this)}dispatchEvent(e){return this.eachElem((t=>t.dispatchEvent(e))),this}set innerHTML(e){this.eachElem((t=>t.innerHTML=e))}get innerHTML(){let e=[];return this.eachElem((t=>e.push(t.innerHTML))),e.join(\"\")}set innerHtml(e){this.innerHTML=e}get innerHtml(){return this.innerHTML}filterSelector(e){let t=[];return this.eachElem((r=>{this._mozMatchesSelector(r,e)&&t.push(r)})),new y(...t)}matchesSelector(e){return this.asArray.some((t=>this._mozMatchesSelector(t.getAsElem(0).value,e)))}getIf(...e){let t=this.childNodes;for(let r=0;r<e.length;r++)if(t=t.filterSelector(e[r]),t.isAbsent())return t;return t}eachElem(e){for(let t=0,r=this.rootNode.length;t<r&&!1!==e(this.rootNode[t],t);t++);return this}firstElem(e=(e=>e)){return this.rootNode.length>1&&e(this.rootNode[0],0),this}lastElem(e=(e=>e)){return this.rootNode.length>1&&e(this.rootNode[this.rootNode.length-1],0),this}each(e){return new a.Es2019Array(...this.rootNode).forEach(((t,r)=>{if(null!=t)return e(y.byId(t),r)})),this}replace(e){return this.each((t=>{let r=t.getAsElem(0).value,n=r.parentElement,l=r.nextElementSibling,s=r.previousElementSibling;null!=l?new y(l).insertBefore(e):s?new y(s).insertAfter(e):new y(n).append(e),t.delete()})),e}first(e=(e=>e)){return this.rootNode.length>=1?(e(this.get(0),0),this.get(0)):this}last(e=(e=>e)){if(this.rootNode.length>=1){let t=this.get(this.rootNode.length-1);return e(t,0),t}return this}filter(e){let t=[];return this.each((r=>{e(r)&&t.push(r)})),new y(...t)}globalEval(e,t){var r,n,l;const s=null!==(n=null===(r=document.getElementsByTagName(\"head\"))||void 0===r?void 0:r[0])&&void 0!==n?n:null===(l=document.documentElement.getElementsByTagName(\"head\"))||void 0===l?void 0:l[0],i=document.createElement(\"script\");t&&(void 0!==(null==i?void 0:i.nonce)?i.nonce=t:i.setAttribute(\"nonce\",t)),i.type=\"text/javascript\",i.innerHTML=e;let o=s.appendChild(i);return s.removeChild(o),this}globalEvalSticky(e,t){let r=document.getElementsByTagName(\"head\")[0]||document.documentElement,n=document.createElement(\"script\");return this.applyNonce(t,n),n.type=\"text/javascript\",n.innerHTML=e,r.appendChild(n),this}detach(){return this.eachElem((e=>{e.parentNode.removeChild(e)})),this}appendTo(e){return i.Lang.isString(e)?(this.appendTo(y.querySelectorAll(e)),this):(this.eachElem((t=>{e.getAsElem(0).orElseLazy((()=>({appendChild:()=>{}}))).value.appendChild(t)})),this)}loadScriptEval(e,t=0,r){return this._loadScriptEval(!1,e,t,r),this}loadScriptEvalSticky(e,t=0,r){return this._loadScriptEval(!0,e,t,r),this}insertAfter(...e){this.each((t=>{let r=t.getAsElem(0).value,n=r.parentNode;for(let t=0;t<e.length;t++){let l=r.nextSibling;e[t].eachElem((e=>{l?(n.insertBefore(e,l),r=l):n.appendChild(e)}))}}));let t=[];return t.push(this),t=t.concat(e),new y(...t)}insertBefore(...e){this.each((t=>{let r=t.getAsElem(0).value,n=r.parentNode;for(let t=0;t<e.length;t++)e[t].eachElem((e=>{n.insertBefore(e,r)}))}));let t=[];return t.push(this),t=t.concat(e),new y(...t)}orElse(...e){return this.isPresent()?this:new y(...e)}orElseLazy(e){return this.isPresent()?this:new y(e())}allParents(e){let t=this.parent(),r=[];for(;t.isPresent();)t.matchesSelector(e)&&r.push(t),t=t.parent();return new y(...r)}firstParent(e){let t=this.parent();for(;t.isPresent();){if(t.matchesSelector(e))return t;t=t.parent()}return y.absent}parentsWhileMatch(e){const t=[];let r=this.parent().filter((t=>t.matchesSelector(e)));for(;r.isPresent();)t.push(r),r=r.parent().filter((t=>t.matchesSelector(e)));return new y(...t)}parent(){let e=[];return this.eachElem((t=>{let r=t.parentNode||t.host||t.shadowRoot;r&&-1==e.indexOf(r)&&e.push(r)})),new y(...e)}copyAttrs(e){return e.eachElem((e=>{let t=v(e.attributes);for(let e of t){let t=e.value,r=e.name;switch(r){case\"id\":this.id.value=t;break;case\"disabled\":this.resolveAttributeHolder(\"disabled\").disabled=t;break;case\"checked\":this.resolveAttributeHolder(\"checked\").checked=t;break;default:this.attr(r).value=t}}})),this}outerHTML(e,t,r,n=!1){var l;if(this.isAbsent())return;let s=null===(l=null===document||void 0===document?void 0:document.activeElement)||void 0===l?void 0:l.id,i=s?y.getCaretPosition(document.activeElement):null,o=y.fromMarkup(e),a=[],u=this.getAsElem(0).value,h=o.get(0),c=u.parentNode,d=h.getAsElem(0).value;if(c.replaceChild(d,u),a.push(new y(d)),this.isAbsent())return this;let f=[];o.length>1&&(f=f.concat(...o.values.slice(1)),a.push(y.byId(d).insertAfter(new y(...f)))),t&&this.runScripts(),r&&this.runCss();let v=y.byId(s);return s&&v.isPresent()&&null!=i&&void 0!==i&&v.eachElem((e=>y.setCaretPosition(e,i))),o}runScripts(e=!1,t=m){const r=t=>{if(t.length){let r=[];new a.Es2019Array(...t).forEach((t=>{t.nonce?(r.length&&(this.globalEval(r.join(\"\\n\")),r.length=0),e?this.globalEvalSticky(t.evalText,t.nonce):this.globalEval(t.evalText,t.nonce)):r.push(t.evalText)})),r.length&&(e?this.globalEvalSticky(r.join(\"\\n\")):this.globalEval(r.join(\"\\n\")),r.length=0),t=[]}return t};let n=[],l=[\"\",\"script\",\"text/javascript\",\"text/ecmascript\",\"ecmascript\"],s=s=>{var i,o,a,u;let h=s.tagName,d=(null!==(i=null==s?void 0:s.type)&&void 0!==i?i:\"\").toLowerCase();if(h&&f(h,\"script\")&&-1!=l.indexOf(d)){let l=s.getAttribute(\"src\");if(void 0!==l&&null!=l&&l.length>0){let i=null!==(o=null==s?void 0:s.nonce)&&void 0!==o?o:s.getAttribute(\"nonce\").value;t(l)&&(n=r(n),e?i?this.loadScriptEvalSticky(l,0,i):this.loadScriptEvalSticky(l,0):i?this.loadScriptEval(l,0,i):this.loadScriptEval(l,0))}else{let e=c(s.text||s.innerText||s.innerHTML),t=!0;for(;t;)t=!1,\"\\x3c!--\"==e.substring(0,4)&&(e=e.substring(4),t=!0),\"//\\x3c!--\"==e.substring(0,4)&&(e=e.substring(6),t=!0),\"//<![CDATA[\"==e.substring(0,11)&&(e=e.substring(11),t=!0);let r=null!==(u=null!==(a=null==s?void 0:s.nonce)&&void 0!==a?a:s.getAttribute(\"nonce\").value)&&void 0!==u?u:\"\";n.push({nonce:r,evalText:e})}}};try{new y(this.filterSelector(\"script\"),this.querySelectorAll(\"script\")).asArray.flatMap((e=>[...e.values])).sort(((e,t)=>e.compareDocumentPosition(t)-3)).forEach((e=>s(e))),r(n)}catch(e){console&&console.error&&console.error(e.message||e.description)}finally{s=null}return this}runCss(){return new y(this.filterSelector(\"link, style\"),this.querySelectorAll(\"link, style\")).asArray.flatMap((e=>[...e.values])).sort(((e,t)=>e.compareDocumentPosition(t)-3)).forEach((e=>(e=>{const t=y.byId(e),r=t.tagName.orElse(\"\").value;let n=y.fromMarkup(`<${r.toLowerCase()} />`);n=n.copyAttrs(t),n.innerHTML=e.innerHTML,t.replace(n)})(e))),this}click(){return this.fireEvent(\"click\"),this}addEventListener(e,t,r){return this.eachElem((n=>n.addEventListener(e,t,r))),this}removeEventListener(e,t,r){return this.eachElem((n=>n.removeEventListener(e,t,r))),this}fireEvent(e,t={}){let r={bubbles:!0,cancelable:!0};r=(0,u.simpleShallowMerge)(r,t),this.eachElem((t=>{let n;if(t.ownerDocument)n=t.ownerDocument;else{if(9!=t.nodeType)throw new Error(\"Invalid node passed to fireEvent: \"+t.id);n=t}if(t.dispatchEvent){let n=Event;switch(e){case\"click\":case\"mousedown\":case\"mouseup\":case\"mousemove\":n=this.global().MouseEvent;break;case\"keyup\":case\"keydown\":case\"keypress\":n=this.global().KeyboardEvent;break;case\"focus\":case\"change\":case\"blur\":case\"select\":break;default:throw\"fireEvent: Couldn't find an event class for event '\"+e+\"'.\"}let l=new n(e,r);l.synthetic=!0,t.dispatchEvent(l)}else if(t.fireEvent){let l=n.createEventObject();l.synthetic=!0,Object.keys(r).forEach((e=>l[e]=r[e])),t.fireEvent(\"on\"+e,l)}}))}textContent(e=\"\"){return this.asArray.map((e=>e.getAsElem(0).orElseLazy((()=>({textContent:\"\"}))).value.textContent||\"\")).reduce(((t,r)=>[t,e,r].join(\"\")),\"\")}innerText(e=\"\"){return this.asArray.map((e=>e.getAsElem(0).orElseLazy((()=>({innerText:\"\"}))).value.innerText||\"\")).reduce(((t,r)=>[t,r].join(e)),\"\")}encodeFormElement(e={}){if(this.name.isAbsent())return;let t=(0,u.simpleShallowMerge)(e);return this.each((e=>{var r,l;if(e.name.isAbsent())return;let s=e.name.value,i=e.tagName.orElse(\"__none__\").value.toLowerCase(),o=e.type.orElse(\"__none__\").value.toLowerCase();if(o=o.toLowerCase(),(\"input\"==i||\"textarea\"==i||\"select\"==i)&&null!=s&&\"\"!=s&&!e.disabled){if(\"select\"==i){let r=e.getAsElem(0).value;if(r.selectedIndex>=0){let e=r.options.length;for(let n=0;n<e;n++)if(r.options[n].selected){let e=r.options[n];(0,u.append)(t,s).value=null!=e.getAttribute(\"value\")?e.value:e.text}}}if(i!=n.SELECT&&o!=n.BUTTON&&o!=n.RESET&&o!=n.SUBMIT&&o!=n.IMAGE&&(o!=n.CHECKBOX&&o!=n.RADIO||e.checked)){let n=null===(l=null===(r=e.value)||void 0===r?void 0:r.value)||void 0===l?void 0:l.files,i=null!=n?n:[];if(null==i?void 0:i.length)(0,u.assign)(t,s).value=Array.from(i);else{if(n)return;(0,u.append)(t,s).value=e.inputValue.value}}}})),t}get cDATAAsString(){return this.asArray.flatMap((e=>e.childNodes.asArray)).filter((e=>{var t,r;return 4==(null===(r=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.value)||void 0===r?void 0:r.nodeType)})).reduce(((e,t)=>{var r,n,l;return e.push(null!==(l=null===(n=null===(r=null==t?void 0:t.value)||void 0===r?void 0:r.value)||void 0===n?void 0:n.data)&&void 0!==l?l:\"\"),e}),[]).join(\"\")}subNodes(e,t){return l.Optional.fromNullable(t).isAbsent()&&(t=this.length),new y(...this.rootNode.slice(e,Math.min(t,this.length)))}limits(e){return this._limits=e,this}hasNext(){let e=-1!=this._limits&&this.pos>=this._limits-1,t=this.pos>=this.values.length-1;return!(e||t)}next(){return this.hasNext()?(this.pos++,new y(this.values[this.pos])):null}lookAhead(e=1){return this.values.length-1<this.pos+e?s.dD.EO_STRM:new y(this.values[this.pos+e])}current(){return-1==this.pos?s.dD.BEF_STRM:new y(this.values[this.pos])}reset(){this.pos=-1}attachShadow(e={mode:\"open\"}){let t=[];return this.eachElem((r=>{let n;if(!(null==r?void 0:r.attachShadow))throw new Error(\"Shadow dom creation not supported by the browser, please use a shim, to gain this functionality\");n=y.byId(r.attachShadow(e)),t.push(n)})),new y(...t)}waitUntilDom(e,t={attributes:!0,childList:!0,subtree:!0,timeout:500,interval:100}){return h(this,void 0,void 0,(function*(){return function(e,t,r={attributes:!0,childList:!0,subtree:!0,timeout:500,interval:100}){return new Promise(((n,l)=>{let s=null;const i=new Error(\"Mutation observer timeout\");function o(e,t){let n=null;return t(e)?e:(n=r.childList?t(e)?e:e.childNodes.filter((e=>t(e))).first().value.value:r.subtree?t(e)?e:e.querySelectorAll(\" * \").filter((e=>t(e))).first().value.value:t(e)?e:null,n)}let a=e;if(a=o(a,t))n(new y(a));else if(\"undefined\"!=typeof MutationObserver){const o=setTimeout((()=>(s.disconnect(),l(i))),r.timeout),a=r=>{const l=new y(r.map((e=>e.target))).filter((e=>t(e))).first();l.isPresent()&&(clearTimeout(o),s.disconnect(),n(new y(l||e)))};s=new MutationObserver(a);let u=Object.assign({},r);delete u.timeout,e.eachElem((e=>{s.observe(e,u)}))}else{let s=setInterval((()=>{let r=o(e,t);r&&(a&&(clearTimeout(a),clearInterval(s),s=null),n(new y(r||e)))}),r.interval),a=setTimeout((()=>{s&&(clearInterval(s),l(i))}),r.timeout)}}))}(this,e,t)}))}get shadowElements(){let e=(this.querySelectorAll(\"*\").filter((e=>e.hasShadow)).allElems()||[]).map((e=>e.shadowRoot));return new y(...e)}get shadowRoot(){let e=[];for(let t=0;t<this.rootNode.length;t++)this.rootNode[t].shadowRoot&&e.push(this.rootNode[t].shadowRoot);return new y(...e)}get hasShadow(){for(let e=0;e<this.rootNode.length;e++)if(this.rootNode[e].shadowRoot)return!0;return!1}static getCaretPosition(e){let t=0;try{if(null===document||void 0===document?void 0:document.selection){e.focus();let r=document.selection.createRange();r.moveStart(\"character\",-e.value.length),t=r.text.length}}catch(e){}return t}static setCaretPosition(e,t){(null==e?void 0:e.focus)&&(null==e||e.focus()),(null==e?void 0:e.setSelectiongRange)&&(null==e||e.setSelectiongRange(t,t))}[Symbol.iterator](){return{next:()=>({done:!this.hasNext(),value:this.next()})}}concat(e,t=!0){let r=this.asArray;const n=new y(...r.concat(e.asArray));if(!t)return n;let l={};return new y(...n.asArray.filter((e=>{const t=!(null==l?void 0:l[e.value.value.outerHTML]);return l[e.value.value.outerHTML]=!0,t})))}append(e){return this.each((t=>e.appendTo(t))),this}prependTo(e){return e.eachElem((e=>{e.prepend(...this.allElems())})),this}prepend(e){return this.eachElem((t=>{t.prepend(...e.allElems())})),this}_querySelectorAll(e){var t,r;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let n=[];for(let t=0;t<this.rootNode.length;t++){if(!(null===(r=this.rootNode[t])||void 0===r?void 0:r.querySelectorAll))continue;let l=this.rootNode[t].querySelectorAll(e);n=n.concat(...v(l))}return new y(...n)}_querySelectorAllDeep(e){var t;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let r=new y(...this.rootNode),n=e.split(/\\/shadow\\//);for(let e=0;e<n.length;e++){if(\"\"==n[e])continue;let t=n[e];r=r.querySelectorAll(t),e<n.length-1&&(r=r.shadowRoot)}return r}_closest(e){var t,r;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let n=[];for(let t=0;t<this.rootNode.length;t++){if(!(null===(r=this.rootNode[t])||void 0===r?void 0:r.closest))continue;let l=[this.rootNode[t].closest(e)];n=n.concat(...l)}return new y(...n)}_closestDeep(e){var t;if(!(null===(t=null==this?void 0:this.rootNode)||void 0===t?void 0:t.length))return this;let r=new y(...this.rootNode),n=e.split(/\\/shadow\\//);for(let e=0;e<n.length;e++){if(\"\"==n[e])continue;let t=n[e];r=r.closest(t),e<n.length-1&&(r=r.shadowRoot)}return r}_mozMatchesSelector(e,t){let r=e,n=r.matches||r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector||function(t){let r=(document||ownerDocument).querySelectorAll(t),n=r.length;for(;--n>=0&&r.item(n)!==e;);return n>-1};return n.call(e,t)}_loadScriptEval(e,t,r=0,n){let l=this.createSourceNode(t,n),s=this.createSourceNode(null,n),i=`nonce_${Date.now()}_${Math.random()}`;s.innerHTML=`document.head[\"${i}\"] = true`;let o=document.head;if(o.appendChild(s),o.removeChild(s),o[i]){try{r?setTimeout((()=>{o.appendChild(l),e||o.removeChild(l)}),r):(o.appendChild(l),e||o.removeChild(l))}finally{delete o[i]}return this}}resolveAttributeHolder(e=\"value\"){let t=[];return t[e]=null,e in this.getAsElem(0).value?this.getAsElem(0).value:t}createSourceNode(e,t){let r=document.createElement(\"script\");return r.type=\"text/javascript\",t&&(void 0!==(null==r?void 0:r.nonce)?r.nonce=t:r.setAttribute(\"nonce\",t)),e&&(r.src=e),r}applyNonce(e,t){e&&(void 0!==(null==t?void 0:t.nonce)?t.nonce=e:t.setAttribute(\"nonce\",e))}}y.absent=new y,y.global=o.R;class b{constructor(){this.data=[]}collect(e){this.data.push(e)}get finalValue(){return new y(...this.data)}}const w=y,E=y.querySelectorAll},484:function(e,t,r){r.d(t,{Es2019Array:function(){return s},_Es2019Array:function(){return l}});class n extends Array{constructor(...e){super(...e),e._another?this._another=e._another:this._another=e,this.flatMap=e=>this._flatMap(e),this.flat=(e=1)=>this._flat(e)}map(e,t){return new l(...Array.prototype.map.call(this._another,e,t))}concat(...e){return new l(...Array.prototype.concat.call(this._another,...e))}reverse(){return new l(...Array.prototype.reverse.call(this._another))}slice(e,t){return new l(...Array.prototype.slice.call(this._another,e,t))}splice(e,t){return new l(...Array.prototype.splice.call(this._another,e,t))}filter(e,t){return new l(...Array.prototype.filter.call(this._another,e,t))}reduce(e,t){return Array.prototype.reduce.call(this._another,e,t)}_flat(e=1){return this._flatResolve(this._another,e)}_flatResolve(e,t=1){if(0==t)return e;let r=[];return e.forEach((e=>{e=Array.isArray(e)?e:[e];let n=this._flatResolve(e,t-1);r=r.concat(n)})),new s(...r)}_flatMap(e){let t=this.map((t=>e(t)));return this._flatResolve(t)}}function l(...e){let t=new n(...e);return new Proxy(t,{get(e,t,r){return\"symbol\"==typeof t?e._another[t]:isNaN(parseInt(t))?e[t]:e._another[t]},set(e,t,r){return e[t]=r,e._another[t]=r,!0}})}var s=Array.prototype.flatMap?function(...e){return[...e]}:l},456:function(e,t,r){function n(){var e;let t=\"undefined\"!=typeof globalThis&&globalThis.window?globalThis.window:\"undefined\"!=typeof window?window:\"undefined\"!=typeof globalThis?globalThis:void 0!==r.g&&(null===r.g||void 0===r.g?void 0:r.g.window)?r.g.window:void 0!==r.g?r.g:null;return null!==(e=null==t?void 0:t.window)&&void 0!==e?e:t}r.d(t,{R:function(){return n}})},805:function(e,t,r){r.d(t,{Lang:function(){return n}});var n,l=r(152),s=r(484);!function(e){function t(e){let t=/\\s/,r=(e=e.replace(/^\\s\\s*/,\"\")).length;for(;t.test(e.charAt(--r)););return e.slice(0,r+1)}function r(e){return!!arguments.length&&null!=e&&(\"string\"==typeof e||e instanceof String)}e.saveResolve=function(e,t=null){try{let r=e();return l.Optional.fromNullable(null!=r?r:t)}catch(e){return l.Optional.absent}},e.saveResolveLazy=function(e,t=null){try{let r=e();return l.Optional.fromNullable(null!=r?r:t())}catch(e){return l.Optional.absent}},e.strToArray=function(e,r=/\\./gi){let n=[];return e.split(r).forEach((e=>{n.push(t(e))})),n},e.trim=t,e.objToArray=function(e,t=0,r=[]){return\"__undefined__\"==(null!=e?e:\"__undefined__\")?null!=r?r:null:e instanceof Array&&!t&&!r?e:new s.Es2019Array(...r.concat(Array.prototype.slice.call(e,t)))},e.equalsIgnoreCase=function(e,t){let r=null!=t?t:\"___no_value__\";return(null!=e?e:\"___no_value__\").toLowerCase()===r.toLowerCase()},e.assertType=function(e,t){return r(t)?typeof e==t:e instanceof t},e.isString=r,e.isFunc=function(e){return e instanceof Function||\"function\"==typeof e},e.objAssign=function(e,...t){if(null==e)throw new TypeError(\"Cannot convert undefined or null to object\");let r=Object(e);return Object.assign?(t.forEach((e=>Object.assign(r,e))),r):(t.filter((e=>null!=e)).forEach((e=>{let t=e;Object.keys(t).filter((e=>Object.prototype.hasOwnProperty.call(t,e))).forEach((e=>r[e]=t[e]))})),r)}}(n||(n={}))},152:function(e,t,r){r.d(t,{Monad:function(){return l},Optional:function(){return s},ValueEmbedder:function(){return i}});var n=r(484);class l{constructor(e){this._value=e}get value(){return this._value}map(e){e||(e=e=>e);let t=e(this.value);return new l(t)}flatMap(e){let t=this.map(e);for(;(null==t?void 0:t.value)instanceof l;)t=t.value;return t}}class s extends l{constructor(e){super(e)}get value(){return this._value instanceof l?this._value.flatMap().value:this._value}static fromNullable(e){return new s(e)}isAbsent(){return void 0===this.value||null==this.value}isPresent(e){let t=this.isAbsent();return!t&&e&&e.call(this,this),!t}ifPresentLazy(e=(()=>{})){return this.isPresent.call(this,e),this}orElse(e){return this.isPresent()?this:null==e?s.absent:this.flatMap((()=>e))}orElseLazy(e){return this.isPresent()?this:this.flatMap(e)}flatMap(e){let t=super.flatMap(e);return t instanceof s?t.flatMap():s.fromNullable(t.value)}getIf(...e){e=this.preprocessKeys(...e);let t=this;for(let r=0;r<e.length;r++){let n=this.keyVal(e[r]),l=this.arrayIndex(e[r]);if(\"\"===n&&l>=0){if(t=this.getClass().fromNullable(t.value instanceof Array?t.value.length<l?null:t.value[l]:null),t.isAbsent())return t}else if(n&&l>=0){if(t.getIfPresent(n).isAbsent())return t;if(t=t.getIfPresent(n).value instanceof Array?this.getClass().fromNullable(t.getIfPresent(n).value[l]):this.getClass().absent,t.isAbsent())return t}else{if(t=t.getIfPresent(n),t.isAbsent())return t;l>-1&&(t=this.getClass().fromNullable(t.value[l]))}}return t}match(e){return!this.isAbsent()&&e(this.value)}get(e=s.absent){return this.isAbsent()?this.getClass().fromNullable(e).flatMap():this.getClass().fromNullable(this.value).flatMap()}toJson(){return JSON.stringify(this.value)}getClass(){return s}arrayIndex(e){let t=e.indexOf(\"[\"),r=e.indexOf(\"]\");return t>=0&&r>0&&t<r?parseInt(e.substring(t+1,r)):-1}keyVal(e){let t=e.indexOf(\"[\");return t>=0?e.substring(0,t):e}getIfPresent(e){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[e]).flatMap()}resolve(e){if(this.isAbsent())return s.absent;try{return s.fromNullable(e(this.value))}catch(e){return s.absent}}preprocessKeys(...e){return e.flatMap((e=>new n.Es2019Array(...e.split(/]\\s*\\[/gi)).map((e=>(-1==(e=e.replace(/^\\s+|\\s+$/g,\"\")).indexOf(\"[\")&&-1!=e.indexOf(\"]\")&&(e=\"[\"+e),-1==e.indexOf(\"]\")&&-1!=e.indexOf(\"[\")&&(e+=\"]\"),e)))))}}s.absent=s.fromNullable(null);class i extends s{constructor(e,t=\"value\"){super(e),this.key=t}get value(){return this._value?this._value[this.key]:null}set value(e){this._value&&(this._value[this.key]=e)}orElse(e){let t={};return t[this.key]=e,this.isPresent()?this:new i(t,this.key)}orElseLazy(e){if(this.isPresent())return this;{let t={};return t[this.key]=e(),new i(t,this.key)}}getClass(){return i}static fromNullable(e,t=\"value\"){return new i(e,t)}}i.absent=i.fromNullable(null)},255:function(e,t,r){r.d(t,{dD:function(){return n}});var n;r(484),r(549);!function(e){e.EO_STRM=\"__EO_STRM__\",e.BEF_STRM=\"___BEF_STRM__\"}(n||(n={}))},121:function(e,t,r){r.d(t,{XMLQuery:function(){return o},XQ:function(){return a}});var n=r(805),l=r(585),s=r(456),i=n.Lang.isString;class o extends l.DomQuery{constructor(e,t=\"text/xml\"){let r=e=>{if(null==e)return null;return n.Lang.saveResolveLazy((()=>new((0,s.R)().DOMParser)),(()=>(()=>{let e=new ActiveXObject(\"Microsoft.XMLDOM\");return e.async=!1,{parseFromString:(t,r)=>e.loadXML(t)}})())).value.parseFromString(e,t)};i(e)?super(r(e)):super(e)}isXMLParserError(){return this.querySelectorAll(\"parsererror\").isPresent()}toString(){let e=[];return this.eachElem((t=>{var r,n,l,i;let o=null!==(i=null===(l=null===(n=null===(r=(0,s.R)())||void 0===r?void 0:r.XMLSerializer)||void 0===n?void 0:n.constructor())||void 0===l?void 0:l.serializeToString(t))&&void 0!==i?i:null==t?void 0:t.xml;o&&e.push(o)})),e.join(\"\")}parserErrorText(e){return this.querySelectorAll(\"parsererror\").textContent(e)}static parseXML(e){return new o(e)}static parseHTML(e){return new o(e,\"text/html\")}static fromString(e,t=\"text/xml\"){return new o(e,t)}}const a=o}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||new Function(\"return this\")()}catch(e){if(\"object\"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var n={};!function(){r.r(n),r.d(n,{Assoc:function(){return i},CONFIG_ANY:function(){return o.ko},CONFIG_VALUE:function(){return o.ac},Config:function(){return o.De},DQ:function(){return e.DQ},DQ$:function(){return e.DQ$},DomQuery:function(){return e.DomQuery},DomQueryCollector:function(){return e.DomQueryCollector},ElementAttribute:function(){return e.ElementAttribute},Es2019Array:function(){return a.Es2019Array},Lang:function(){return t.Lang},Monad:function(){return l.Monad},Optional:function(){return l.Optional},ValueEmbedder:function(){return l.ValueEmbedder},XMLQuery:function(){return s.XMLQuery},XQ:function(){return s.XQ},_Es2019Array:function(){return a._Es2019Array},append:function(){return i.append},assign:function(){return i.assign},assignIf:function(){return i.assignIf},shallowMerge:function(){return i.shallowMerge},simpleShallowMerge:function(){return i.simpleShallowMerge}});var e=r(585),t=r(805),l=r(152),s=r(121),i=r(447),o=r(549),a=r(484)}();var l=exports;for(var s in n)l[s]=n[s];n.__esModule&&Object.defineProperty(l,\"__esModule\",{value:!0})}();\n//# sourceMappingURL=index_core.js.map","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Implementation} from \"../impl/AjaxImpl\";\nimport {PushImpl} from \"../impl/PushImpl\";\nimport {oam as _oam} from \"../myfaces/OamSubmit\";\nimport {$nsp, CTX_OPTIONS_EXECUTE, CTX_OPTIONS_PARAMS, CTX_PARAM_RENDER, P_BEHAVIOR_EVENT} from \"../impl/core/Const\";\nimport {ErrorData} from \"../impl/xhrCore/ErrorData\";\nimport {EventData} from \"../impl/xhrCore/EventData\";\n\n//we use modules to get a proper jsdoc and static/map structure in the calls\n//as per spec requirement\nexport module faces {\n\n\n    /**\n     * Version of the implementation for the faces.ts.\n     * <p />\n     * as specified within the jsf specifications faces.html:\n     * <ul>\n     * <li>left two digits major release number</li>\n     * <li>middle two digits minor spec release number</li>\n     * <li>right two digits bug release number</li>\n     * </ul>\n     * @constant\n     */\n    export var specversion = 400000;\n    /**\n     * Implementation version as specified within the jsf specification.\n     * <p />\n     * A number increased with every implementation version\n     * and reset by moving to a new spec release number\n     *\n     * @constant\n     */\n    export var implversion = 0;\n\n    /**\n     * SeparatorChar as defined by facesContext.getNamingContainerSeparatorChar()\n     */\n    export var separatorchar: string = getSeparatorChar();\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Context Path as defined externalContext.requestContextPath\n     */\n    export var contextpath: string = '#{facesContext.externalContext.requestContextPath}';\n    // we do not have a fallback here, for now\n\n    /**\n     * This method is responsible for the return of a given project stage as defined\n     * by the jsf specification.\n     * <p/>\n     * Valid return values are:\n     * <ul>\n     *     <li>&quot;Production&quot;</li>\n     *     <li>&quot;Development&quot;</li>\n     *     <li>&quot;SystemTest&quot;</li>\n     *     <li>&quot;UnitTest&quot;</li>\n     * </li>\n     *\n     * @return {String} the current project state emitted by the server side method:\n     * <i>jakarta.faces.application.Application.getProjectStage()</i>\n     */\n    export function getProjectStage(): string {\n        return Implementation.getProjectStage();\n    }\n\n    /**\n     * collect and encode data for a given form element (must be of type form)\n     * find the jakarta.faces.ViewState element and encode its value as well!\n     * return a concatenated string of the encoded values!\n     *\n     * @throws an exception in case of the given element not being of type form!\n     * https://issues.apache.org/jira/browse/MYFACES-2110\n     */\n    export function getViewState(formElement: Element | string): string {\n        return Implementation.getViewState(formElement);\n    }\n\n    /**\n     * returns the window identifier for the given node / window\n     * @return the window identifier or null if none is found\n     * @param rootNode\n     */\n    export function getClientWindow(rootNode?: Element | string): string {\n        return Implementation.getClientWindow(rootNode);\n    }\n\n    // private helper functions\n    function getSeparatorChar(): string {\n        const sep = '#{facesContext.namingContainerSeparatorChar}';\n        //We now enable standalone mode, the separator char was not mapped we make a fallback to 2.3 behavior\n        //the idea is that the separator char is provided from the underlying container, but if not then we\n        //will perform a fallback (aka 2.3 has the url fallback behavior)\n        return (sep.match(/\\#\\{facesContext.namingContainerSeparatorChar\\}/gi)) ? Implementation.getSeparatorChar() : sep;\n    }\n\n\n\n\n    export module ajax {\n        \"use strict\";\n\n        /**\n         * this function has to send the ajax requests\n         *\n         * following request conditions must be met:\n         * <ul>\n         *  <li> the request must be sent asynchronously! </li>\n         *  <li> the request must be a POST!!! request </li>\n         *  <li> the request url must be the form action attribute </li>\n         *  <li> all requests must be queued with a client side request queue to ensure the request ordering!</li>\n         * </ul>\n         *\n         * @param {String|Node} element: any dom element no matter being it html or jsf, from which the event is emitted\n         * @param {EVENT} event: any javascript event supported by that object\n         * @param {Map} options : map of options being pushed into the ajax cycle\n         */\n        export function request(element: Element, event?: Event, options?: Options): void {\n            Implementation.request(element, event, options)\n        }\n\n        /**\n         * response handler\n         * @param request the request object having triggered this response\n         * @param context the request context\n         *\n         */\n        export function response(request: XMLHttpRequest, context?: Context): void {\n            Implementation.response(request, context);\n        }\n\n        /**\n         * Adds an error handler to our global error queue.\n         * the error handler must be of the format <i>function errorListener(&lt;errorData&gt;)</i>\n         * with errorData being of following format:\n         * <ul>\n         *     <li> errorData.type : &quot;error&quot;</li>\n         *     <li> errorData.status : the error status message</li>\n         *     <li> errorData.serverErrorName : the server error name in case of a server error</li>\n         *     <li> errorData.serverErrorMessage : the server error message in case of a server error</li>\n         *     <li> errorData.source  : the issuing source element which triggered the request </li>\n         *     <li> eventData.responseCode: the response code (aka http request response code, 401 etc...) </li>\n         *     <li> eventData.responseText: the request response text </li>\n         *     <li> eventData.responseXML: the request response xml </li>\n         * </ul>\n         *\n         * @param errorFunc error handler must be of the format <i>function errorListener(&lt;errorData&gt;)</i>\n         */\n        export function addOnError(errorFunc: (data: ErrorData) => void): void {\n            Implementation.addOnError(<any>errorFunc);\n        }\n\n        /**\n         * Adds a global event listener to the ajax event queue. The event listener must be a function\n         * of following format: <i>function eventListener(&lt;eventData&gt;)</i>\n         *\n         * @param eventFunc event must be of the format <i>function eventListener(&lt;eventData&gt;)</i>\n         */\n        export function addOnEvent(eventFunc: (data: EventData) => void): void {\n            Implementation.addOnEvent(<any>eventFunc);\n        }\n    }\n\n    export module util {\n\n        /**\n         * varargs function which executes a chain of code (functions or any other code)\n         *\n         * if any of the code returns false, the execution\n         * is terminated prematurely skipping the rest of the code!\n         *\n         * @param {HTMLElement | String} source, the callee object\n         * @param {Event} event, the event object of the callee event triggering this function\n         * @param funcs ... arbitrary array of functions or strings\n         * @returns true if the chain has succeeded false otherwise\n         */\n        export function chain(source: HTMLElement | string, event: Event | null, ...funcs: Array<Function | string>): boolean {\n            return Implementation.chain(source, event, ...(funcs as EvalFuncs));\n        }\n    }\n\n    export module push {\n        /**\n         * @param socketClientId the sockets client identifier\n         * @param url the uri to reach the socket\n         * @param channel the channel name/id\n         * @param onopen The function to be invoked when the web socket is opened.\n         * @param onmessage The function to be invoked when a message is received.\n         * @param onerror The function to be invoked when an error occurs.\n         * @param onclose The function to be invoked when the web socket is closed.\n         * @param behaviors functions which are invoked whenever a message is received\n         * @param autoConnect Whether or not to automatically open the socket. Defaults to <code>false</code>.\n         */\n        export function init(socketClientId: string,\n                    url: string,\n                    channel: string,\n                    onopen: Function,\n                    onmessage: Function,\n                    onerror: Function,\n                    onclose: Function,\n                    behaviors: any,\n                    autoConnect: boolean): void {\n            PushImpl.init(socketClientId, url, channel, onopen, onmessage, onerror, onclose, behaviors, autoConnect);\n        }\n\n        /**\n         * Open the web socket on the given channel.\n         * @param  socketClientId The name of the web socket channel.\n         * @throws  Error is thrown, if the channel is unknown.\n         */\n        export function open(socketClientId: string): void {\n            PushImpl.open(socketClientId);\n        }\n\n        /**\n         * Close the web socket on the given channel.\n         * @param  socketClientId The id of the web socket client.\n         * @throws  Error is thrown, if the channel is unknown.\n         */\n        export function close(socketClientId: string): void {\n            PushImpl.close(socketClientId);\n        }\n\n    }\n}\n\nexport module myfaces {\n    /**\n     * AB function similar to mojarra and Primefaces\n     * not part of the spec but a convenience accessor method\n     * Code provided by Thomas Andraschko\n     *\n     * @param source the event source\n     * @param event the event\n     * @param eventName event name for java.jakarta.faces.behavior.evemnt\n     * @param execute execute list as passed down in faces.ajax.request\n     * @param render the render list as string\n     * @param options the options which need to be mered in\n     */\n    export function ab(source: Element, event: Event, eventName: string, execute: string, render: string, options: Options = {}): void {\n        if (eventName) {\n           options[CTX_OPTIONS_PARAMS] = options?.[CTX_OPTIONS_PARAMS] ?? {};\n           options[CTX_OPTIONS_PARAMS][$nsp(P_BEHAVIOR_EVENT)] = eventName;\n        }\n        if (execute) {\n            options[CTX_OPTIONS_EXECUTE] = execute;\n        }\n        if (render) {\n            options[CTX_PARAM_RENDER] = render;\n        }\n\n        (window?.faces ?? window.jsf).ajax.request(source, event, options);\n    }\n\n\n    const onReadyChain: Array<() => void> = [];\n    let readyStateListener = null;\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Helper function in the myfaces namespace to handle document ready properly for the load case\n     * the ajax case, does not need proper treatment, since it is deferred anyway.\n     * Used by command script as helper function!\n     *\n     * @param executionFunc the function to be executed upon ready\n     */\n    export function onDomReady(executionFunc: () => void) {\n        if(document.readyState !== \"complete\") {\n            onReadyChain.push(executionFunc);\n            if(!readyStateListener) {\n                readyStateListener = () => {\n                    window.removeEventListener(\"DOMContentLoaded\", readyStateListener);\n                    readyStateListener = null;\n                    try {\n                        onReadyChain.forEach(func => func());\n                    } finally {\n                        //done we clear now the ready chain\n                        onReadyChain.length = 0;\n                    }\n                };\n                window.addEventListener(\"DOMContentLoaded\", readyStateListener);\n            }\n        } else {\n            if(readyStateListener) {\n                readyStateListener();\n            }\n            executionFunc();\n        }\n\n    }\n\n    /**\n     * legacy oam functions\n     */\n    export const oam = _oam;\n}\n\n\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {IListener} from \"./util/IListener\";\nimport {Response} from \"./xhrCore/Response\";\nimport {XhrRequest} from \"./xhrCore/XhrRequest\";\nimport {Config, DQ, DQ$, Lang, Optional} from \"mona-dish\";\nimport {Assertions} from \"./util/Assertions\";\nimport {ExtConfig, ExtDomQuery} from \"./util/ExtDomQuery\";\nimport {ErrorData} from \"./xhrCore/ErrorData\";\nimport {EventData} from \"./xhrCore/EventData\";\nimport {ExtLang} from \"./util/Lang\";\n\nimport {\n    CTX_OPTIONS_EXECUTE,\n    CTX_PARAM_REQ_PASS_THR,\n    CTX_PARAM_SRC_CTL_ID,\n    CTX_PARAM_SRC_FRM_ID,\n    IDENT_ALL,\n    IDENT_FORM,\n    IDENT_NONE,\n    IDENT_THIS,\n    MYFACES,\n    ON_ERROR,\n    ON_EVENT,\n    P_AJAX,\n    P_CLIENT_WINDOW,\n    P_EVT,\n    P_EXECUTE,\n    P_AJAX_SOURCE,\n    P_RENDER,\n    P_RESET_VALUES,\n    P_WINDOW_ID,\n    CTX_PARAM_RENDER,\n    SOURCE,\n    HTML_TAG_FORM,\n    CTX_OPTIONS_PARAMS,\n    VIEW_ID,\n    $faces,\n    EMPTY_STR,\n    NAMED_VIEWROOT,\n    NAMING_CONTAINER_ID,\n    CTX_PARAM_PPS,\n    MYFACES_OPTION_PPS,\n    $nsp\n} from \"./core/Const\";\nimport {\n    resolveDefaults,\n    resolveDelay,\n    resolveForm,\n    resolveTimeout, resolveViewId, resolveViewRootId, resoveNamingContainerMapper\n} from \"./xhrCore/RequestDataResolver\";\nimport {encodeFormData} from \"./util/FileUtils\";\nimport {XhrQueueController} from \"./util/XhrQueueController\";\n\n/*\n * allowed project stages\n */\nenum ProjectStages {\n    Production = \"Production\",\n    Development = \"Development\",\n    SystemTest = \"SystemTest\",\n    UnitTest = \"UnitTest\"\n}\n\n/*\n *   Block-filter for the pass-through filtering; the attributes given here\n *   will not be transmitted from the options into the pass-through\n */\nenum BlockFilter {\n    onerror = \"onerror\",\n    onevent = \"onevent\",\n    render = \"render\",\n    execute = \"execute\",\n    myfaces = \"myfaces\",\n    delay = \"delay\",\n    timeout = \"timeout\",\n    resetValues = \"resetValues\",\n    windowId = \"windowId\",\n    params = \"params\"\n}\n\n\n\n/**\n * Core Implementation\n * to distinct between api and impl\n *\n * The original idea was to make the implementation pluggable\n * but this is pointless, you always can overwrite the thin api layer\n * however a dedicated api makes sense for readability reasons\n */\nexport module Implementation {\n/*\n Small internal explanation, this code is optimized for readability\n and cuts off a ton of old legacy code.\n Aka older browsers are not supported anymore.\n We use a self written helper library to keep the number of exernal\n code dependencies down.\n The library is called mona-dish and started as a small sideproject of mine\n it provides following\n\n a) Monad like structures for querying because this keeps the code denser and adds abstractions\n that always was the strong point of jQuery, and it still is better in this regard than what ecmascript provides\n\n c) A neutral json like configuration which allows assignments of arbitrary values with reduce code which then can be\n transformed into different data representations\n\n examples:\n internalCtx.assign(MYPARAM, CTX_PARAM_SRC_FRM_ID).value = form.id.value;\n passes a value into context.MYPARAM.CTX_PARAM_SRC_FRM_ID\n\n basically an abbreviation for\n\n internalCtxt[MYPARAM] = internalCtxt?.[MYPARAM] ?  internalCtxt[MYPARAM] : {};\n internalCtxt[MYPARAM][CTX_PARAM_SRC_FRM_ID] = internalCtxt?.[MYPARAM][CTX_PARAM_SRC_FRM_ID] ?  internalCtxt[MYPARAM][CTX_PARAM_SRC_FRM_ID] : {};\n internalCtxt[MYPARAM][CTX_PARAM_SRC_FRM_ID] = form.id.value;\n\n\n internalCtx.assign(condition, MYPARAM, CTX_PARAM_SRC_FRM_ID).value = form.id.value;\n passes a value into context.MYPARAM.CTX_PARAM_SRC_FRM_ID if condition === true otherwise it is ignored\n\n abbreviates:\n if(condition) {\n    internalCtxt[MYPARAM] = internalCtxt?.[MYPARAM] ?  internalCtxt[MYPARAM] : {};\n    internalCtxt[MYPARAM][CTX_PARAM_SRC_FRM_ID] = internalCtxt?.[MYPARAM][CTX_PARAM_SRC_FRM_ID] ?  internalCtxt[MYPARAM][CTX_PARAM_SRC_FRM_ID] : {};\n    internalCtxt[MYPARAM][CTX_PARAM_SRC_FRM_ID] = form.id.value;\n }\n\n\n d) Optional constructs, while under heavy debate we only use them lightly where the api requires it from mona-dish\n\n Note the inclusion of this library uses a reduced build which only includes the part of it, which we really use\n\n */\n\n    import trim = Lang.trim;\n    import getMessage = ExtLang.getMessage;\n    import getGlobalConfig = ExtLang.getGlobalConfig;\n    import assert = Assertions.assert;\n    import ofAssoc = ExtLang.ofAssoc;\n    import collectAssoc = ExtLang.collectAssoc;\n\n    let projectStage: string = null;\n    let separator: string = null;\n    let eventQueue = [];\n    let errorQueue = [];\n    export let requestQueue: XhrQueueController<XhrRequest> = null;\n    /*error reporting threshold*/\n    let threshold = \"ERROR\";\n\n    /**\n     * fetches the separator char from the given script tags\n     *\n     * @return {string} the separator char for the given script tags\n     */\n    export function getSeparatorChar(): string {\n        return resolveGlobalConfig()?.separator ??\n            this?.separator ??\n            (separator = ExtDomQuery.searchJsfJsFor(/separator=([^&;]*)/).orElse(\":\").value);\n    }\n\n    /**\n     * this is for testing purposes only, since AjaxImpl is a module\n     * we need to reset for every unit test its internal states\n     */\n    export function reset() {\n        projectStage = null;\n        separator = null;\n        eventQueue = [];\n        errorQueue = [];\n        requestQueue = null;\n    }\n\n    /**\n     * @return the project stage also emitted by the server:\n     * it cannot be cached and must be delivered over the server\n     * The value for it comes from the requestInternal parameter of the faces.js script called \"stage\".\n     */\n    export function getProjectStage(): string | null {\n        return resolveGlobalConfig()?.projectStage ??\n            this?.projectStage ??\n            (projectStage = resolveProjectStateFromURL());\n    }\n\n    /**\n     * resolves the project stage as url parameter\n     * @return the project stage or null\n     */\n    export function resolveProjectStateFromURL(): string | null {\n\n        /* run through all script tags and try to find the one that includes faces.js */\n        const foundStage = ExtDomQuery.searchJsfJsFor(/stage=([^&;]*)/).value as string;\n        return (foundStage in ProjectStages) ? foundStage : ProjectStages.Production; // MYFACES-4572: default is production\n    }\n\n    /**\n     * implementation of the faces.util.chain functionality\n     *\n     * @param source\n     * @param event\n     * @param funcs\n     */\n    export function chain(source: any, event: Event, ...funcs: EvalFuncs): boolean {\n        // we can use our lazy stream each functionality to run our chain here.\n        // by passing a boolean as return value into the onElem call\n        // we can stop early at the first false, just like the spec requests\n\n        let ret;\n        funcs.every(func => {\n            let returnVal = resolveAndExecute(source, event, func);\n            if(returnVal !== false) {\n                ret = returnVal;\n            }\n            return returnVal !== false;\n        });\n        return ret;\n\n    }\n\n    /**\n     * this function has to send the ajax requests\n     *\n     * following request conditions must be met:\n     * <ul>\n     *  <li> the request must be sent asynchronously! </li>\n     *  <li> the request must be a POST!!! request </li>\n     *  <li> the request url must be the form action attribute </li>\n     *  <li> all requests must be queued with a client side request queue to ensure the request ordering!</li>\n     * </ul>\n     *\n     * @param el any dom element no matter being it html or jsf, from which the event is emitted\n     * @param event any javascript event supported by that object\n     * @param opts  map of options being pushed into the ajax cycle\n     *\n     * a) transformArguments out of the function\n     * b) passThrough handling with a map copy with a filter map block map\n     */\n    export function request(el: ElemDef, event?: Event, opts ?: Options) {\n\n        const {\n            options,\n            elem,\n            elementId,\n            windowId,\n            isResetValues\n        } = resolveDefaults(event, opts, el);\n        const requestCtx = new ExtConfig({});\n        const internalCtx = new ExtConfig({});\n\n        Assertions.assertRequestIntegrity(options, elem);\n\n        /**\n         * fetch the parent form\n         *\n         * note we also add an override possibility here\n         * so that people can use dummy forms and work\n         * with detached objects\n         */\n        const form: DQ = resolveForm(elem, event);\n        const viewId: string = resolveViewId(form);\n        const formId = form.id.value;\n        const delay: number = resolveDelay(options);\n        const timeout: number = resolveTimeout(options);\n\n        requestCtx.assignIf(!!windowId, P_WINDOW_ID).value = windowId;\n\n        // old non - spec behavior will be removed after it is clear whether the removal breaks any code\n        requestCtx.assign(CTX_PARAM_REQ_PASS_THR).value = extractLegacyParams(options.value);\n\n        // spec conform behavior, all passthrough params must be under \"passthrough\n        const params = remapArrayToAssocArr(options.getIf(CTX_OPTIONS_PARAMS).orElse({}).value);\n        //we turn off the remapping for the param merge, because we do not want to have\n        //any namespacing to be remapped\n\n        let ctxPassthrough = requestCtx.getIf(CTX_PARAM_REQ_PASS_THR) as ExtConfig;\n        ctxPassthrough.$nspEnabled = false;\n        ctxPassthrough.shallowMerge(new Config(params), true);\n        //now we turn it on again\n        ctxPassthrough.$nspEnabled = true;\n        requestCtx.assignIf(!!event, CTX_PARAM_REQ_PASS_THR, P_EVT).value = event?.type;\n\n        /**\n         * ajax pass through context with the source\n         * onresolved Event and onerror Event\n         */\n        requestCtx.assign(SOURCE).value = elementId;\n\n        requestCtx.assign(VIEW_ID).value = viewId;\n\n        /**\n         * on resolvedEvent and onError...\n         * those values will be traversed later on\n         * also into the response context\n         */\n        requestCtx.assign(ON_EVENT).value = options.value?.onevent;\n        requestCtx.assign(ON_ERROR).value = options.value?.onerror;\n\n        /**\n         * Fetch the myfaces config params\n         */\n        requestCtx.assign(MYFACES).value = options.value?.myfaces;\n\n        /**\n         * binding contract the jakarta.faces.source must be set\n         */\n        requestCtx.assign(CTX_PARAM_REQ_PASS_THR, P_AJAX_SOURCE).value = elementId;\n\n        /**\n         * jakarta.faces.partial.ajax must be set to true\n         */\n        requestCtx.assign(CTX_PARAM_REQ_PASS_THR, P_AJAX).value = true;\n\n        /**\n         * if resetValues is set to true\n         * then we have to set jakarta.faces.resetValues as well\n         * as pass through parameter\n         * the value has to be explicitly true, according to\n         * the specs jsdoc\n         */\n        requestCtx.assignIf(isResetValues, CTX_PARAM_REQ_PASS_THR, P_RESET_VALUES).value = true;\n\n        // additional meta information to speed things up, note internal non jsf\n        // pass through options are stored under _mfInternal in the context\n        internalCtx.assign(CTX_PARAM_SRC_FRM_ID).value = formId;\n\n        // mojarra compatibility, mojarra is sending the form id as well\n        // this is not documented behavior but can be determined by running\n        // mojarra under blackbox conditions.\n        // I assume it does the same as our formId_submit=1 so leaving it out\n        // won't hurt but for the sake of compatibility we are going to add it\n        requestCtx.assign(CTX_PARAM_REQ_PASS_THR, formId).value = formId;\n        internalCtx.assign(CTX_PARAM_SRC_CTL_ID).value = elementId;\n        // reintroduction of PPS as per myfaces 2.3 (myfaces.pps = true, only the executes are submitted)\n        internalCtx.assign(CTX_PARAM_PPS).value = extractMyFacesParams(options.value)?.[MYFACES_OPTION_PPS] ?? false;\n\n\n        assignClientWindowId(form, requestCtx);\n        assignExecute(options, requestCtx, form, elementId);\n        assignRender(options, requestCtx, form, elementId);\n        assignNamingContainerData(internalCtx, form);\n\n        //now we enqueue the request as asynchronous runnable into our request\n        //queue and let the queue take over the rest\n        queueHandler.addRequestToQueue(elem, form, requestCtx, internalCtx, delay, timeout);\n    }\n\n    /**\n     * Spec. 13.3.3\n     * Examining the response markup and updating the DOM tree\n     * @param {XMLHttpRequest} request - the ajax request\n     * @param {Object} context - the ajax context\n     */\n    export function response(request: XMLHttpRequest, context: Context) {\n        Response.processResponse(request, context);\n    }\n\n    /**\n     * adds an error handler to the error queue\n     *\n     * @param errorListener the error listener handler\n     */\n    export function addOnError(errorListener: IListener<ErrorData>) {\n        errorQueue.push(errorListener);\n    }\n\n    /**\n     * adds an event handler to the event queue\n     *\n     * @param eventListener the event listener handler\n     */\n    export function addOnEvent(eventListener: IListener<EventData>) {\n        eventQueue.push(eventListener);\n    }\n\n    // noinspection JSUnusedLocalSymbols\n    /**\n     * sends an event to the event handlers\n     *\n     * @param data the event data object hosting the event data according to the spec @see EventData for what is reachable\n     * @param localHandler an optional event handler, which is processed before the event handler chain\n     */\n    export function sendEvent(data: EventData, localHandler = function (data: EventData) {\n    }) {\n        /*now we serve the queue as well*/\n        localHandler(data);\n        eventQueue.forEach(fn => fn(data));\n    }\n\n    /**\n     * error handler behavior called internally\n     * and only into the impl it takes care of the\n     * internal message transformation to a myfaces internal error\n     * and then uses the standard send error mechanisms\n     * also a double error logging prevention is done as well\n     *\n     * @param request the request currently being processed\n     * @param context the context affected by this error\n     * @param exception the exception being thrown\n     * @param clearRequestQueue if set to true, clears the request queue of all pending requests\n     */\n    export function stdErrorHandler(request: XMLHttpRequest,\n                                    context: Config,\n                                    exception: Error,\n                                    clearRequestQueue = false) {\n        //newer browsers do not allow to hold additional values on native objects like exceptions\n        //we hence capsule it into the request, which is gced automatically\n        //on ie as well, since the stdErrorHandler usually is called between requests\n        //this is a valid approach\n        try {\n            if (threshold == \"ERROR\") {\n                let errorData = ErrorData.fromClient(exception);\n                sendError(errorData);\n            }\n        } finally {\n            if (clearRequestQueue) {\n                requestQueue.clear();\n            }\n        }\n    }\n\n    // noinspection JSUnusedLocalSymbols\n    /**\n     * implementation triggering the error chain\n     *\n     *\n     *\n     *  handles the errors, in case of an onError exists within the context the onError is called as local error handler\n     *  the registered error handlers in the queue received an error message to be dealt with\n     *  and if the projectStage is at development an alert box is displayed\n     *\n     *  note: we have additional functionality here, via the global config myfaces.config.defaultErrorOutput a function can be provided\n     *  which changes the default output behavior from alert to something else\n     *\n     * @param errorData the error data to be displayed\n     * @param localHandler an optional local error handler which has to be processed before the error handler queue\n     */\n    export function sendError(errorData: ErrorData, localHandler = function (data: ErrorData) {\n    }) {\n\n        localHandler(errorData);\n        errorQueue.forEach((errorCallback: Function) => {\n            errorCallback(errorData);\n        });\n        let displayError: (string) => void = getGlobalConfig(\"defaultErrorOutput\", (console ? console.error : alert));\n        displayError(errorData);\n    }\n\n    /**\n     * @node optional element or id defining a rootnode where an element with the id \"jakarta.faces.windowId\" is hosted\n     * @return the client window id of the current window, if one is given if none is found, null is returned\n     */\n    export function getClientWindow(node ?: Element | string): string | null {\n        const ALTERED = \"___mf_id_altered__\";\n        const INIT = \"___init____\";\n\n        /*\n         * the search root for the dom element search\n         */\n\n\n        let searchRoot = ((node) ? DQ.byId(node): DQ$(\"form\"));\n        let inputs = searchRoot\n            .filterSelector(`input[name='${$nsp(P_CLIENT_WINDOW)}']`)\n            .orElseLazy(() => searchRoot.querySelectorAll(`input[name='${$nsp(P_CLIENT_WINDOW)}']`))\n\n        /*\n         * lazy helper to fetch the window id from the included faces.js\n         */\n        let fetchWindowIdFromJSFJS = () => ExtDomQuery.searchJsfJsFor(/jfwid=([^&;]*)/).orElse(null).value;\n\n        /*\n         * fetch window id from the url\n         */\n        let fetchWindowIdFromURL = function () {\n            const href = window.location.href, windowId = \"jfwid\";\n            const regex = new RegExp(\"[\\\\?&]\" + windowId + \"=([^&#\\\\;]*)\");\n            const results = regex.exec(href);\n            //initial trial over the url and a regexp\n            if (results != null) return results[1];\n            return null;\n        };\n\n        /*\n         * functional double check based on stream reduction\n         * the values should be identical or on INIT value which is a premise to\n         * skip the first check\n         *\n         * @param value1\n         * @param value2\n         */\n        let differenceCheck = (value1: string, value2: string): string => {\n            if(value1 == INIT) {\n                return value2;\n            } else if (value1 == ALTERED || value1 != value2) {\n                return ALTERED;\n            }\n            return value2;\n        };\n\n        /*\n         * helper for cleaner code, maps the value from an item\n         *\n         * @param item\n         */\n        let getValue = (item: DQ): string => item.val as string;\n        /*\n         * fetch the window id from the forms\n         * window ids must be present in all forms\n         * or non-existent. If they exist all of them must be the same\n         */\n\n        let formWindowId: string = inputs.asArray.map(getValue).reduce(differenceCheck, INIT);\n\n\n        //if the resulting window id is set on altered then we have an unresolvable problem\n        assert(ALTERED != formWindowId, \"Multiple different windowIds found in document\");\n\n        /*\n         * return the window id or null\n         */\n        return formWindowId != INIT ? formWindowId : (fetchWindowIdFromURL() || fetchWindowIdFromJSFJS());\n    }\n\n    /**\n     * collect and encode data for a given form element (must be of type form)\n     * find the jakarta.faces.ViewState element and encode its value as well!\n     * @return a concatenated string of the encoded values!\n     *\n     * @throws Error in case of the given element not being of type form!\n     * https://issues.apache.org/jira/browse/MYFACES-2110\n     */\n    export function getViewState(form: Element | string): string {\n        /**\n         *  type-check assert!, we opt for strong typing here\n         *  because it makes it easier to detect bugs\n         */\n\n        let element: DQ = DQ.byId(form, true);\n        if (!element.isTag(HTML_TAG_FORM)) {\n            throw new Error(getMessage(\"ERR_VIEWSTATE\"));\n        }\n\n        // determine the naming container scenario\n        const dummyContext = new Config({});\n        assignNamingContainerData(dummyContext, DQ.byId(form))\n        // fetch all non file input form elements\n        let formElements = element.deepElements.encodeFormElement()\n\n        // encode them! (file inputs are handled differently and are not part of the viewstate)\n        return encodeFormData(new ExtConfig(formElements), resoveNamingContainerMapper(dummyContext));\n    }\n\n    /**\n     * this at the first sight looks like a weird construct, but we need to do it this way\n     * for testing, we cannot proxy addRequestToQueue from the testing frameworks directly,\n     * but we need to keep it under unit tests.\n     */\n    export let queueHandler = {\n        /**\n         * public to make it accessible for tests\n         *\n         * adds a new request to our queue for further processing\n         */\n        addRequestToQueue: function (elem: DQ, form: DQ, reqCtx: ExtConfig, respPassThr: Config, delay = 0, timeout = 0) {\n            requestQueue = requestQueue ?? new XhrQueueController<XhrRequest>();\n            requestQueue.enqueue(new XhrRequest(reqCtx, respPassThr, timeout), delay);\n        }\n    };\n\n    //----------------------------------------------- Methods ---------------------------------------------------------------------\n\n    /**\n     * the idea is to replace some placeholder parameters with their respective values\n     * placeholder params like  @all, @none, @form, @this need to be replaced by\n     * the values defined by the specification\n     *\n     * This function does it for the render parameters\n     *\n     * @param requestOptions the source options coming in as options object from faces.ajax.request (options parameter)\n     * @param targetContext the receiving target context\n     * @param issuingForm the issuing form\n     * @param sourceElementId the executing element triggering the faces.ajax.request (id of it)\n     */\n    function assignRender(requestOptions: Config, targetContext: Config, issuingForm: DQ, sourceElementId: string) {\n        if (requestOptions.getIf(CTX_PARAM_RENDER).isPresent()) {\n            remapDefaultConstants(targetContext.getIf(CTX_PARAM_REQ_PASS_THR).get({}), P_RENDER, <string>requestOptions.getIf(CTX_PARAM_RENDER).value, issuingForm, <any>sourceElementId, targetContext.getIf(VIEW_ID).value);\n        }\n    }\n\n    /**\n     * the idea is to replace some placeholder parameters with their respective values\n     * placeholder params like  @all, @none, @form, @this need to be replaced by\n     * the values defined by the specification\n     *\n     * This function does it for the execute parameters\n     *\n     * @param requestOptions the source options coming in as options object from faces.ajax.request (options parameter)\n     * @param targetContext the receiving target context\n     * @param issuingForm the issuing form\n     * @param sourceElementId the executing element triggering the faces.ajax.request (id of it)\n     */\n    function assignExecute(requestOptions: Config, targetContext: Config, issuingForm: DQ, sourceElementId: string) {\n\n        if (requestOptions.getIf(CTX_OPTIONS_EXECUTE).isPresent()) {\n            /*the options must be a blank delimited list of strings*/\n            /*compliance with Mojarra which automatically adds @this to an execute\n             * the spec rev 2.0a however states, if none is issued nothing at all should be sent down\n             */\n            requestOptions.assign(CTX_OPTIONS_EXECUTE).value = [requestOptions.getIf(CTX_OPTIONS_EXECUTE).value, IDENT_THIS].join(\" \");\n            remapDefaultConstants(targetContext.getIf(CTX_PARAM_REQ_PASS_THR).get({}), P_EXECUTE, <string>requestOptions.getIf(CTX_OPTIONS_EXECUTE).value, issuingForm, <any>sourceElementId, targetContext.getIf(VIEW_ID).value);\n        } else {\n            targetContext.assign(CTX_PARAM_REQ_PASS_THR, P_EXECUTE).value = sourceElementId;\n        }\n    }\n\n    /**\n     * apply the browser tab where the request was originating from\n     *\n     * @param form the form hosting the client window id\n     * @param targetContext the target context receiving the value\n     */\n    function assignClientWindowId(form: DQ, targetContext: Config) {\n\n        let clientWindow = $faces().getClientWindow(form.getAsElem(0).value);\n        if (clientWindow) {\n            targetContext.assign(CTX_PARAM_REQ_PASS_THR, P_CLIENT_WINDOW).value = clientWindow;\n        }\n    }\n\n    /**\n     * determines the current naming container\n     * and assigns it internally\n     *\n     * @param internalContext\n     * @param formElement\n     * @private\n     */\n    function assignNamingContainerData(internalContext: Config, formElement: DQ) {\n        const viewRootId = resolveViewRootId(formElement);\n\n        if(!!viewRootId) {\n            internalContext.assign(NAMED_VIEWROOT).value = true;\n            internalContext.assign(NAMING_CONTAINER_ID).value = viewRootId;\n        }\n    }\n\n    /**\n     * transforms the user values to the expected one\n     * with the proper none all form and this handling\n     * (note we also could use a simple string replace, but then\n     * we would have had double entries under some circumstances)\n     *\n     * there are several standardized constants which need a special treatment\n     * like @all, @none, @form, @this\n     *\n     * @param targetConfig the target configuration receiving the final values\n     * @param targetKey the target key\n     * @param userValues the passed user values (aka input string which needs to be transformed)\n     * @param issuingForm the form where the issuing element originates\n     * @param issuingElementId the issuing element\n     * @param rootNamingContainerId the naming container id (\"\" default if none is given)\n     */\n    function remapDefaultConstants(targetConfig: Config, targetKey: string, userValues: string, issuingForm: DQ, issuingElementId: string, rootNamingContainerId: string = \"\"): Config {\n        //a cleaner implementation of the transform list method\n        const SEP = $faces().separatorchar;\n        let iterValues: string[] = (userValues) ? trim(userValues).split(/\\s+/gi) : [];\n        let ret = [];\n        let processed: {[key: string]: boolean} = {};\n\n        /**\n         * remaps the client ids for the portlet case so that the server\n         * can deal with them either prefixed ir not\n         * also resolves the absolute id case (it was assumed the server does this, but\n         * apparently the RI does not, so we have to follow the RI behavior here)\n         * @param componentIdToTransform the componentId which needs post-processing\n         */\n        const remapNamingContainer = componentIdToTransform => {\n            // pattern :<anything> must be prepended by viewRoot if there is one,\n            // otherwise we are in a not namespaced then only the id has to match\n            const rootNamingContainerPrefix = (rootNamingContainerId.length) ? rootNamingContainerId+SEP : EMPTY_STR;\n            let formClientId = issuingForm.id.value;\n            // nearest parent naming container relative to the form\n            const nearestNamingContainer = formClientId.substring(0, formClientId.lastIndexOf(SEP));\n            const nearestNamingContainerPrefix = (nearestNamingContainer.length) ? nearestNamingContainer + SEP : EMPTY_STR;\n            // Absolute search expressions, always start with SEP or the name of the root naming container\n            const hasLeadingSep = componentIdToTransform.indexOf(SEP) === 0;\n            const isAbsolutSearchExpr = hasLeadingSep || (rootNamingContainerId.length\n                && componentIdToTransform.indexOf(rootNamingContainerPrefix) == 0);\n            let finalIdentifier: string;\n            if (isAbsolutSearchExpr) {\n                //we cut off the leading sep if there is one\n                componentIdToTransform = hasLeadingSep ? componentIdToTransform.substring(1) : componentIdToTransform;\n                componentIdToTransform = componentIdToTransform.indexOf(rootNamingContainerPrefix) == 0 ? componentIdToTransform.substring(rootNamingContainerPrefix.length) : componentIdToTransform;\n                //now we prepend either the prefix or \"\" from the cut-off string to get the final result\n                finalIdentifier = [rootNamingContainerPrefix, componentIdToTransform].join(EMPTY_STR);\n            } else { //relative search according to the javadoc\n                //we cut off the root naming container id from the form\n                if (formClientId.indexOf(rootNamingContainerPrefix) == 0) {\n                    formClientId = formClientId.substring(rootNamingContainerPrefix.length);\n                }\n\n                //If prependId = true, the outer form id must be present in the id if same form\n                let hasPrependId = componentIdToTransform.indexOf(formClientId) == 0;\n                finalIdentifier = hasPrependId ?\n                    [rootNamingContainerPrefix, componentIdToTransform].join(EMPTY_STR) :\n                    [nearestNamingContainerPrefix,  componentIdToTransform].join(EMPTY_STR);\n            }\n            // We need to double-check because we have scenarios where we have a naming container\n            // and no prepend (aka tobago testcase \"must handle ':' in IDs properly\", scenario 3,\n            // in this case we return the component id, and be happy\n            // we can roll a dom check here\n            return (!!document.getElementById(finalIdentifier)) ? finalIdentifier : componentIdToTransform;\n        };\n\n        // in this case we do not use lazy stream because it wont bring any code reduction\n        // or speedup\n        for (let cnt = 0; cnt < iterValues.length; cnt++) {\n            //avoid doubles\n            if (iterValues[cnt] in processed) {\n                continue;\n            }\n            switch (iterValues[cnt]) {\n                //@none no values should be sent\n                case IDENT_NONE:\n                    return targetConfig.delete(targetKey);\n                //@all is a pass through case according to the spec\n                case IDENT_ALL:\n                    targetConfig.assign(targetKey).value = IDENT_ALL;\n                    return targetConfig;\n                //@form pushes the issuing form id into our list\n                case IDENT_FORM:\n                    ret.push(remapNamingContainer(issuingForm.id.value));\n                    processed[issuingForm.id.value] = true;\n                    break;\n                //@this is replaced with the current issuing element id\n                case IDENT_THIS:\n                    if (!(issuingElementId in processed)) {\n                        ret.push(remapNamingContainer(issuingElementId));\n                        processed[issuingElementId] = true;\n                    }\n                    break;\n                default:\n                    ret.push(remapNamingContainer(iterValues[cnt]));\n                    processed[iterValues[cnt]] = true;\n            }\n        }\n\n        targetConfig.assign(targetKey).value = ret.join(\" \");\n        return targetConfig;\n    }\n\n    /**\n     * Filter the options given with a blacklist, so that only\n     * the values required for params-through are processed in the ajax request\n     *\n     * Note this is a bug carried over from the old implementation\n     * the spec conform behavior is to use params for pass - through values\n     * this will be removed soon, after it is cleared up whether removing\n     * it breaks any legacy code\n     *\n     * @param {Context} mappedOpts the options to be filtered\n     */\n    function extractLegacyParams(mappedOpts: Options): {[key: string]: any} {\n        //we now can use the full code reduction given by our stream api\n        //to filter\n        return ofAssoc(mappedOpts)\n            .filter((item => !(item[0] in BlockFilter)))\n            .reduce(collectAssoc, {});\n    }\n\n    /**\n     * extracts the myfaces config parameters which provide extra functionality\n     * on top of JSF\n     * @param mappedOpts\n     * @private\n     */\n    function extractMyFacesParams(mappedOpts: Options): {[key: string]: any} {\n        //we now can use the full code reduction given by our stream api\n        //to filter\n        return ofAssoc(mappedOpts)\n            .filter((item => (item[0] == \"myfaces\")))\n            .reduce(collectAssoc, {})?.[MYFACES];\n    }\n\n    function remapArrayToAssocArr(arrayedParams: [[string, any]] | {[key: string]: any}): {[key: string]: any} {\n        if(Array.isArray(arrayedParams)) {\n            return arrayedParams.reduce(collectAssoc, {} as any);\n        }\n        return arrayedParams;\n    }\n\n    function resolveGlobalConfig(): any {\n        return  window?.[MYFACES]?.config ?? {};\n    }\n\n    /**\n     * Private helper to execute a function or code fragment\n     * @param source the source of the caller passed into the function as this\n     * @param event an event which needs to be passed down into the function\n     * @param func either a function or code fragment\n     * @return a boolean value, if the passed function returns false, then the\n     * caller is basically notified that the execution can now stop (JSF requirement for chain)\n     * @private\n     */\n    function resolveAndExecute(source: any, event: Event, func: Function | string): boolean {\n        if (\"string\" != typeof func) {\n            //function is passed down as chain parameter, can be executed as is\n            return (<Function>func).call(source, event) !== false;\n        } else {\n            //either a function or a string can be passed in case of a string we have to wrap it into another function\n            //it is not a plain executable code but a definition\n            let sourceCode = trim(<string>func);\n            if (sourceCode.indexOf(\"function \") == 0) {\n                sourceCode = `return ${sourceCode} (event)`;\n            }\n            return new Function(\"event\", sourceCode).call(source, event) !== false;\n        }\n    }\n}\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Typescript port of the faces\\.push part in the myfaces implementation\n */\nimport {MAX_RECONNECT_ATTEMPTS, REASON_EXPIRED, RECONNECT_INTERVAL} from \"./core/Const\";\nimport {DQ} from \"mona-dish\";\n\n/**\n * Implementation class for the push functionality\n */\nexport module PushImpl {\n\n    const URL_PROTOCOL = DQ.global().location.protocol.replace(\"http\", \"ws\") + \"//\";\n\n\n    // we expose the member variables for testing purposes\n    // they are not directly touched outside of tests\n\n    /* socket map by token */\n    export let sockets = {};\n    /* component attributes by clientId */\n    export let components = {};\n    /* client ids by token (share websocket connection) */\n    export let clientIdsByTokens = {};\n\n\n    // needed for testing\n    export function reset() {\n        sockets = {};\n        components = {}\n        clientIdsByTokens = {}\n    }\n\n    /*\n     * Api implementations, exposed functions\n     */\n\n    /**\n     * @param socketClientId the sockets client identifier\n     * @param url the uri to reach the socket\n     * @param channel the channel name/id\n     * @param onopen The function to be invoked when the web socket is opened.\n     * @param onmessage The function to be invoked when a message is received.\n     * @param onerror The function to be invoked when an error occurs.\n     * @param onclose The function to be invoked when the web socket is closed.\n     * @param behaviors functions which are invoked whenever a message is received\n     * @param autoConnect Whether or not to automatically open the socket. Defaults to <code>false</code>.\n     */\n    export function init(socketClientId: string,\n                         url: string,\n                         channel: string,\n                         onopen: Function,\n                         onmessage: Function,\n                         onerror: Function,\n                         onclose: Function,\n                         behaviors: any,\n                         autoConnect: boolean) {\n        onclose = resolveFunction(onclose);\n\n        if (!DQ.global().WebSocket) { // IE6-9.\n            onclose(-1, channel);\n            return;\n        }\n\n        let channelToken = url.substr(url.indexOf('?') + 1);\n\n        if (!components[socketClientId]) {\n            components[socketClientId] = {\n                'channelToken': channelToken,\n                'onopen': resolveFunction(onopen),\n                'onmessage' : resolveFunction(onmessage),\n                'onerror' : resolveFunction(onerror),\n                'onclose': onclose,\n                'behaviors': behaviors,\n                'autoconnect': autoConnect};\n            if (!clientIdsByTokens[channelToken]) {\n                clientIdsByTokens[channelToken] = [];\n            }\n            clientIdsByTokens[channelToken].push(socketClientId);\n            if (!sockets[channelToken]){\n                sockets[channelToken] = new Socket(channelToken,\n                    getBaseURL(url), channel);\n            }\n        }\n\n        if (autoConnect) {\n            (DQ.global()?.faces ?? DQ.global()?.jsf).push.open(socketClientId);\n        }\n    }\n\n    export function open(socketClientId: string) {\n        getSocket(components[socketClientId]?.channelToken).open();\n    }\n\n    export function close(socketClientId: string) {\n        getSocket(components[socketClientId].channelToken).close();\n    }\n\n    // Private helper classes\n    // Private classes functions ----------------------------------------------------------------------------------\n    /**\n     * Creates a reconnecting web socket. When the web socket successfully connects on first attempt, then it will\n     * automatically reconnect on timeout with cumulative intervals of 500ms with a maximum of 25 attempts (~3 minutes).\n     * The <code>onclose</code> function will be called with the error code of the last attempt.\n     * @constructor\n     * @param {string} channelToken the channel token associated with this websocket connection\n     * @param {string} url The URL of the web socket\n     * @param {string} channel The name of the web socket channel.\n     */\n\n    class Socket {\n\n        socket: WebSocket;\n        reconnectAttempts = 0;\n\n        constructor(private channelToken: string, private url: string, private channel: string) {\n        }\n\n        open() {\n            if (this.socket && this.socket.readyState == 1) {\n                return;\n            }\n            this.socket = new WebSocket(this.url);\n\n            this.bindCallbacks();\n        }\n\n        // noinspection JSUnusedLocalSymbols\n        onopen(event: any) {\n            if (!this.reconnectAttempts) {\n                let clientIds = clientIdsByTokens[this.channelToken];\n                for (let i = clientIds.length - 1; i >= 0; i--) {\n                    let socketClientId = clientIds[i];\n                    components[socketClientId]?.['onopen']?.(this.channel);\n                }\n            }\n            this.reconnectAttempts = 0;\n        }\n\n        onerror(event: any) {\n            let message = JSON.parse(event.data);\n            //TODO replace this with a more readable Stream code\n            for (let i = clientIdsByTokens[this.channelToken].length - 1; i >= 0; i--) {\n                let socketClientId = clientIdsByTokens[this.channelToken][i];\n                if (document.getElementById(socketClientId)) {\n                    try {\n                        components[socketClientId]?.['onerror']?.(message, this.channel, event);\n                    } catch (e) {\n                        //Ignore\n                    }\n                } else {\n                    clientIdsByTokens[this.channelToken].splice(i, 1);\n                }\n            }\n            if (clientIdsByTokens[this.channelToken].length == 0) {\n                // tag disappeared\n                this.close();\n            }\n        }\n\n        onmmessage(event: any) {\n            let message = JSON.parse(event.data);\n            for (let i = clientIdsByTokens[this.channelToken].length - 1; i >= 0; i--) {\n                let socketClientId = clientIdsByTokens[this.channelToken][i];\n                if (document.getElementById(socketClientId)) {\n                    try {\n                        components[socketClientId]?.['onmessage']?.(message, this.channel, event);\n                    } catch (e) {\n                        //Ignore\n                    }\n                    let behaviors = components?.[socketClientId]?.['behaviors'];\n                    let functions = behaviors?.[message];\n                    if (functions && functions.length) {\n                        for (let j = 0; j < functions.length; j++) {\n                            try {\n                                functions[j](null);\n                            } catch (e) {\n                                //Ignore\n                            }\n                        }\n                    }\n                } else {\n                    clientIdsByTokens[this.channelToken].splice(i, 1);\n                }\n            }\n            if (clientIdsByTokens[this.channelToken].length == 0) {\n                // tag disappeared\n                this.close();\n            }\n        }\n\n        onclose(event: any) {\n            if (!this.socket\n                || (event.code == 1000 && event.reason == REASON_EXPIRED)\n                || (event.code == 1008)\n                || (!this.reconnectAttempts)\n                || (this.reconnectAttempts >= MAX_RECONNECT_ATTEMPTS)) {\n                let clientIds = clientIdsByTokens[this.channelToken];\n                for (let i = clientIds.length - 1; i >= 0; i--) {\n                    let socketClientId = clientIds[i];\n                    components?.[socketClientId]?.['onclose']?.(event?.code, this?.channel, event);\n                }\n            } else {\n                setTimeout(this.open, RECONNECT_INTERVAL * this.reconnectAttempts++);\n            }\n        };\n\n        close() {\n            if (this.socket) {\n                let s = this.socket;\n                this.socket = null;\n                s.close();\n            }\n        }\n\n        /**\n         * bind the callbacks to the socket callbacks\n         */\n        private bindCallbacks() {\n            this.socket.onopen = (event: Event) => this.onopen(event);\n            this.socket.onmessage = (event: Event) => this.onmmessage(event);\n            this.socket.onclose = (event: Event) => this.onclose(event);\n            this.socket.onerror = (event: Event) => this.onerror(event);\n        }\n    }\n\n    // Private static functions ---------------------------------------------------------------------------------------\n\n    function getBaseURL(url: string) {\n        if (url.indexOf(\"://\") < 0) {\n            let base = DQ.global().location.hostname + \":\" + DQ.global().location.port;\n            return URL_PROTOCOL + base + url;\n        } else {\n            return url;\n        }\n    }\n\n    /**\n     * Get socket associated with given channelToken.\n     * @param channelToken The name of the web socket channelToken.\n     * @return Socket associated with given channelToken.\n     * @throws Error, when the channelToken is unknown, you may need to initialize\n     *                 it first via <code>init()</code> function.\n     */\n    function getSocket(channelToken: string): Socket {\n        let socket = sockets[channelToken];\n        if (socket) {\n            return socket;\n        } else {\n            throw new Error(\"Unknown channelToken: \" + channelToken);\n        }\n    }\n\n    function resolveFunction(fn: Function | string = () => {\n    }): Function {\n        return <Function>((typeof fn !== \"function\") && (fn = DQ.global()[fn]), fn);\n    }\n\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * [export const] constants\n */\n\nexport const XML_ATTR_NAMED_VIEWROOT = \"namedViewRoot\";\nexport const NAMED_VIEWROOT = \"namedViewRoot\";\n\nexport const P_AJAX_SOURCE = \"jakarta.faces.source\";\nexport const NAMING_CONTAINER_ID = \"myfaces.NamingContainerId\";\n\nexport const VIEW_ID = \"myfaces.viewId\";\nexport const P_VIEWSTATE = \"jakarta.faces.ViewState\";\nexport const P_CLIENT_WINDOW = \"jakarta.faces.ClientWindow\";\nexport const P_VIEWROOT = \"jakarta.faces.ViewRoot\";\nexport const P_VIEWHEAD = \"jakarta.faces.ViewHead\";\nexport const P_VIEWBODY = \"jakarta.faces.ViewBody\";\n\nexport const P_RESOURCE = \"jakarta.faces.Resource\";\n\n/*some useful definitions*/\n\nexport const EMPTY_FUNC = Object.freeze(() => {\n});\nexport const EMPTY_STR = \"\";\nexport const EMPTY_MAP = Object.freeze({});\n\nexport const HTML_VIEWSTATE = [\"<input type='hidden'\", \"name='\", P_VIEWSTATE, \"' value='' />\"].join(EMPTY_STR);\nexport const HTML_CLIENT_WINDOW = [\"<input type='hidden'\", \"' name='\", P_CLIENT_WINDOW, \"' value='' />\"].join(EMPTY_STR);\n\n\n/*internal identifiers for options*/\nexport const IDENT_ALL = \"@all\";\nexport const IDENT_NONE = \"@none\";\nexport const IDENT_THIS = \"@this\";\nexport const IDENT_FORM = \"@form\";\n\n\nexport const P_AJAX = \"jakarta.faces.partial.ajax\";\nexport const P_EXECUTE = \"jakarta.faces.partial.execute\";\nexport const P_RENDER = \"jakarta.faces.partial.render\";\n/*render override for viewbody or viewroot, in both cases an all is performed*/\nexport const P_RENDER_OVERRIDE = \"_myfaces.rendeOverride\";\nexport const P_EVT = \"jakarta.faces.partial.event\";\n\nexport const P_RESET_VALUES = \"jakarta.faces.partial.resetValues\";\nexport const P_WINDOW_ID = \"jakarta.faces.windowId\";\n\nexport const P_BEHAVIOR_EVENT = \"jakarta.faces.behavior.event\";\n\nexport const CTX_PARAM_RENDER = \"render\";\nexport const WINDOW_ID = \"windowId\";\n\n/* message types */\nexport const ERROR = \"error\";\nexport const EVENT = \"event\";\n\nexport const ON_ERROR = \"onerror\";\nexport const ON_EVENT = \"onevent\";\n\n/* event emitting stages */\nexport const BEGIN = \"begin\";\nexport const COMPLETE = \"complete\";\nexport const SUCCESS = \"success\";\n\nexport const SOURCE = \"source\";\nexport const STATUS = \"status\";\n\n\nexport const ERROR_NAME = \"error-name\";\nexport const ERROR_MESSAGE = \"error-message\";\n\n\nexport const RESPONSE_TEXT = \"responseText\";\nexport const RESPONSE_XML = \"responseXML\";\n\n/*ajax errors spec 14.4.2*/\nexport const HTTPERROR = \"httpError\";\nexport const EMPTY_RESPONSE = \"emptyResponse\";\nexport const MALFORMEDXML = \"malformedXML\";\nexport const SERVER_ERROR = \"serverError\";\nexport const CLIENT_ERROR = \"clientError\";\nexport const TIMEOUT_EVENT = \"timeout\";\n\nexport const CTX_OPTIONS_PARAMS = \"params\";\nexport const CTX_OPTIONS_DELAY = \"delay\";\nexport const DELAY_NONE = 'none';\nexport const CTX_OPTIONS_TIMEOUT = \"timeout\";\nexport const CTX_OPTIONS_RESET = \"resetValues\";\nexport const CTX_OPTIONS_EXECUTE = \"execute\";\n\nexport const CTX_PARAM_MF_INTERNAL = \"myfaces.internal\";\nexport const CTX_PARAM_SRC_FRM_ID = \"myfaces.source.formId\";\nexport const CTX_PARAM_SRC_CTL_ID = \"myfaces.source.controlId\";\nexport const CTX_PARAM_REQ_PASS_THR = \"myfaces.request.passThrough\";\nexport const CTX_PARAM_PPS = \"myfaces.request.pps\";\n\nexport const CONTENT_TYPE = \"Content-Type\";\nexport const HEAD_FACES_REQ = \"Faces-Request\";\nexport const REQ_ACCEPT = \"Accept\";\nexport const VAL_AJAX = \"partial/ajax\";\nexport const ENCODED_URL = \"jakarta.faces.encodedURL\";\nexport const REQ_TYPE_GET = \"GET\";\nexport const REQ_TYPE_POST = \"POST\";\nexport const STATE_EVT_BEGIN = \"begin\"; //TODO remove this\nexport const STATE_EVT_TIMEOUT = \"TIMEOUT_EVENT\";\nexport const STATE_EVT_COMPLETE = \"complete\"; //TODO remove this\nexport const URL_ENCODED = \"application/x-www-form-urlencoded\";\nexport const MULTIPART = \"multipart/form-data\";\nexport const NO_TIMEOUT = 0;\nexport const STD_ACCEPT = \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\";\n\nexport const HTML_TAG_HEAD = \"HEAD\";\nexport const HTML_TAG_FORM = \"FORM\";\nexport const HTML_TAG_BODY = \"BODY\";\nexport const HTML_TAG_LINK = \"LINK\";\nexport const HTML_TAG_SCRIPT = \"SCRIPT\";\nexport const HTML_TAG_STYLE = \"STYLE\";\n\n\nexport const SEL_VIEWSTATE_ELEM = \"[name='\" + P_VIEWSTATE + \"']\";\nexport const SEL_CLIENT_WINDOW_ELEM = \"[name='\" + P_CLIENT_WINDOW + \"']\";\nexport const SEL_RESPONSE_XML = \"responseXML\";\n\nexport const PHASE_PROCESS_RESPONSE = \"processResponse\";\n\n\nexport const ERR_NO_PARTIAL_RESPONSE = \"Partial response not set\";\n\nexport const MYFACES_OPTION_PPS = \"pps\";\n\nexport const ATTR_URL = \"url\";\nexport const ATTR_NAME = \"name\";\nexport const ATTR_VALUE = \"value\";\nexport const ATTR_ID = \"id\";\n\n/*partial response types*/\nexport const XML_TAG_PARTIAL_RESP = \"partial-response\";\n\n/*partial commands*/\nexport const XML_TAG_CHANGES = \"changes\";\nexport const XML_TAG_UPDATE = \"update\";\nexport const XML_TAG_DELETE = \"delete\";\nexport const XML_TAG_INSERT = \"insert\";\nexport const XML_TAG_EVAL = \"eval\";\nexport const XML_TAG_ERROR = \"error\";\nexport const XML_TAG_ATTRIBUTES = \"attributes\";\nexport const XML_TAG_EXTENSION = \"extension\";\nexport const XML_TAG_REDIRECT = \"redirect\";\nexport const XML_TAG_BEFORE = \"before\";\nexport const XML_TAG_AFTER = \"after\";\nexport const XML_TAG_ATTR = \"attribute\";\n\n\n/*other constants*/\n\nexport const UPDATE_FORMS = \"myfaces.updateForms\";\nexport const UPDATE_ELEMS = \"myfaces.updateElems\";\n\n//we want the head elements to be processed before we process the body\n//but after the inner html is done\nexport const DEFERRED_HEAD_INSERTS = \"myfaces.headElems\";\n\nexport const MYFACES = \"myfaces\";\n\nexport const MF_NONE = \"__mf_none__\";\n\nexport const REASON_EXPIRED = \"Expired\";\n\nexport const APPLIED_VST = \"myfaces.appliedViewState\";\nexport const APPLIED_CLIENT_WINDOW = \"myfaces.appliedClientWindow\";\n\nexport const RECONNECT_INTERVAL = 500;\nexport const MAX_RECONNECT_ATTEMPTS = 25;\n\nexport const UNKNOWN = \"UNKNOWN\";\n\n/**\n * helper to remap the namespaces variables for 2.3\n * from 2.3 to 4.0 every javax namespace has been changed\n * to faces\n * To take the compatibility layer out this method just has to be\n * changed to a simple value passthrough\n */\n\nexport function $faces(): FacesAPI {\n     return (window?.faces ?? window?.jsf) as FacesAPI;\n}\n\nexport function $nsp(inputNamespace?: any): any {\n     if((!inputNamespace) || !inputNamespace?.replace) {\n          return inputNamespace;\n     }\n     return (!!window?.faces) ? inputNamespace.replace(/javax\\.faces/gi,\"jakarta.faces\"): inputNamespace.replace(/jakarta\\.faces/gi, \"javax.faces\");\n}\n\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {EMPTY_STR, P_VIEWSTATE} from \"./Const\";\n\nexport interface IdValueHolder {\n\n    readonly id: string;\n    readonly value: string;\n\n}\n\n/**\n * a helper class to isolate the\n * view state and client window and other\n * future states which follow a similar pattern\n */\nexport class StateHolder implements IdValueHolder {\n\n    nameSpace: string;\n\n    constructor(public id: string, public value: string) {\n        let viewStatePos = id.indexOf(P_VIEWSTATE);\n        this.nameSpace = viewStatePos > 0 ? id.substr(0, viewStatePos - 1) : EMPTY_STR;\n    }\n\n    get hasNameSpace(): boolean {\n        return !!(this?.nameSpace ?? EMPTY_STR).length;\n    }\n}\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Messages {\n    MSG_TEST = \"Testmessage\";\n\n    /*Messages*/\n    /** @constant */\n    MSG_DEV_MODE = \"Note, this message is only sent, because project stage is development and no \" +\n        \"other error listeners are registered.\";\n    /** @constant */\n    MSG_AFFECTED_CLASS = \"Affected Class=\";\n    /** @constant */\n    MSG_AFFECTED_METHOD = \"Affected Method=\";\n    /** @constant */\n    MSG_ERROR_NAME = \"Error Name=\";\n    /** @constant */\n    MSG_ERROR_MESSAGE = \"Error Message=\";\n    /** @constant */\n    MSG_SERVER_ERROR_NAME = \"Server Error Name=\";\n\n    /** @constant */\n    MSG_ERROR_DESC = \"Error Description=\";\n    /** @constant */\n    MSG_ERROR_NO = \"Error Number=\";\n    /** @constant */\n    MSG_ERROR_LINENO = \"Error Line Number=\";\n\n    /*Errors and messages*/\n    /** @constant */\n    ERR_FORM = \"Sourceform could not be determined, either because element is not attached to a form or we have multiple forms with named elements of the same identifier or name, stopping the ajax processing\";\n    /** @constant */\n    ERR_VIEWSTATE = \"faces.viewState= param value not of type form!\";\n    /** @constant */\n    ERR_TRANSPORT = \"Transport type {0} does not exist\";\n    /** @constant */\n    ERR_EVT_PASS = \"an event must be passed down (either a an event object null or undefined) \";\n    /** @constant */\n    ERR_CONSTRUCT = \"Parts of the response couldn't be retrieved when constructing the event data= {0} \";\n    /** @constant */\n    ERR_MALFORMEDXML = \"The server response could not be parsed, the server has returned with a response which is not xml !\";\n    /** @constant */\n    ERR_SOURCE_FUNC = \"source cannot be a function (probably source and event were not defined or set to null\";\n    /** @constant */\n    ERR_EV_OR_UNKNOWN = \"An event object or unknown must be passed as second parameter\";\n    /** @constant */\n    ERR_SOURCE_NOSTR = \"source cannot be a string\";\n    /** @constant */\n    ERR_SOURCE_DEF_NULL = \"source must be defined or null\";\n\n    //_Lang.js\n    /** @constant */\n    ERR_MUST_STRING = \"{0}: {1} namespace must be of type String\";\n    /** @constant */\n    ERR_REF_OR_ID = \"{0}: {1} a reference node or identifier must be provided\";\n    /** @constant */\n    ERR_PARAM_GENERIC = \"{0}: parameter {1} must be of type {2}\";\n    /** @constant */\n    ERR_PARAM_STR = \"{0}: {1} param must be of type string\";\n    /** @constant */\n    ERR_PARAM_STR_RE = \"{0}: {1} param must be of type string or a regular expression\";\n    /** @constant */\n    ERR_PARAM_MIXMAPS = \"{0}: both a source as well as a destination map must be provided\";\n    /** @constant */\n    ERR_MUST_BE_PROVIDED = \"{0}: an {1} and a {2} must be provided\";\n    /** @constant */\n    ERR_MUST_BE_PROVIDED1 = \"{0}: {1} must be set\";\n\n    /** @constant */\n    ERR_REPLACE_EL = \"replaceElements called while evalNodes is not an array\";\n\n    /** @constant */\n    ERR_EMPTY_RESPONSE = \"{0}: The response cannot be null or empty!\";\n    /** @constant */\n    ERR_ITEM_ID_NOTFOUND = \"{0}: item with identifier {1} could not be found\";\n    /** @constant */\n    ERR_PPR_IDREQ = \"{0}: Error in PPR Insert, id must be present\";\n    /** @constant */\n    ERR_PPR_INSERTBEFID = \"{0}: Error in PPR Insert, before id or after id must be present\";\n    /** @constant */\n    ERR_PPR_INSERTBEFID_1 = \"{0}: Error in PPR Insert, before  node of id {1} does not exist in document\";\n    /** @constant */\n    ERR_PPR_INSERTBEFID_2 = \"{0}: Error in PPR Insert, after  node of id {1} does not exist in document\";\n\n    /** @constant */\n    ERR_PPR_DELID = \"{0}: Error in delete, id not in xml markup\";\n    /** @constant */\n    ERR_PPR_UNKNOWNCID = \"{0}:  Unknown Html-Component-ID= {1}\";\n\n    /** @constant */\n    ERR_NO_VIEWROOTATTR = \"{0}: Changing of ViewRoot attributes is not supported\";\n    /** @constant */\n    ERR_NO_HEADATTR = \"{0}: Changing of Head attributes is not supported\";\n    /** @constant */\n    ERR_RED_URL = \"{0}: Redirect without url\";\n\n    /** @constant */\n    ERR_REQ_FAILED_UNKNOWN = \"Request failed with unknown status\";\n\n    /** @constant */\n    ERR_REQU_FAILED = \"Request failed with status {0} and reason {1}\";\n\n    /** @constant */\n    UNKNOWN = \"UNKNOWN\";\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Config, Lang, XMLQuery} from \"mona-dish\";\n\nimport {DQ} from \"mona-dish\";\nimport {\n    ATTR_URL,\n    EMPTY_RESPONSE,\n    EMPTY_STR, ERR_NO_PARTIAL_RESPONSE, MALFORMEDXML,\n    ON_ERROR,\n    ON_EVENT,\n    PHASE_PROCESS_RESPONSE,\n    XML_TAG_PARTIAL_RESP\n} from \"../core/Const\";\nimport {ExtLang} from \"./Lang\";\n\n\n/**\n * a set of internal code assertions\n * which raise an error\n *\n */\nexport module Assertions {\n\n\n\n    export function assertRequestIntegrity(options: Config, elem: DQ): void | never {\n        /*assert if the onerror is set and once if it is set it must be of type function*/\n        assertFunction(options.getIf(ON_ERROR).value);\n        /*assert if the onevent is set and once if it is set it must be of type function*/\n        assertFunction(options.getIf(ON_EVENT).value);\n        //improve the error messages if an empty elem is passed\n        //Assertions.assertElementExists(elem);\n        assert(elem.isPresent(), ExtLang.getMessage(\"ERR_MUST_BE_PROVIDED1\", \"{0}: source  must be provided or exist\", \"source element id\"), \"faces.ajax.request\", \"ArgNotSet\",  )\n    }\n\n    export function assertUrlExists(node: XMLQuery): void | never {\n        if (node.attr(ATTR_URL).isAbsent()) {\n            throw Assertions.raiseError(new Error(), ExtLang.getMessage(\"ERR_RED_URL\", null, \"processRedirect\"), \"processRedirect\");\n        }\n    }\n\n    /**\n     * checks the xml for various issues which can occur\n     * and prevent a proper processing\n     */\n    export function assertValidXMLResponse(responseXML: XMLQuery) : void | never  {\n        assert(!responseXML.isAbsent(), EMPTY_RESPONSE, PHASE_PROCESS_RESPONSE);\n        assert(!responseXML.isXMLParserError(),  responseXML.parserErrorText(EMPTY_STR), PHASE_PROCESS_RESPONSE);\n        assert(responseXML.querySelectorAll(XML_TAG_PARTIAL_RESP).isPresent(), ERR_NO_PARTIAL_RESPONSE, PHASE_PROCESS_RESPONSE);\n    }\n\n    /**\n     * internal helper which raises an error in the\n     * format we need for further processing\n     *\n     * @param error\n     * @param message the message\n     * @param caller\n     * @param title the title of the error (optional)\n     * @param name the name of the error (optional)\n     */\n    export function raiseError(error: any, message: string, caller ?: string, title ?: string, name ?: string): Error {\n\n        let finalTitle = title ?? MALFORMEDXML;\n        let finalName = name ?? MALFORMEDXML;\n        let finalMessage = message ?? EMPTY_STR;\n\n        //TODO clean up the messy makeException, this is a perfect case for encapsulation and sane defaults\n        return ExtLang.makeException(error, finalTitle, finalName, \"Response\", caller || (((<any>arguments).caller) ? (<any>arguments).caller.toString() : \"_raiseError\"), finalMessage);\n    }\n\n    /*\n     * using the new typescript 3.7 compiler assertion functionality to improve compiler hinting\n     * we are not fully there yet, but soon\n     */\n\n    export function assert(value: any, msg = EMPTY_STR, caller=EMPTY_STR, title=\"Assertion Error\"): asserts value {\n        if(!value) {\n            throw Assertions.raiseError(new Error(), msg ,caller, title);\n        }\n    }\n\n\n    export function assertType(value: any, theType: any, msg = EMPTY_STR, caller=EMPTY_STR, title=\"Type Assertion Error\"): asserts value {\n        if((!!value) && !Lang.assertType(value,theType)) {\n            throw Assertions.raiseError(new Error(), msg ,caller, title);\n        }\n    }\n\n    export function assertFunction(value: any, msg = EMPTY_STR, caller=EMPTY_STR, title=\"Assertion Error\"): asserts value is Function {\n        assertType(value, \"function\", msg, caller, title);\n    }\n\n    export function assertDelay(value: any) {\n        if(!(value >= 0)) { // >= 0 abbreviation which covers all cases of non positive values,\n            // including NaN and non numeric strings, no type equality is deliberate here,\n            throw new Error(\"Invalid delay value: \" + value);\n        }\n    }\n}\n\n\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Asynchronous queue member for our asynchronous queue\n * Ever object in the asynchronous queue needs to implement this interface\n *\n * the usage should be similar as Promise. from the outside.\n * but with a dedicated start point. The problem why we cannot use\n * promises here, is mostly related to the needed cancel functionality\n * and that the queue expects a runnable as entry.\n *\n * from the implementation side it is mostly registering callbacks\n * and calling them at the appropriate time.\n */\nexport interface IAsyncRunnable<T> {\n    /**\n     * starts the runnable\n     */\n    start();\n\n    /**\n     * cancel the current ongoing op if possible\n     */\n    cancel();\n\n    /**\n     * callback for then functionality\n     * triggered when the async run is complete\n     *\n     * the async runnable must register the passed function\n     * and then triggers all the registered then functions\n     * when it is complete\n     *\n     * @param func the then functor\n     */\n    then(func: (data: any) => any): IAsyncRunnable<T>;\n\n    /**\n     * callback for catch functionality\n     * triggered when the async run is complete\n     *\n     * the async runnable must register the passed function\n     * and then triggers all the registered catch handlers\n     * when an error has occurred\n     *\n     * @param func\n     */\n    catch(func: (data: any) => any): IAsyncRunnable<T>;\n\n\n    /**\n     * finally called when all then and catches are performed\n     * same this is a register function\n     * and once the finally time for the promise has\n     * come the finally functions must be performed\n     */\n    finally(func: () => void): IAsyncRunnable<T>;\n}\n\n\n/**\n * pretty much the same as cancellable Promise, but given\n * we do not have that on browser level yet this is sort\n * of a non - intrusive Shim!\n */\nexport abstract class AsyncRunnable<T> implements IAsyncRunnable<T>{\n    /**\n     * helper support so that we do not have to drag in Promise shims\n     */\n    private catchFunctions: Array<Function> = [];\n    private thenFunctions: Array<Function> = [];\n\n    /**\n     * cancel the run of the runnable (which then depending on the implementation\n     * either triggers indirectly resolve or reject)\n     */\n    abstract cancel(): void;\n\n    /**\n     * extended functionality start to trigger the runnable\n     */\n    abstract start(): void;\n\n    /**\n     * resolve handler function which calls the then chain\n     * and after that finally\n     * @param data\n     */\n    resolve(data: any) {\n        this.thenFunctions.reduce((inputVal: any, thenFunc: any) => {\n            return thenFunc(inputVal);\n        }, data)\n    }\n\n    /**\n     * reject handler function which triggers the catch chain\n     * @param data\n     */\n    reject(data: any) {\n        this.catchFunctions.reduce((inputVal: any, catchFunc: any) => {\n            return catchFunc(inputVal);\n        }, data);\n    }\n\n    /**\n     * register a catch functor\n     * @param func the functor for the catch monad\n     */\n    catch(func: (data: any) => any): IAsyncRunnable<T> {\n        this.catchFunctions.push(func);\n        return this;\n    }\n\n    /**\n     * registers a finally functor\n     * @param func the functor for the finally handling chanin\n     */\n    finally(func: () => void): IAsyncRunnable<T> {\n        // no ie11 support we probably are going to revert to shims for that one\n        this.catchFunctions.push(func);\n        this.thenFunctions.push(func);\n        return this;\n    }\n\n    /**\n     * @param func then functor similar to promise\n     */\n    then(func: (data: any) => any): IAsyncRunnable<T> {\n        this.thenFunctions.push(func);\n        return this;\n    }\n}\n\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Config, IValueHolder, Optional, DomQuery, DQ, Es2019Array} from \"mona-dish\";\nimport {$nsp, P_WINDOW_ID} from \"../core/Const\";\n\n\n/**\n * detects whether a source is a faces.js request\n *\n * @param source the source string for the faces.js request\n * @return true if a faces.js loading pattern is detected\n * @constructor\n */\nconst IS_FACES_SOURCE = (source?: string): boolean => {\n    //spec version smaller 4 we have to deal with the jsf namespace\n\n    return source && !!(source?.search(/\\/jakarta\\.faces\\.resource.*\\/faces\\.js.*/) != -1 ||\n        source?.search(/\\/faces-development\\.js.*/) != -1 ||\n        source?.search(/\\/faces-uncompressed\\.js.*/) != -1 ||\n        source?.search(/\\/faces[^.]*\\.js.*ln=jakarta.faces.*/gi) != -1 ||\n        //fallback without check for jsf, that way we allow both bookmarks\n        source?.search(/\\/javax\\.faces\\.resource.*\\/jsf\\.js.*/) != -1 ||\n            source?.search(/\\/jsf-development\\.js.*/) != -1 ||\n            source?.search(/\\/jsf-uncompressed\\.js.*/) != -1 ||\n            source?.search(/\\/jsf[^.]*\\.js.*ln=javax.faces.*/gi) != -1);\n}\n\n/**\n * namespace myfaces\\.testscripts can be used as extension point for internal\n * tests, those will be handled similarly to faces.js, in regard\n * to reload blocking on ajax requests\n *\n * Note: atm not used, used to be used in the old implementation\n * but still is reserved for now\n *\n * @param source the source to check\n * @constructor\n */\nconst IS_INTERNAL_SOURCE = (source: string): boolean => {\n    return source.search(/\\/faces[^.]*\\.js.*ln=myfaces.testscripts.*/gi) != -1 || source.search(/\\/jsf[^.]*\\.js.*ln=myfaces.testscripts.*/gi) != -1;\n}\n\n\nconst ATTR_SRC = 'src';\n\n/**\n * Extension which adds implementation specific\n * meta-data to our dom query\n *\n * Usage\n * el = new ExtDQ(oldReference)\n * nonce = el.nonce\n * windowId = el.getWindowId\n */\nexport class ExtDomQuery extends DQ {\n\n    static get windowId() {\n        return new ExtDomQuery(document.body).windowId;\n    }\n\n    static get nonce(): string {\n        return new ExtDomQuery(document.body).nonce;\n    }\n\n    get windowId(): string | null {\n\n        const fetchWindowIdFromURL = function (): string | null {\n            let href = window.location.href;\n            let windowId = \"windowId\";\n            let regex = new RegExp(\"[\\\\?&]\" + windowId + \"=([^&#\\\\;]*)\");\n            let results = regex.exec(href);\n            //initial trial over the url and a regexp\n            if (results != null) return results[1];\n            return null;\n        };\n\n        //byId ($)\n        if (this.value.isPresent()) {\n            let result = this.querySelectorAll(\"form input[name='\" + P_WINDOW_ID + \"']\");\n            if (result.length > 1) {\n                throw Error(\"Multiple different windowIds found in document\");\n            }\n\n            return (result.isPresent()) ? (<HTMLInputElement>result.getAsElem(0).value).value : fetchWindowIdFromURL();\n        } else {\n            return fetchWindowIdFromURL();\n        }\n    }\n\n    /*\n    * determines the faces.js nonce and adds them to the namespace\n    * this is done once and only lazily\n    */\n    get nonce(): string | null {\n        //already processed\n        let myfacesConfig = new ExtConfig(window.myfaces);\n        let nonce: IValueHolder<string> = myfacesConfig.getIf(\"config\", \"cspMeta\", \"nonce\");\n        if (nonce.value) {\n            return <string>nonce.value;\n        }\n\n        let curScript = new DQ(document.currentScript);\n        //since our baseline atm is ie11 we cannot use document.currentScript globally\n        if (!!this.extractNonce(curScript)) {\n            // fast-path for modern browsers\n            return this.extractNonce(curScript);\n        }\n        // fallback if the currentScript method fails, we just search the jsf tags for nonce, this is\n        // the last possibility\n        let nonceScript = Optional.fromNullable(DQ\n            .querySelectorAll(\"script[src], link[src]\").asArray\n            .filter((item) => this.extractNonce(item)  && item.attr(ATTR_SRC) != null)\n            .filter(item => IS_FACES_SOURCE(item.attr(ATTR_SRC).value))?.[0]);\n\n        if (nonceScript.isPresent()) {\n            return this.extractNonce(nonceScript.value);\n        }\n        return null;\n    }\n\n    static searchJsfJsFor(item: RegExp): Optional<String> {\n        return new ExtDomQuery(document).searchJsfJsFor(item);\n    }\n\n    /**\n     * searches the embedded faces.js for items like separator char etc.\n     * expects a match as variable under position 1 in the result match\n     * @param regExp\n     */\n    searchJsfJsFor(regExp: RegExp): Optional<string> {\n        //perfect application for lazy stream\n        return Optional.fromNullable(DQ.querySelectorAll(\"script[src], link[src]\").asArray\n            .filter(item => IS_FACES_SOURCE(item.attr(ATTR_SRC).value))\n            .map(item => item.attr(ATTR_SRC).value.match(regExp))\n            .filter(item => item != null && item.length > 1)\n            .map((result: string[]) => {\n                return decodeURIComponent(result[1]);\n            })?.[0]);\n    }\n\n    globalEval(code: string, nonce ?: string): DQ {\n        return new ExtDomQuery(super.globalEval(code, nonce ?? this.nonce));\n    }\n\n    // called from base class runScripts, do not delete\n    // noinspection JSUnusedGlobalSymbols\n    globalEvalSticky(code: string, nonce ?: string): DQ {\n        return new ExtDomQuery(super.globalEvalSticky(code, nonce ?? this.nonce));\n    }\n\n    /**\n     * decorated run scripts which takes our jsf extensions into consideration\n     * (standard DomQuery will let you pass anything)\n     * @param sticky if set to true the internally generated element for the script is left in the dom\n     * @param whiteListed\n     */\n    runScripts(sticky = false, whiteListed?: (src: string) => boolean): DomQuery {\n        const whitelistFunc = (src: string): boolean => {\n            return (whiteListed?.(src) ?? true) && !IS_FACES_SOURCE(src) && !IS_INTERNAL_SOURCE(src);\n        };\n        return super.runScripts(sticky, whitelistFunc);\n    }\n\n    /**\n     * adds the elements in this ExtDomQuery to the head\n     *\n     * @param suppressDoubleIncludes checks for existing elements in the head before running the insert\n     */\n    runHeadInserts(suppressDoubleIncludes = true): void {\n        let head = ExtDomQuery.byId(document.head);\n        //automated nonce handling\n        let processedScripts = [];\n\n        // the idea is only to run head inserts on resources\n        // which do not exist already, that way\n        // we can avoid double includes on subsequent resource\n        // requests.\n        function resourceIsNew(element: DomQuery) {\n            if(!suppressDoubleIncludes) {\n                return true;\n            }\n            const tagName = element.tagName.value;\n            if(!tagName) {\n                // text node they do not have tag names, so we can process them as they are without\n                // any further ado\n                return true;\n            }\n            let reference = element.attr(\"href\")\n                .orElseLazy(() => element.attr(\"src\").value)\n                .orElseLazy(() => element.attr(\"rel\").value);\n\n            if (!reference.isPresent()) {\n                return true;\n            }\n            return !head.querySelectorAll(`${tagName}[href='${reference.value}']`).length &&\n                !head.querySelectorAll(`${tagName}[src='${reference.value}']`).length &&\n                !head.querySelectorAll(`${tagName}[rel='${reference.value}']`).length;\n        }\n\n        this\n            .filter(resourceIsNew)\n            .each(element => {\n                if(element.tagName.value != \"SCRIPT\") {\n                    //we need to run runScripts properly to deal with the rest\n                    new ExtDomQuery(...processedScripts).runScripts(true);\n                    processedScripts = [];\n                    head.append(element);\n                } else {\n                    processedScripts.push(element);\n                }\n            });\n        new ExtDomQuery(...processedScripts).runScripts(true);\n    }\n\n\n    /**\n     * byId producer\n     *\n     * @param selector id\n     * @param deep whether the search should go into embedded shadow dom elements\n     * @return a DomQuery containing the found elements\n     */\n    static byId(selector: string | DomQuery | Element, deep = false): ExtDomQuery {\n        const ret = DomQuery.byId(selector, deep);\n        return new ExtDomQuery(ret);\n    }\n\n    private extractNonce(curScript: DomQuery) {\n        return (curScript.getAsElem(0).value as HTMLElement)?.nonce ?? curScript.attr(\"nonce\").value;\n    }\n\n    filter(func: (item: DomQuery) => boolean): ExtDomQuery {\n        return new ExtDomQuery(super.filter(func));\n    }\n}\n\nexport const ExtDQ = ExtDomQuery;\n\n/**\n * in order to reduce the number of interception points for the fallbacks we add\n * the namespace remapping straight to our config accessors\n */\nexport class ExtConfig extends  Config {\n\n    $nspEnabled = true;\n\n    constructor(root: any) {\n        super(root);\n    }\n\n    assignIf(condition: boolean, ...accessPath): IValueHolder<any> {\n        const accessPathMapped = this.remap(accessPath);\n        return super.assignIf(condition, ...accessPathMapped);\n    }\n\n    assign(...accessPath): IValueHolder<any> {\n        const accessPathMapped = this.remap(accessPath);\n        return super.assign(...accessPathMapped);\n    }\n\n    append(...accessPath): IValueHolder<any> {\n        return super.append(...accessPath);\n    }\n\n    appendIf(condition: boolean, ...accessPath): IValueHolder<any> {\n        const accessPathMapped = this.remap(accessPath);\n        return super.appendIf(condition, ...accessPathMapped);\n    }\n\n    getIf(...accessPath): Config {\n        const accessPathMapped = this.remap(accessPath);\n        return super.getIf(...accessPathMapped);\n    }\n\n    get(defaultVal: any): Config {\n        return super.get($nsp(defaultVal));\n    }\n\n    delete(key: string): Config {\n        return super.delete($nsp(key));\n    }\n\n    /**\n     * creates a config from an initial value or null\n     * @param value\n     */\n    static fromNullable<T>(value?: T | null): Config {\n        return new ExtConfig(value);\n    }\n\n    protected getClass(): any {\n        return ExtConfig;\n    }\n\n    /**\n     * shallow copy getter, copies only the first level, references the deeper nodes\n     * in a shared manner\n     */\n    protected shallowCopy$(): Config {\n        const ret = super.shallowCopy$();\n        return new ExtConfig(ret);\n    }\n\n    /**\n     * deep copy, copies all config nodes\n     */\n    get deepCopy(): Config {\n        return new ExtConfig(super.deepCopy$());\n    }\n\n    /**\n     * helper to remap the namespaces of an array of access paths\n     * @param accessPath the access paths to be remapped\n     * @private returns an array of access paths with version remapped namespaces\n     */\n    private remap(accessPath: string[]): string[] {\n        if(!this.$nspEnabled) {\n            return accessPath;\n        }\n        return new Es2019Array(...accessPath).map(key => $nsp(key));\n    }\n}","import {Config, DomQuery, DQ, Es2019Array} from \"mona-dish\";\nimport {ExtDomQuery} from \"./ExtDomQuery\";\nimport {$faces, EMPTY_STR} from \"../core/Const\";\n\n/*\n * various routines for encoding and decoding url parameters\n * into configs and vice versa\n */\n\n\n/**\n * encodes a given form data into a url encoded string\n * @param formData the form data config object\n * @param paramsMapper the params mapper\n * @param defaultStr a default string if nothing comes out of it\n */\nexport function encodeFormData(formData: Config,\n                               paramsMapper = (inStr, inVal) => [inStr, inVal],\n                               defaultStr = EMPTY_STR): string {\n    if (formData.isAbsent()) {\n        return defaultStr;\n    }\n    const assocValues = formData.value;\n\n    const expandValueArrAndRename = key => assocValues[key].map(val => paramsMapper(key, val));\n    const isPropertyKey = key => assocValues.hasOwnProperty(key);\n    const isNotFile = ([, value]) => !(value instanceof ExtDomQuery.global().File);\n    const mapIntoUrlParam = keyVal => `${encodeURIComponent(keyVal[0])}=${encodeURIComponent(keyVal[1])}`;\n\n    return new Es2019Array(...Object.keys(assocValues))\n        .filter(isPropertyKey)\n        .flatMap(expandValueArrAndRename)\n        .filter(isNotFile)\n        .map(mapIntoUrlParam)\n        .join(\"&\");\n}\n\n/**\n * splits and decodes encoded values into strings containing of key=value\n * @param encoded encoded string\n */\nexport function decodeEncodedValues(encoded: string): string[][] {\n    const filterBlanks = item => !!(item || '').replace(/\\s+/g, '');\n    const splitKeyValuePair = line => {\n        let index = line.indexOf(\"=\");\n        if (index == -1) {\n            return [line];\n        }\n        return [line.substring(0, index), line.substring(index + 1)];\n    };\n\n    let requestParamEntries = decodeURIComponent(encoded).split(/&/gi);\n    return requestParamEntries.filter(filterBlanks).map(splitKeyValuePair);\n}\n\n\n/**\n * gets all the input files and their corresponding file objects\n * @param dataSource\n */\nexport function resolveFiles(dataSource: DQ): [string, File][] {\n\n    const expandFilesArr = ([key, files]) => {\n        return [...files].map(file => [key, file]);\n    }\n    const remapFileInput = fileInput => {\n        return [fileInput.name.value || fileInput.id.value, fileInput.filesFromElem(0)];\n    }\n\n    const files = dataSource\n        .querySelectorAllDeep(\"input[type='file']\")\n        .asArray;\n\n    const ret = files\n        .map(remapFileInput)\n        .flatMap(expandFilesArr);\n\n    return ret as any;\n}\n\n\nexport function fixEmptyParameters(keyVal: any[]): [string, any] {\n    return (keyVal.length < 3 ? [keyVal?.[0] ?? [], keyVal?.[1] ?? []] : keyVal) as [string, any];\n}\n\n/**\n * returns the decoded viewState from parentItem\n * @param parentItem\n */\nfunction resolveViewState(parentItem: DomQuery): string[][] | [string, File][] {\n    const viewStateStr = $faces().getViewState(parentItem.getAsElem(0).value);\n\n    // we now need to decode it and then merge it into the target buf\n    // which hosts already our overrides (aka do not override what is already there(\n    // after that we need to deal with form elements on a separate level\n    return decodeEncodedValues(viewStateStr);\n}\n\n/**\n * gets all the inputs under the form parentItem\n * as array\n * @param parentItem\n */\nexport function getFormInputsAsArr(parentItem: DomQuery): string[][] | [string, File][] {\n    const standardInputs: any = resolveViewState(parentItem);\n    const fileInputs = resolveFiles(parentItem);\n    return standardInputs.concat(fileInputs)\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {DomQuery, DQ, DQ$} from \"mona-dish\";\nimport {$faces, $nsp, HTML_CLIENT_WINDOW, HTML_VIEWSTATE, P_CLIENT_WINDOW, P_VIEWSTATE} from \"../core/Const\";\n\n/**\n * Builder for hidden inputs.\n * ATM only ViewState and Client window\n * are supported (per spec)\n *\n * Improves readability in the response processor!\n */\nexport class HiddenInputBuilder {\n    private namingContainerId?: string;\n    private parent?: DomQuery;\n    private namedViewRoot: boolean = false;\n    private readonly name: string;\n    private readonly template: string;\n\n    constructor(private selector: string) {\n        const isViewState = selector.indexOf($nsp(P_VIEWSTATE)) != -1;\n        this.name = isViewState ? P_VIEWSTATE : P_CLIENT_WINDOW\n        this.template = isViewState ? HTML_VIEWSTATE : HTML_CLIENT_WINDOW\n    }\n\n    withNamingContainerId(namingContainer: string): HiddenInputBuilder {\n        this.namingContainerId = namingContainer;\n        return this;\n    }\n\n    withParent(parent: DomQuery): HiddenInputBuilder {\n        this.parent = parent;\n        return this;\n    }\n\n    withNamedViewRoot(namedViewRoot: boolean): HiddenInputBuilder {\n        this.namedViewRoot = namedViewRoot;\n        return this;\n    }\n\n\n    build(): DomQuery {\n        const SEP = $faces().separatorchar;\n\n        let existingStates = DQ$(`[name*='${$nsp(this.name)}']`);\n        let cnt = existingStates.asArray.map(state => {\n            let ident: string = state.id.orElse(\"-1\").value;\n            ident = ident.substring(ident.lastIndexOf(SEP)+1);\n            return parseInt(ident);\n        })\n            .filter(item => {\n                return !isNaN(item);\n            })\n            .reduce((item1, item2) => {\n                return Math.max(item1, item2);\n            }, -1);\n        //the maximum  new ident is the current max + 1\n        cnt++;\n\n\n        const newElement = DQ.fromMarkup($nsp(this.template));\n        newElement.id.value = ((this.namingContainerId?.length) ?\n            [this.namingContainerId,  $nsp(this.name),  cnt]:\n            [$nsp(this.name),  cnt]).join(SEP);\n\n        //name must be prefixed with the naming container id as well according to the jsdocs\n        if(this.namedViewRoot) {\n            newElement.name.value = (this.namingContainerId?.length) ?\n                [this.namingContainerId,  $nsp(this.name)].join(SEP): $nsp(this.name);\n        } else {\n            newElement.name.value = $nsp(this.name);\n        }\n\n\n        this?.parent?.append(newElement);\n        return newElement;\n    }\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {Lang as LangBase, Config, Optional, DomQuery, DQ} from \"mona-dish\";\nimport {Messages} from \"../i18n/Messages\";\nimport {EMPTY_STR, HTML_TAG_FORM} from \"../core/Const\";\nimport {getEventTarget} from \"../xhrCore/RequestDataResolver\";\nimport {Es2019Array} from \"mona-dish\";\n\n\nexport module ExtLang {\n\n    let installedLocale: Messages;\n    let nameSpace = \"impl/util/Lang/\";\n\n    export function getLanguage(): string {\n        //TODO global config override\n\n        let language: string = (<any>navigator).languages?.[0] ?? navigator?.language;\n        language = language.split(\"-\")[0];\n        return language;\n    }\n\n    //should be in lang, but for now here to avoid recursive imports, not sure if typescript still has a problem with those\n    /**\n     * helper function to safely resolve anything\n     * this is not an elvis operator, it resolves\n     * a value without exception in a tree and if\n     * it is not resolvable then an optional of\n     * a default value is restored or Optional\\.empty\n     * if none is given\n     *\n     * usage\n     * <code>\n     *     let var: Optional<string> = saveResolve(() => a.b.c.d.e, \"foobaz\")\n     * </code>\n     *\n     * @param resolverProducer a lambda which can produce the value\n     * @param defaultValue an optional default value if the producer fails to produce anything\n     * @returns an Optional of the produced value\n     */\n    export function failSaveResolve<T>(resolverProducer: () => T, defaultValue: T = null): Optional<T> {\n        return LangBase.saveResolve(resolverProducer, defaultValue);\n    }\n\n    /**\n     * under some conditions it makes sense to swallow errors and return a default value in the error case\n     * classical example the optional resolution of values in a chain (thankfully now covered by Typescript itself)\n     * another example which we have in our system is that some operations fail only under test due to test framework\n     * limitations while they cannot fail in the real world.\n     *\n     * @param resolverProducer a producer function which produces a value in the non error case\n     * @param defaultValue the default value in case of a fail of the function\n     */\n    export function failSaveExecute<T>(resolverProducer: () => any, defaultValue: T = null): void {\n        LangBase.saveResolve(resolverProducer, defaultValue);\n    }\n\n    /**\n     * returns a given localized message upon a given key\n     * basic java log like templating functionality is included\n     *\n     * @param  key the key for the message\n     * @param  defaultMessage optional default message if none was found\n     *\n     * Additionally, you can pass additional arguments, which are used\n     * in the same way java log templates use the params\n     *\n     * @param templateParams the param list to be filled in\n     */\n    export function getMessage(key: string, defaultMessage?: string, ...templateParams: Array<string>): string {\n        installedLocale = installedLocale ?? new Messages();\n\n        let msg = installedLocale[key] ?? defaultMessage ?? key;\n        templateParams.forEach((param, cnt) => {\n            msg = msg.replace(new RegExp([\"\\\\{\", cnt, \"\\\\}\"].join(EMPTY_STR), \"g\"), param);\n        })\n\n\n        return msg;\n    }\n\n    /**\n     * transforms a key value pair into a string\n     * @param key the key\n     * @param val the value\n     * @param delimiter the delimiter\n     */\n    export function keyValToStr(key: string, val: string, delimiter: string = \"\\n\") {\n        return [key, val].join(delimiter);\n    }\n\n    /**\n     * creates an exception with additional internal parameters\n     * for extra information\n     *\n     * @param error\n     * @param  title the exception title\n     * @param  name  the exception name\n     * @param  callerCls the caller class\n     * @param  callFunc the caller function\n     * @param  message the message for the exception\n     */\n    export function makeException(error: Error, title: string, name: string, callerCls: string, callFunc: string, message: string): Error {\n\n        return new Error(message + (callerCls ?? nameSpace) + callFunc ?? (EMPTY_STR + (<any>arguments).caller.toString()));\n\n    }\n\n    /**\n     * fetches a global config entry\n     * @param  configName the name of the configuration entry\n     * @param  defaultValue\n     *\n     * @return either the config entry or if none is given the default value\n     */\n    export function getGlobalConfig(configName: string, defaultValue: any): any {\n        /**\n         * note we could use exists but this is a heavy operation, since the config name usually\n         * given this function here is called very often\n         * is a single entry without . in between we can do the lighter shortcut\n         */\n        return window?.myfaces?.config?.[configName] ?? defaultValue;\n    }\n\n    /**\n     * fetches the form in a fuzzy manner depending\n     * on an element or event target.\n     *\n     * The idea is that according to the jsf spec\n     * the enclosing form of the issuing element needs to be fetched.\n     *\n     * This is fine, but since then html5 came into the picture with the form attribute the element\n     * can be anywhere referencing its parent form.\n     *\n     * Also, theoretically you can have the case of an issuing element enclosing a set of forms\n     * (not really often used, but theoretically it could be input button allows to embed html for instance)\n     *\n     * So the idea is not to limit the issuing form determination to the spec case\n     * but also cover the theoretical and html5 corner case.\n     *\n     * @param elem\n     * @param event\n     */\n    export function getForm(elem: Element, event ?: Event): DQ | never {\n\n        let queryElem = new DQ(elem);\n        let eventTarget = (event) ?  new DQ(getEventTarget(event)) : DomQuery.absent;\n\n        if (queryElem.isTag(HTML_TAG_FORM)) {\n            return queryElem;\n        }\n\n        //html 5 for handling\n        if (queryElem.attr(HTML_TAG_FORM).isPresent()) {\n            let formId = queryElem.attr(HTML_TAG_FORM).value;\n            let foundForm = DQ.byId(formId, true);\n            if (foundForm.isPresent()) {\n                return foundForm;\n            }\n        }\n\n        let form = queryElem.firstParent(HTML_TAG_FORM)\n            .orElseLazy(() => queryElem.byTagName(HTML_TAG_FORM, true))\n            .orElseLazy(() => eventTarget.firstParent(HTML_TAG_FORM))\n            .orElseLazy(() => eventTarget.byTagName(HTML_TAG_FORM))\n            .first();\n\n        assertFormExists(form);\n\n        return form;\n    }\n\n    /**\n     * gets the local or global options with local ones having higher priority\n     * if no local or global one was found then the default value is given back\n     *\n     * @param  configName the name of the configuration entry\n     * @param  localOptions the local options root for the configuration myfaces as default marker is added\n     * implicitly\n     *\n     * @param  defaultValue\n     *\n     * @return either the config entry or if none is given the default value\n     */\n    export function getLocalOrGlobalConfig(localOptions: Config, configName: string, defaultValue: any): any {\n        return localOptions.value?.myfaces?.config?.[configName] ??\n            window?.myfaces?.config?.[configName] ??\n            defaultValue;\n    }\n\n    /**\n     * expands an associative array into an array of key value tuples\n     * @param value\n     */\n    export function ofAssoc(value: {[key: string]: any}) {\n        return new Es2019Array(...Object.keys(value))\n            .map(key => [key, value[key]]);\n    }\n\n    export function collectAssoc(target: any, item: any) {\n        target[item[0]] = item[1];\n        return target;\n    }\n\n    /**\n     * The active timeout for the \"debounce\".\n     * Since we only use it in the XhrController\n     * we can use a local module variable here\n     */\n    let activeTimeouts = {};\n\n\n\n\n    /**\n     * a simple debounce function\n     * which waits until a timeout is reached and\n     * if something comes in in between debounces\n     *\n     * @param runnable a runnable which should go under debounce control\n     * @param timeout a timeout for the debounce window\n     */\n    export function debounce(key, runnable, timeout) {\n        function clearActiveTimeout() {\n            clearTimeout(activeTimeouts[key]);\n            delete activeTimeouts[key];\n        }\n\n        if (!!(activeTimeouts?.[key])) {\n            clearActiveTimeout();\n        }\n        if (timeout > 0) {\n            activeTimeouts[key] = setTimeout(() => {\n                try {\n                    runnable();\n                } finally {\n                    clearActiveTimeout();\n                }\n            }, timeout);\n        } else {\n            runnable();\n        }\n    }\n\n\n    /**\n     * assert that the form exists and throw an exception in the case it does not\n     *\n     * @param form the form to check for\n     */\n    function assertFormExists(form: DomQuery): void | never {\n        if (form.isAbsent()) {\n            throw makeException(new Error(), null, null, \"Impl\", \"getForm\", getMessage(\"ERR_FORM\"));\n        }\n    }\n\n\n}","import {IAsyncRunnable} from \"./AsyncRunnable\";\nimport {ExtLang} from \"./Lang\";\nimport debounce = ExtLang.debounce;\n\n/**\n * A simple XHR queue controller\n * following the async op -> next pattern\n * Faces enforces for the XHR handling\n */\nexport class XhrQueueController<T extends IAsyncRunnable<any>> {\n    queue = [];\n    taskRunning = false;\n\n    constructor() {\n    }\n\n    /**\n     * executes or enqueues an element\n     * @param runnable the runnable (request) to be enqueued\n     * @param timeOut timeout if > 0 which defers the execution\n     * until the debounce window for the timeout is closed.\n     */\n    enqueue(runnable: T, timeOut: number = 0) {\n        debounce(\"xhrQueue\", () => {\n            const requestHandler = this.enrichRunnable(runnable);\n            if (!this.taskRunning) {\n                this.signalTaskRunning();\n                requestHandler.start();\n            } else {\n                this.queue.push(requestHandler);\n            }\n        }, timeOut);\n    }\n\n    /**\n     * trigger the next element in the queue\n     * to be started!\n     */\n    next() {\n        this.updateTaskRunning();\n        const next = this.queue.shift();\n        next?.start();\n    }\n\n    /**\n     * clears and resets the queue\n     */\n    clear() {\n        this.queue.length = 0;\n        this.updateTaskRunning();\n    }\n\n    /**\n     * true if queue is empty\n     */\n    get isEmpty(): boolean {\n        return !this.queue.length;\n    }\n\n    /**\n     * Enriches the incoming async asyncRunnable\n     * with the error and next handling\n     * (aka: asyncRunnable is done -> next\n     *                   error -> clear queue\n     * @param asyncRunnable the async runnable which needs enrichment\n     * @private\n     */\n    private enrichRunnable(asyncRunnable: T) {\n        /**\n         * we can use the Promise pattern asyncrunnable uses\n         * to trigger queue control callbacks of next element\n         * and clear the queue (theoretically this\n         * would work with any promise)\n         */\n        return asyncRunnable\n            .then(() => this.next())\n            .catch(() => this.clear());\n    }\n\n\n    /**\n     * alerts the queue that a task is running\n     *\n     * @private\n     */\n    private signalTaskRunning() {\n        this.taskRunning = true;\n    }\n\n    /**\n     * updates the task running status according to the current queue\n     * @private\n     */\n    private updateTaskRunning() {\n        this.taskRunning = !this.isEmpty;\n    }\n\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n    EMPTY_STR, ERROR,\n    ERROR_MESSAGE,\n    ERROR_NAME,\n    RESPONSE_TEXT,\n    RESPONSE_XML, SERVER_ERROR,\n    SOURCE,\n    STATUS,\n    UNKNOWN\n} from \"../core/Const\";\nimport {Config} from \"mona-dish\";\n\nimport {EventData} from \"./EventData\";\nimport {ExtLang} from \"../util/Lang\";\nimport getMessage = ExtLang.getMessage;\n\n\nexport enum ErrorType {\n    SERVER_ERROR = \"serverError\",\n    HTTP_ERROR = \"httpError\",\n    CLIENT_ERROR = \"clientErrror\",\n    TIMEOUT = \"timeout\"\n}\n\n/**\n * the spec has a problem of having the error\n * object somewhat underspecified, there is no clear\n * description of the required contents.\n * I want to streamline it with mojarra here\n * hence we are going to move\n * everything into the same attributes,\n * I will add deprecated myfaces backwards compatibility attributes as well\n */\nexport class ErrorData extends EventData implements IErrorData {\n\n    type: string = \"error\";\n    source: HTMLElement;\n    sourceId: string;\n    errorName: string;\n    errorMessage: string;\n\n    responseText: string;\n    responseXML: any;\n\n    status: string;\n    typeDetails: ErrorType;\n\n    serverErrorName: string;\n    serverErrorMessage: string;\n    message: string;\n\n    constructor(source: string, errorName: string, errorMessage: string, responseText: string = null, responseXML: any = null, responseCode: string = \"200\", status: string = \"\", type = ErrorType.CLIENT_ERROR) {\n        super();\n        this.source = document.getElementById(source);\n        this.sourceId = source;\n        this.type = ERROR;\n        this.errorName = errorName;\n        //tck requires that the type is prefixed to the message itself (jsdoc also) in case of a server error\n        this.message = this.errorMessage = (type == SERVER_ERROR) ? type + \": \" + errorMessage : errorMessage;\n        this.responseCode = responseCode;\n        this.responseText = responseText;\n        this.status = status;\n        this.typeDetails = type;\n\n        if (type == ErrorType.SERVER_ERROR) {\n            this.serverErrorName = this.errorName;\n            this.serverErrorMessage = this.errorMessage;\n        }\n    }\n\n    static fromClient(e: Error): ErrorData {\n        return new ErrorData((e as any)?.source ?? \"client\", e?.name ?? EMPTY_STR, e?.message ?? EMPTY_STR, e?.stack ?? EMPTY_STR);\n    }\n\n    static fromHttpConnection(source: any, name: string, message: string, responseText, responseCode: number, status: string = EMPTY_STR): ErrorData {\n        return new ErrorData(source, name, message, responseText, responseCode, `${responseCode}`, status, ErrorType.HTTP_ERROR);\n    }\n\n    static fromGeneric(context: Config, errorCode: number, errorType: ErrorType = ErrorType.SERVER_ERROR): ErrorData {\n\n        let getMsg = this.getMsg;\n\n        let source = getMsg(context, SOURCE);\n        let errorName = getMsg(context, ERROR_NAME);\n        let errorMessage = getMsg(context, ERROR_MESSAGE);\n        let status = getMsg(context, STATUS);\n        let responseText = getMsg(context, RESPONSE_TEXT);\n        let responseXML = getMsg(context, RESPONSE_XML);\n\n\n        return new ErrorData(source, errorName, errorMessage, responseText, responseXML, errorCode + EMPTY_STR, status, errorType);\n    }\n\n    private static getMsg(context, param) {\n        return getMessage(context.getIf(param).orElse(EMPTY_STR).value);\n    }\n\n    static fromServerError(context: Config): ErrorData {\n        return this.fromGeneric(context, -1);\n    }\n\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Config, DQ} from \"mona-dish\";\nimport {BEGIN, CTX_PARAM_REQ_PASS_THR, EVENT, P_AJAX_SOURCE, SOURCE} from \"../core/Const\";\n\nexport class EventData implements IEventData{\n    type: string;\n    status: string;\n    source: any;\n    responseCode: string;\n    responseText: string;\n    responseXML: Document;\n\n    static createFromRequest(request: XMLHttpRequest, context: Config, /*event name*/ name: string): EventData {\n\n        let eventData = new EventData();\n\n        eventData.type = EVENT;\n        eventData.status = name;\n\n        let sourceId: string = context.getIf(SOURCE)\n            .orElseLazy(() => context.getIf(P_AJAX_SOURCE).value)\n            .orElseLazy(() => context.getIf(CTX_PARAM_REQ_PASS_THR, P_AJAX_SOURCE).value)\n            .value;\n        if (sourceId) {\n            eventData.source = DQ.byId(sourceId, true).first().value.value;\n        }\n\n        if (name !== BEGIN) {\n            eventData.responseCode = request?.status?.toString();\n            eventData.responseText = request?.responseText;\n            eventData.responseXML = request?.responseXML;\n        }\n        return eventData;\n    }\n}\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Config, DomQuery, DQ} from \"mona-dish\";\nimport {\n    $faces,\n    $nsp,\n    CTX_OPTIONS_DELAY,\n    CTX_OPTIONS_TIMEOUT,\n    DELAY_NONE,\n    EMPTY_FUNC,\n    EMPTY_STR,\n    ENCODED_URL, NAMED_VIEWROOT, NAMING_CONTAINER_ID,\n    P_VIEWSTATE,\n    REQ_TYPE_GET,\n    REQ_TYPE_POST\n} from \"../core/Const\";\nimport {XhrFormData} from \"./XhrFormData\";\nimport {ExtLang} from \"../util/Lang\";\nimport {ExtConfig, ExtDomQuery} from \"../util/ExtDomQuery\";\nimport {Assertions} from \"../util/Assertions\";\n\n\n/**\n * Resolver functions for various aspects of the request data\n *\n * stateless because it might be called from various\n * parts of the response classes\n */\n\n/**\n * resolves the event handlers lazily\n * so that if some decoration happens in between we can deal with it\n *\n * @param requestContext\n * @param responseContext\n * @param funcName\n */\nexport function resolveHandlerFunc(requestContext: Config, responseContext: Config, funcName: string) {\n    responseContext = responseContext || new Config({});\n    return responseContext.getIf(funcName)\n        .orElseLazy(() =>requestContext.getIf(funcName).value)\n        .orElse(EMPTY_FUNC).value;\n}\n\nexport function resolveTargetUrl(srcFormElement: HTMLFormElement) {\n    return (typeof srcFormElement.elements[ENCODED_URL] == 'undefined') ?\n        srcFormElement.action :\n        srcFormElement.elements[ENCODED_URL].value;\n}\n\nexport function resolveFinalUrl(sourceForm: DomQuery, formData: XhrFormData, ajaxType = REQ_TYPE_POST) {\n    let targetUrl = resolveTargetUrl(<HTMLFormElement>sourceForm.getAsElem(0).value);\n\n    return targetUrl + (ajaxType == REQ_TYPE_GET ? \"?\" + formData.toString() : EMPTY_STR);\n}\n\n/**\n * form resolution the same way our old implementation did\n * it is either the id or the parent form of the element or an embedded form\n * of the element\n *\n * @param elem\n * @param event\n */\nexport function resolveForm(elem: DQ, event: Event): DQ {\n    return ExtLang.getForm(elem.getAsElem(0).value, event);\n}\n\nexport function resolveViewId(form: DQ): string {\n    const viewState = form.querySelectorAll(`input[type='hidden'][name*='${$nsp(P_VIEWSTATE)}']`).id.orElse(\"\").value;\n    const divider = $faces().separatorchar;\n    const viewId = viewState.split(divider, 2)[0];\n    const viewStateViewId = viewId.indexOf($nsp(P_VIEWSTATE)) === -1 ? viewId : \"\";\n    // myfaces specific, we in non portlet environments prepend the viewId\n    // even without being in a naming container, the other components ignore that\n    return form.id.value.indexOf(viewStateViewId) === 0 ? viewStateViewId : \"\";\n}\n\nexport function resolveViewRootId(form: DQ): string {\n    const viewState = form.querySelectorAll(`input[type='hidden'][name*='${$nsp(P_VIEWSTATE)}']`).attr(\"name\").orElse(\"\").value;\n    const divider = $faces().separatorchar;\n    const viewId = viewState.split(divider, 2)[0];\n    //different to the identifier the form id is never prepended to the viewstate\n    return viewId.indexOf($nsp(P_VIEWSTATE)) === -1 ? viewId : \"\";\n}\n\n/**\n * as per jsdoc before the request it must be ensured that every post argument\n * is prefixed with the naming container id (there is an exception in mojarra with\n * the element=element param, which we have to follow here as well.\n * (inputs are prefixed by name anyway normally this only affects our standard parameters)\n * @private\n */\nexport function resoveNamingContainerMapper(internalContext: Config): (key: string, value: any) => [string, any] {\n    const isNamedViewRoot = internalContext.getIf(NAMED_VIEWROOT).isPresent();\n    if(!isNamedViewRoot) {\n        return (key, value) => [key, value];\n    }\n    const partialId = internalContext.getIf(NAMING_CONTAINER_ID).value;\n    const SEP = $faces().separatorchar;\n    const prefix = partialId + SEP;\n    return (key: string, value: any) => (key.indexOf(prefix) == 0) ? [key, value] : [prefix + key, value];\n}\n\nexport function resolveTimeout(options: Config): number {\n    let getCfg = ExtLang.getLocalOrGlobalConfig;\n    return options.getIf(CTX_OPTIONS_TIMEOUT).value ?? getCfg(options.value, CTX_OPTIONS_TIMEOUT, 0);\n}\n\n/**\n * resolve the delay from the options and/or the request context and or the configuration\n *\n * @param options ... the options object, in most cases it will host the delay value\n */\nexport function resolveDelay(options: Config): number {\n    // null, 'none', or undefined will automatically be mapped to 0 aka no delay\n    // the config delay will be dropped not needed anymore, it does not really\n    // make sense anymore now that it is part of a local spec\n    let ret = options.getIf(CTX_OPTIONS_DELAY).orElse(0).value;\n    // if delay === none, no delay must be used, aka delay 0\n    ret = (DELAY_NONE === ret) ? 0 : ret;\n    // negative, or invalid values will automatically get a js exception\n    Assertions.assertDelay(ret);\n    return ret;\n}\n\n/**\n * resolves the window-id from various sources\n *\n * @param options\n */\nexport function resolveWindowId(options: Config) {\n    return options?.value?.windowId ?? ExtDomQuery.windowId;\n}\n\n/**\n * cross port from the dojo lib\n * browser save event resolution\n * @param evt the event object\n * (with a fallback for ie events if none is present)\n * @deprecated soon will be removed\n */\nexport function getEventTarget(evt: Event): Element {\n    // ie6 and 7 fallback\n    let finalEvent = evt;\n    /*\n     * evt source is defined in the jsf events\n     * seems like some component authors use our code,\n     * so we add it here see also\n     * https://issues.apache.org/jira/browse/MYFACES-2458\n     * not entirely a bug but makes sense to add this\n     * behavior. I dont use it that way but nevertheless it\n     * does not break anything so why not\n     */\n    let t = finalEvent?.srcElement ?? finalEvent?.target ?? (<any>finalEvent)?.source;\n    while ((t) && (t.nodeType != 1)) {\n        t = t.parentNode;\n    }\n    return t;\n}\n\n/**\n * resolves a bunch of default values\n * which can be further processed from the given\n * call parameters of faces.ajax.request\n *\n * @param event\n * @param opts\n * @param el\n */\nexport function resolveDefaults(event: Event, opts: Options | [[string, any]] , el: Element | string = null): any {\n    //deep copy the options, so that further transformations to not backfire into the callers\n    const elem = DQ.byId(el || <Element>event.target, true);\n    const options = new ExtConfig(opts).deepCopy as ExtConfig;\n    return {\n        options: options,\n        elem: elem,\n        elementId: elem.id.value,\n        windowId: resolveWindowId(options),\n        isResetValues: true === options.value?.resetValues\n    };\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Config, Optional, XMLQuery} from \"mona-dish\";\n\nimport {Assertions} from \"../util/Assertions\";\nimport {DQ} from \"mona-dish\";\nimport {\n    $nsp,\n    CTX_PARAM_MF_INTERNAL,\n    CTX_PARAM_SRC_CTL_ID,\n    CTX_PARAM_SRC_FRM_ID,\n    SEL_RESPONSE_XML,\n    SOURCE,\n    HTML_TAG_FORM,\n    UPDATE_ELEMS,\n    UPDATE_FORMS,\n    DEFERRED_HEAD_INSERTS\n} from \"../core/Const\";\nimport {ExtConfig} from \"../util/ExtDomQuery\";\n\n/**\n * Resolver functions for various aspects of the response data\n *\n * stateless because it might be called from various\n * parts of the response classes\n */\n\n/**\n * fetches the response XML\n * as XML Query object\n *\n * @param request the request hosting the responseXML\n *\n * Throws an error in case of non-existent or wrong xml data\n *\n */\nexport function resolveResponseXML(request: Config): XMLQuery {\n    let ret = new XMLQuery($nsp(request.getIf(SEL_RESPONSE_XML).value));\n    Assertions.assertValidXMLResponse(ret);\n\n    return ret;\n}\n\n/**\n * Splits the incoming pass-through context apart\n * in an internal and an external normalized context\n * the internal one is just for our internal processing\n *\n * @param context the root context as associative array\n */\nexport function resolveContexts(context: { [p: string]: any }): any {\n    /**\n     * we split the context apart into the external one and\n     * some internal values\n     */\n    let externalContext = ExtConfig.fromNullable(context);\n    let internalContext = externalContext.getIf(CTX_PARAM_MF_INTERNAL);\n    if (!internalContext.isPresent()) {\n        internalContext = ExtConfig.fromNullable({});\n    }\n\n    /**\n     * prepare storage for some deferred operations\n     */\n    internalContext.assign(DEFERRED_HEAD_INSERTS).value = [];\n    internalContext.assign(UPDATE_FORMS).value = [];\n    internalContext.assign(UPDATE_ELEMS).value = [];\n    return {externalContext, internalContext};\n}\n\n/**\n * fetches the source element out of our contexts\n *\n * @param context the external context which should host the source id\n * @param internalContext internal pass-through fall back\n *\n */\nexport function resolveSourceElement(context: Config, internalContext: Config): DQ {\n    let elemId = resolveSourceElementId(context, internalContext);\n    return DQ.byId(elemId.value, true);\n}\n\n/**\n * fetches the source form if it still exists\n * also embedded forms and parent forms are taken into consideration\n * as fallbacks\n *\n * @param internalContext\n * @param elem\n */\nexport function resolveSourceForm(internalContext: Config, elem: DQ): DQ {\n    let sourceFormId = internalContext.getIf(CTX_PARAM_SRC_FRM_ID);\n    let sourceForm = new DQ(sourceFormId.isPresent() ? document.forms[sourceFormId.value] : null);\n\n    sourceForm = sourceForm.orElseLazy(() => elem.firstParent(HTML_TAG_FORM))\n        .orElseLazy(() => elem.querySelectorAll(HTML_TAG_FORM))\n        .orElseLazy(() => DQ.querySelectorAll(HTML_TAG_FORM));\n\n    return sourceForm;\n}\n\nfunction resolveSourceElementId(context: Config, internalContext: Config): Optional<string> {\n    //?internal context?? used to be external one\n    return internalContext.getIf(CTX_PARAM_SRC_CTL_ID)\n        .orElseLazy(() => context.getIf(SOURCE, \"id\").value);\n}\n\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {DQ, XMLQuery} from \"mona-dish\";\nimport {ResponseProcessor} from \"./ResponseProcessor\";\n\nimport {IResponseProcessor} from \"./IResponseProcessor\";\nimport {\n    $nsp,\n    XML_TAG_ATTRIBUTES,\n    XML_TAG_CHANGES,\n    XML_TAG_DELETE,\n    XML_TAG_ERROR,\n    XML_TAG_EVAL,\n    XML_TAG_EXTENSION,\n    XML_TAG_INSERT,\n    XML_TAG_REDIRECT,\n    XML_TAG_UPDATE, P_RESOURCE,\n    P_VIEWBODY,\n    P_VIEWHEAD,\n    P_VIEWROOT,\n    NAMING_CONTAINER_ID,\n    XML_TAG_PARTIAL_RESP,\n    RESPONSE_XML,\n    XML_TAG_AFTER,\n    XML_TAG_BEFORE, NAMED_VIEWROOT, XML_ATTR_NAMED_VIEWROOT, P_VIEWSTATE, $faces\n} from \"../core/Const\";\nimport {resolveContexts, resolveResponseXML} from \"./ResonseDataResolver\";\nimport {ExtConfig} from \"../util/ExtDomQuery\";\n\n\n\nexport module Response {\n\n\n    /**\n     * Standardized faces.ts response\n     * this one is called straight from faces.ts.response\n     *\n     * The processing follows the spec by going for the responseXML\n     * and processing its tags\n     *\n     * @param {XMLHttpRequest} request (xhrRequest) - xhr request object\n     * @param context {Context} context (Map) - AJAX context\n     *\n     */\n    export function processResponse(request: XMLHttpRequest, context: Context) {\n\n        let req = ExtConfig.fromNullable(request);\n        let {externalContext, internalContext} = resolveContexts(context);\n        let responseXML: XMLQuery = resolveResponseXML(req);\n        let responseProcessor = new ResponseProcessor(req, externalContext, internalContext);\n\n        internalContext.assign(RESPONSE_XML).value = responseXML;\n\n        // we now process the partial tags, or in none given raise an error\n        responseXML.querySelectorAll(XML_TAG_PARTIAL_RESP)\n            .each(item => processPartialTag(<XMLQuery>item, responseProcessor, internalContext));\n\n        // We now process the viewStates, client windows and the elements to be evaluated are delayed.\n        // The reason for this is that often it is better\n        // to wait until the document has caught up before\n        // doing any evaluations even on embedded scripts.\n        // Usually this does not matter, the client window comes in almost last always anyway\n        // we maybe drop this deferred assignment in the future, but myfaces did it until now.\n        responseProcessor.updateNamedViewRootState();\n        responseProcessor.fixViewStates();\n        responseProcessor.fixClientWindow();\n        responseProcessor.globalEval();\n\n        responseProcessor.done();\n    }\n\n    /**\n     * highest node partial-response from there the main operations are triggered\n     */\n    function processPartialTag(node: XMLQuery, responseProcessor: IResponseProcessor, internalContext) {\n\n\n        /*\n        https://javaee.github.io/javaserverfaces/docs/2.2/javadocs/web-partialresponse.html#ns_xsd\n        The \"partial-response\" element is the root of the partial response information hierarchy,\n        and contains nested elements for all possible elements that can exist in the response.\n        This element must have an \"id\" attribute whose value is the return from calling getContainerClientId()\n        on the UIViewRoot to which this response pertains.\n         */\n        // we can determine whether we are in a naming container scenario by checking whether the passed view id is present in the page\n        // under or in body as identifier\n\n        let partialId:string = node?.id?.value;\n        internalContext.assignIf(!!partialId, NAMING_CONTAINER_ID).value = partialId; // second case mojarra\n\n        // there must be at least one container viewstate element resembling the viewroot that we know\n        // this is named\n        responseProcessor.updateNamedViewRootState();\n\n        const SEL_SUB_TAGS = [XML_TAG_ERROR, XML_TAG_REDIRECT, XML_TAG_CHANGES].join(\",\");\n\n        // now we can process the main operations\n        node.querySelectorAll(SEL_SUB_TAGS).each((node: XMLQuery) => {\n            switch (node.tagName.value) {\n                case XML_TAG_ERROR:\n                    responseProcessor.error(node);\n                    break;\n                case XML_TAG_REDIRECT:\n                    responseProcessor.redirect(node);\n                    break;\n                case XML_TAG_CHANGES:\n                    processChangesTag(node, responseProcessor);\n                    break;\n            }\n        });\n    }\n\n    let processInsert = function (responseProcessor: IResponseProcessor, node: XMLQuery) {\n        // path1 insert after as child tags\n        if(node.querySelectorAll([XML_TAG_BEFORE, XML_TAG_AFTER].join(\",\")).length) {\n            responseProcessor.insertWithSubTags(node);\n        } else { // insert before after with id\n            responseProcessor.insert(node);\n        }\n\n    };\n\n    /**\n     * next level changes tag\n     *\n     * @param node\n     * @param responseProcessor\n     */\n    function processChangesTag(node: XMLQuery, responseProcessor: IResponseProcessor): boolean {\n        const ALLOWED_TAGS = [XML_TAG_UPDATE, XML_TAG_EVAL, XML_TAG_INSERT, XML_TAG_DELETE, XML_TAG_ATTRIBUTES, XML_TAG_EXTENSION].join(\", \");\n        node.querySelectorAll(ALLOWED_TAGS).each(\n            (node: XMLQuery) => {\n                switch (node.tagName.value) {\n                    case XML_TAG_UPDATE:\n                        processUpdateTag(node, responseProcessor);\n                        break;\n\n                    case XML_TAG_EVAL:\n                        responseProcessor.eval(node);\n                        break;\n\n                    case XML_TAG_INSERT:\n                        processInsert(responseProcessor, node);\n                        break;\n\n                    case XML_TAG_DELETE:\n                        responseProcessor.delete(node);\n                        break;\n\n                    case XML_TAG_ATTRIBUTES:\n                        responseProcessor.attributes(node);\n                        break;\n\n                    case XML_TAG_EXTENSION:\n                        break;\n                }\n            }\n        );\n        return true;\n    }\n\n    /**\n     * checks and stores a state update for delayed processing\n     *\n     * @param responseProcessor the response processor to perform the store operation\n     * @param node the xml node to check for the state\n     *\n     * @private\n     */\n    function storeState(responseProcessor: IResponseProcessor, node: XMLQuery) {\n        return responseProcessor.processViewState(node) || responseProcessor.processClientWindow(node);\n    }\n\n    /**\n     * branch tag update. drill further down into the updates\n     * special case viewState in that case it is a leaf\n     * and the viewState must be processed\n     *\n     * @param node\n     * @param responseProcessor\n     */\n    function processUpdateTag(node: XMLQuery, responseProcessor: IResponseProcessor) {\n        // early state storing, if no state we perform a normal update cycle\n        if (!storeState(responseProcessor, node)) {\n            handleElementUpdate(node, responseProcessor);\n        }\n    }\n\n    /**\n     * element update\n     *\n     * @param node\n     * @param responseProcessor\n     */\n    function handleElementUpdate(node: XMLQuery, responseProcessor: IResponseProcessor) {\n        let cdataBlock = node.cDATAAsString;\n        switch (node.id.value) {\n            case $nsp(P_VIEWROOT) :\n                responseProcessor.replaceViewRoot(DQ.fromMarkup(cdataBlock.substring(cdataBlock.indexOf(\"<html\"))));\n                break;\n\n            case $nsp(P_VIEWHEAD):\n                responseProcessor.replaceHead(DQ.fromMarkup(cdataBlock));\n                break;\n\n            case $nsp(P_VIEWBODY):\n                responseProcessor.replaceBody(DQ.fromMarkup(cdataBlock));\n                break;\n\n            case $nsp(P_RESOURCE):\n                responseProcessor.addToHead(DQ.fromMarkup(cdataBlock))\n                break;\n\n            default:// htmlItem replacement\n                responseProcessor.update(node, cdataBlock);\n                break;\n        }\n    }\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Config, DomQuery, DQ, DQ$, Lang, XMLQuery} from \"mona-dish\";\nimport {Implementation} from \"../AjaxImpl\";\nimport {Assertions} from \"../util/Assertions\";\nimport {IResponseProcessor} from \"./IResponseProcessor\";\nimport {ErrorData} from \"./ErrorData\";\nimport {StateHolder} from \"../core/ImplTypes\";\nimport {EventData} from \"./EventData\";\n\nimport {\n    $faces,\n    $nsp,\n    APPLIED_CLIENT_WINDOW,\n    APPLIED_VST,\n    ATTR_ID,\n    ATTR_NAME,\n    ATTR_URL,\n    ATTR_VALUE,\n    DEFERRED_HEAD_INSERTS,\n    EMPTY_FUNC,\n    EMPTY_STR,\n    ERROR_MESSAGE,\n    ERROR_NAME,\n    HTML_TAG_BODY,\n    HTML_TAG_FORM,\n    HTML_TAG_HEAD,\n    HTML_TAG_LINK,\n    HTML_TAG_SCRIPT,\n    HTML_TAG_STYLE, IDENT_ALL, IDENT_NONE, NAMED_VIEWROOT,\n    ON_ERROR,\n    ON_EVENT,\n    P_CLIENT_WINDOW,\n    P_EXECUTE,\n    P_AJAX_SOURCE,\n    P_RENDER,\n    P_RENDER_OVERRIDE,\n    P_VIEWSTATE,\n    NAMING_CONTAINER_ID,\n    RESPONSE_XML,\n    SEL_CLIENT_WINDOW_ELEM,\n    SEL_VIEWSTATE_ELEM,\n    SOURCE,\n    SUCCESS,\n    UPDATE_ELEMS,\n    UPDATE_FORMS,\n    XML_TAG_AFTER,\n    XML_TAG_ATTR,\n    XML_TAG_BEFORE\n} from \"../core/Const\";\nimport {ExtConfig, ExtDomQuery} from \"../util/ExtDomQuery\";\nimport {HiddenInputBuilder} from \"../util/HiddenInputBuilder\";\nimport trim = Lang.trim;\nimport {ExtLang} from \"../util/Lang\";\nimport ofAssoc = ExtLang.ofAssoc;\n\n\n/**\n * Response processor\n *\n * Each  XML tag is either a node or a leaf\n * or both\n *\n * the processor provides a set of operations\n * which are executed on a single leaf node per operation\n * and present the core functionality of our response\n *\n * Note the response processor is stateful hence we bundle it in a class\n * to reduce code we keep references tot contexts in place\n */\nexport class ResponseProcessor implements IResponseProcessor {\n\n    constructor(private request: Config, private externalContext: Config, private internalContext: Config) {\n    }\n\n    /**\n     * head replacement\n     * @param shadowDocument incoming shadow head data (aka cdata as xml reference or dom element)\n     * the data incoming must represent the html representation of the head itself one way or the other\n     */\n    replaceHead(shadowDocument: XMLQuery | DQ) {\n        const shadowHead = shadowDocument.querySelectorAll(HTML_TAG_HEAD);\n        if (!shadowHead.isPresent()) {\n            return;\n        }\n        const head = ExtDomQuery.querySelectorAll(HTML_TAG_HEAD);\n        // full replace we delete everything\n        head.childNodes.delete();\n        this.addToHead(shadowHead);\n        //we copy the attributes as well (just in case myfaces introduces the id in head)\n        head.copyAttrs(shadowHead);\n    }\n\n    addToHead(shadowHead: XMLQuery | DQ) {\n        const mappedHeadData = new ExtDomQuery(shadowHead);\n        const scriptTags = [HTML_TAG_SCRIPT];\n        const nonExecutables = mappedHeadData.filter(item => scriptTags.indexOf(item.tagName.orElse(\"\").value) == -1);\n        nonExecutables.runHeadInserts(true);\n\n        //incoming either the outer head tag or its children\n        const nodesToAdd = (shadowHead.tagName.value === \"HEAD\") ? shadowHead.childNodes : shadowHead;\n        // this is stored for \"post\" processing\n        // after the rest of the \"physical build up\", head before body\n        const scriptElements = new DomQuery(...nodesToAdd.asArray\n            .filter(item => scriptTags.indexOf(item.tagName.orElse(\"\").value) != -1));\n\n        this.addToHeadDeferred(scriptElements);\n    }\n\n    addToHeadDeferred(newElements: XMLQuery | DQ) {\n        this.internalContext.assign(DEFERRED_HEAD_INSERTS).value.push(newElements);\n    }\n\n    /**\n     * replaces the body in the expected manner\n     * which means the entire body content is refreshed\n     * however also the body attributes must be transferred\n     * keeping event handlers etc... in place\n     *\n     * @param shadowDocument .. an incoming shadow document hosting the new nodes\n     */\n    replaceBody(shadowDocument: XMLQuery | DQ) {\n\n        const shadowBody = shadowDocument.querySelectorAll(HTML_TAG_BODY);\n        if (!shadowBody.isPresent()) {\n            return;\n        }\n\n        const shadowInnerHTML: string = <string>shadowBody.innerHTML;\n        const resultingBody = <DQ>ExtDomQuery.querySelectorAll(HTML_TAG_BODY);\n        const updateForms = resultingBody.querySelectorAll(HTML_TAG_FORM);\n\n        // main difference, we cannot replace the body itself, but only its content\n        // we need a separate step for post-processing the incoming\n        // attributes, like classes, styles etc...\n        (resultingBody.html(shadowInnerHTML) as DQ).copyAttrs(shadowBody);\n        this.externalContext.assign($nsp(P_RENDER_OVERRIDE)).value = \"@all\";\n        this.storeForPostProcessing(updateForms, resultingBody);\n    }\n\n    /**\n     * Leaf Tag eval... process whatever is in the eval cdata block\n     *\n     * @param node the node to eval\n     */\n    eval(node: XMLQuery) {\n        ExtDomQuery.globalEval(node.cDATAAsString);\n    }\n\n    /**\n     * processes an incoming error from the response\n     * which is hosted under the &lt;error&gt; tag\n     * @param node the node hosting the error in our response xml\n     * @param node the node in the xml hosting the error message\n     */\n    error(node: XMLQuery) {\n        /**\n         * <error>\n         *      <error-name>String</error-name>\n         *      <error-message><![CDATA[message]]></error-message>\n         * <error>\n         */\n\n        const mergedErrorData = new ExtConfig({});\n        mergedErrorData.assign(SOURCE).value = this.externalContext.getIf(P_AJAX_SOURCE).get(0).value;\n        mergedErrorData.assign(ERROR_NAME).value = node.querySelectorAll(ERROR_NAME).textContent(EMPTY_STR);\n        mergedErrorData.assign(ERROR_MESSAGE).value = node.querySelectorAll(ERROR_MESSAGE).cDATAAsString;\n\n        const hasResponseXML = this.internalContext.get(RESPONSE_XML).isPresent();\n\n        //we now store the response xml also in the error data for further details\n        mergedErrorData.assignIf(hasResponseXML, RESPONSE_XML).value = this.internalContext.getIf(RESPONSE_XML).value.get(0).value;\n\n        // error post-processing and enrichment (standard messages from keys)\n        const errorData = ErrorData.fromServerError(mergedErrorData);\n\n        // we now trigger an internally stored onError function which might be an attached to the context\n        // either we do not have an internal on error, or an on error has been based via params from the outside.\n        // In both cases they are attached to our contexts\n\n        this.triggerOnError(errorData);\n        Implementation.sendError(errorData);\n    }\n\n    /**\n     * process the redirect operation\n     *\n     * @param node\n     */\n    redirect(node: XMLQuery) {\n        Assertions.assertUrlExists(node);\n\n        const redirectUrl = trim(node.attr(ATTR_URL).value);\n        if (redirectUrl != EMPTY_STR) {\n            window.location.href = redirectUrl;\n        }\n    }\n\n    /**\n     * processes the update operation and updates the node with the cdata block\n     * @param node the xml response node hosting the update info\n     * @param cdataBlock the cdata block with the new html code\n     */\n    update(node: XMLQuery, cdataBlock: string) {\n        const result = ExtDomQuery.byId(node.id.value, true).outerHTML(cdataBlock, false, false);\n        const sourceForm = result?.firstParent(HTML_TAG_FORM).orElseLazy(() => result.byTagName(HTML_TAG_FORM, true));\n        if (sourceForm) {\n            this.storeForPostProcessing(sourceForm, result);\n        }\n    }\n\n    /**\n     * Delete handler, simply deletes the node referenced by the xml data\n     * @param node\n     */\n    delete(node: XMLQuery) {\n        DQ.byId(node.id.value, true).delete();\n    }\n\n    /**\n     * attributes leaf tag... process the attributes\n     *\n     * @param node\n     */\n    attributes(node: XMLQuery) {\n        const elem = DQ.byId(node.id.value, true);\n\n        node.byTagName(XML_TAG_ATTR).each((item: XMLQuery) => {\n            elem.attr(item.attr(ATTR_NAME).value).value = item.attr(ATTR_VALUE).value;\n        });\n    }\n\n    /**\n     * @param shadowDocument a shadow document which is needed for further processing\n     */\n    replaceViewRoot(shadowDocument: XMLQuery) {\n        this.replaceHead(shadowDocument);\n        this.replaceBody(shadowDocument);\n    }\n\n    /**\n     * Insert handling, either before or after\n     *\n     * @param node\n     */\n    insert(node: XMLQuery) {\n        //let insertId = node.id; //not used atm\n\n        const before = node.attr(XML_TAG_BEFORE);\n        const after = node.attr(XML_TAG_AFTER);\n        const insertNodes = DQ.fromMarkup(<any>node.cDATAAsString);\n\n        if (before.isPresent()) {\n            DQ.byId(before.value, true).insertBefore(insertNodes);\n            this.internalContext.assign(UPDATE_ELEMS).value.push(insertNodes);\n        }\n        if (after.isPresent()) {\n            const domQuery = DQ.byId(after.value, true);\n            domQuery.insertAfter(insertNodes);\n\n            this.internalContext.assign(UPDATE_ELEMS).value.push(insertNodes);\n        }\n    }\n\n    /**\n     * Handler for the case &lt;insert <&lt; before id=\"...\n     *\n     * @param node the node hosting the insert data\n     */\n    insertWithSubTags(node: XMLQuery) {\n        const before = node.querySelectorAll(XML_TAG_BEFORE);\n        const after = node.querySelectorAll(XML_TAG_AFTER);\n\n        before.each(item => {\n            const insertId = item.attr(ATTR_ID);\n            const insertNodes = DQ.fromMarkup(<any>item.cDATAAsString);\n            if (insertId.isPresent()) {\n                DQ.byId(insertId.value, true).insertBefore(insertNodes);\n                this.internalContext.assign(UPDATE_ELEMS).value.push(insertNodes);\n            }\n        });\n\n        after.each(item => {\n            const insertId = item.attr(ATTR_ID);\n            const insertNodes = DQ.fromMarkup(<any>item.cDATAAsString);\n            if (insertId.isPresent()) {\n                DQ.byId(insertId.value, true).insertAfter(insertNodes);\n                this.internalContext.assign(UPDATE_ELEMS).value.push(insertNodes);\n            }\n        });\n    }\n\n    /**\n     * Process the viewState update, update the affected\n     * forms with their respective new viewState values\n     *\n     */\n    processViewState(node: XMLQuery): boolean {\n        if (ResponseProcessor.isViewStateNode(node)) {\n            const state = node.cDATAAsString;\n            this.internalContext.assign(APPLIED_VST, node.id.value).value = new StateHolder($nsp(node.id.value), state);\n            return true;\n        }\n        return false;\n    }\n\n    processClientWindow(node: XMLQuery): boolean {\n        if (ResponseProcessor.isClientWindowNode(node)) {\n            const state = node.cDATAAsString;\n            this.internalContext.assign(APPLIED_CLIENT_WINDOW, node.id.value).value = new StateHolder($nsp(node.id.value), state);\n            return true;\n        }\n    }\n\n    /**\n     * generic global eval which runs the embedded css and scripts\n     */\n    globalEval() {\n        //  phase one, if we have head inserts, we build up those before going into the script eval phase\n        let insertHeadElems = new ExtDomQuery(...this.internalContext.getIf(DEFERRED_HEAD_INSERTS).value);\n        insertHeadElems.runHeadInserts(true);\n\n        // phase 2 we run a script eval on all updated elements in the body\n        let updateElems = new ExtDomQuery(...this.internalContext.getIf(UPDATE_ELEMS).value);\n        updateElems.runCss();\n        // phase 3, we do the same for the css\n        updateElems.runScripts();\n    }\n\n    /**\n     * Postprocessing view state fixing\n     * this appends basically the incoming view states to the forms.\n     * It is called from outside after all forms have been processed basically\n     * as last lifecycle step, before going into the next request.\n     */\n    fixViewStates() {\n        ofAssoc(this.internalContext.getIf(APPLIED_VST).orElse({}).value)\n            .forEach(([, value]) => {\n                const namingContainerId = this.internalContext.getIf(NAMING_CONTAINER_ID);\n                const namedViewRoot = !!this.internalContext.getIf(NAMED_VIEWROOT).value\n                const affectedForms = this.getContainerForms(namingContainerId)\n                    .filter(affectedForm => this.isInExecuteOrRender(affectedForm));\n\n                this.appendViewStateToForms(affectedForms, namedViewRoot, value.value, namingContainerId.orElse(\"\").value);\n            })\n    }\n\n\n\n    /**\n     * same as with view states before applies the incoming client windows as last step after the rest of the processing\n     * is done.\n     */\n    fixClientWindow() {\n        ofAssoc(this.internalContext.getIf(APPLIED_CLIENT_WINDOW).orElse({}).value)\n            .forEach(([, value]) => {\n                const namingContainerId = this.internalContext.getIf(NAMING_CONTAINER_ID);\n                const namedViewRoot = !!this.internalContext.getIf(NAMED_VIEWROOT).value;\n                const affectedForms = this.getContainerForms(namingContainerId)\n                    .filter(affectedForm => this.isInExecuteOrRender(affectedForm));\n\n                this.appendClientWindowToForms(affectedForms, namedViewRoot, value.value, namingContainerId.orElse(\"\").value);\n            });\n    }\n\n    updateNamedViewRootState() {\n        let partialId = this.internalContext.getIf(NAMING_CONTAINER_ID);\n        let namedViewRoot = this.internalContext.getIf(NAMED_VIEWROOT);\n        if(partialId.isPresent() &&\n            (namedViewRoot.isAbsent() ||\n                !namedViewRoot.value)) {\n            const SEP = $faces().separatorchar;\n            this.internalContext.assign(NAMED_VIEWROOT).value = (!!document.getElementById(partialId.value)) || DQ$(`input[name*='${$nsp(P_VIEWSTATE)}']`)\n                .filter(node => node.attr(\"name\").value.indexOf(partialId.value + SEP) == 0).length > 0;\n        }\n    }\n\n    /**\n     * all processing done we can close the request and send the appropriate events\n     */\n    done() {\n        const eventData = EventData.createFromRequest(this.request.value, this.externalContext, SUCCESS);\n\n        //because some frameworks might decorate them over the context in the response\n        const eventHandler = this.externalContext.getIf(ON_EVENT).orElseLazy(() => this.internalContext.getIf(ON_EVENT).value).orElse(EMPTY_FUNC).value;\n        Implementation.sendEvent(eventData, eventHandler);\n    }\n\n    /**\n     * proper viewState -> form assignment\n     *\n     * @param forms the forms to append the viewState to\n     * @param viewState the final viewState\n     * @param namingContainerId\n     */\n    private appendViewStateToForms(forms: DQ, namedViewRoot: boolean, viewState: string, namingContainerId = \"\") {\n        this.assignState(forms, $nsp(SEL_VIEWSTATE_ELEM), namedViewRoot, viewState, namingContainerId);\n    }\n\n\n    /**\n     * proper clientWindow -> form assignment\n     *\n     * @param forms the forms to append the viewState to\n     * @param clientWindow the final viewState\n     * @param namingContainerId\n     */\n    private appendClientWindowToForms(forms: DQ, namedViewRoot: boolean, clientWindow: string, namingContainerId = \"\") {\n        this.assignState(forms, $nsp(SEL_CLIENT_WINDOW_ELEM), namedViewRoot, clientWindow, namingContainerId);\n    }\n\n    /**\n     * generic append state which appends a certain state as hidden element to an existing set of forms\n     *\n     * @param forms the forms to append or change to\n     * @param selector the selector for the state\n     * @param namedViewRoot if set to true, the name is also prefixed\n     * @param state the state itself which needs to be assigned\n     *\n     * @param namingContainerId\n     * @private\n     */\n    private assignState(forms: DQ,  selector: string, namedViewRoot: boolean, state: string, namingContainerId: string) {\n        /**\n         * creates the viewState or client window id element\n         * @param form\n         */\n        const createAndAppendHiddenInput = (form: DomQuery)  => {\n            return new HiddenInputBuilder(selector)\n                .withNamingContainerId(namingContainerId)\n                .withParent(form)\n                .withNamedViewRoot(namedViewRoot)\n                .build();\n        };\n\n        forms.each(form => {\n            const hiddenInput = form.querySelectorAll(selector)\n                .orElseLazy(() => createAndAppendHiddenInput(form));\n            hiddenInput.val = state;\n        });\n    }\n\n    /**\n     * Stores certain aspects of the dom for later post-processing\n     *\n     * @param updateForms the update forms which should receive standardized internal jsf data\n     * @param toBeEvaluated the resulting elements which should be evaluated\n     */\n    private storeForPostProcessing(updateForms: DQ, toBeEvaluated: DQ) {\n        this.storeForUpdate(updateForms);\n        this.storeForEval(toBeEvaluated);\n    }\n\n    /**\n     * helper to store a given form for the update post-processing (viewState)\n     *\n     * @param updateForms the dom query object pointing to the forms which need to be updated\n     */\n    private storeForUpdate(updateForms: DQ) {\n        this.internalContext.assign(UPDATE_FORMS).value.push(updateForms);\n    }\n\n    /**\n     * same for eval (js and css)\n     *\n     * @param toBeEvaluated\n     */\n    private storeForEval(toBeEvaluated: DQ) {\n        this.internalContext.assign(UPDATE_ELEMS).value.push(toBeEvaluated);\n    }\n\n    /**\n     * check whether a given XMLQuery node is an explicit viewState node\n     *\n     * @param node the node to check\n     * @returns if it is a viewState node\n     */\n    private static isViewStateNode(node: XMLQuery): boolean {\n        const SEP = $faces().separatorchar;\n        return \"undefined\" != typeof node?.id?.value && (node?.id?.value == $nsp(P_VIEWSTATE) ||\n            node?.id?.value?.indexOf([SEP, $nsp(P_VIEWSTATE)].join(EMPTY_STR)) != -1 ||\n            node?.id?.value?.indexOf([$nsp(P_VIEWSTATE), SEP].join(EMPTY_STR)) != -1);\n    }\n\n    /**\n     * incoming client window node also needs special processing\n     *\n     * @param node the node to check\n     * @returns true of it ii\n     */\n    private static isClientWindowNode(node: XMLQuery): boolean {\n        const SEP =  $faces().separatorchar;\n        return \"undefined\" != typeof node?.id?.value && (node?.id?.value == $nsp(P_CLIENT_WINDOW) ||\n            node?.id?.value?.indexOf([SEP, $nsp(P_CLIENT_WINDOW)].join(EMPTY_STR)) != -1 ||\n            node?.id?.value?.indexOf([$nsp(P_CLIENT_WINDOW), SEP].join(EMPTY_STR)) != -1);\n    }\n\n    private triggerOnError(errorData: ErrorData) {\n        this.externalContext.getIf(ON_ERROR).orElseLazy(() => this.internalContext.getIf(ON_ERROR).value).orElse(EMPTY_FUNC).value(errorData);\n    }\n\n    /**\n     * filters the forms according to being member of the \"execute\" or \"render\" cycle\n     * @param affectedForm\n     * @private\n     */\n    private isInExecuteOrRender(affectedForm) {\n        const executes = this.externalContext.getIf($nsp(P_EXECUTE)).orElse(\"@none\").value.split(/\\s+/gi);\n        const renders = this.externalContext.getIf(P_RENDER_OVERRIDE)\n            .orElseLazy(() => this.externalContext.getIf($nsp(P_RENDER)).value)\n            .orElse(IDENT_NONE).value.split(/\\s+/gi);\n        const executeAndRenders = executes.concat(...renders);\n        return [...executeAndRenders].filter(nameOrId => {\n            if ([IDENT_ALL, IDENT_NONE].indexOf(nameOrId) != -1) {\n                return true;\n            }\n\n            const NAME_OR_ID = this.getNameOrIdSelector(nameOrId);\n            //either the form directly is in execute or render or one of its children or one of its parents\n            return affectedForm.matchesSelector(NAME_OR_ID) ||\n                affectedForm.querySelectorAll(NAME_OR_ID).isPresent() ||\n                affectedForm.firstParent(NAME_OR_ID).isPresent();\n        }).length > 0;\n    }\n\n    /**\n     * gets all forms under a single naming container id\n     * @param namingContainerId\n     * @private\n     */\n    private getContainerForms(namingContainerId: Config) {\n        if (namingContainerId.isPresent()) {\n            //naming container mode, all forms under naming container id must be processed\n            return DQ$(this.getNameOrIdSelector(namingContainerId.value))\n                // missing condition if the naming container is not present we have to\n                // use the body as fallback\n                .orElseLazy(() => DQ.byTagName(HTML_TAG_BODY))\n                .byTagName(HTML_TAG_FORM, true);\n        } else {\n            return DQ.byTagName(HTML_TAG_FORM);\n        }\n    }\n\n    private getNameOrIdSelector(nameOrId) {\n        return `[id='${nameOrId}'], [name='${nameOrId}']`;\n    }\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Config, DQ} from \"mona-dish\";\nimport {$nsp, EMPTY_STR, IDENT_NONE, P_VIEWSTATE} from \"../core/Const\";\n\nimport {\n    encodeFormData,\n    fixEmptyParameters, getFormInputsAsArr\n} from \"../util/FileUtils\";\nimport {ExtLang} from \"../util/Lang\";\nimport ofAssoc = ExtLang.ofAssoc;\nimport {Es2019Array} from \"mona-dish\";\n\n\ntype ParamsMapper<V, K> = (key: V, item: K) => [V, K];\nconst defaultParamsMapper: ParamsMapper<string, any> = (key, item) => [key, item];\n\n/**\n * A unified form data class\n * which builds upon our configuration.\n *\n * We cannot use standard html5 forms everywhere\n * due to api constraints on the HTML Form object in IE11\n * and due to the url encoding constraint given by the faces.js spec\n *\n *\n * internal storage format\n * every value is stored as an array\n * even scalar ones!\n */\nexport class XhrFormData extends Config {\n    /**\n     * Checks if the given datasource is a multipart request source\n     * multipart is only needed if one of the executes is a file input\n     * since file inputs are stateless, they fall out of the view state\n     * and need special handling. With file submits we have to send a formData object\n     * instead of an encoded string files cannot be sent that way\n     */\n    isMultipartRequest: boolean = false;\n\n    /**\n     * data collector from a given form\n     *\n     * @param dataSource either a form as DomQuery object or an encoded url string\n     * @param paramsMapper a remapper for the params keys and values\n     * @param executes the executes id list for the elements to being processed\n     * @param partialIds partial ids to collect, to reduce the data sent down\n     */\n    constructor(private dataSource: DQ, private paramsMapper: ParamsMapper<string, any> = defaultParamsMapper, executes?: string[], private partialIds?: string[]) {\n        super({});\n        //encode and append the issuing item if not a partial ids array of ids is passed\n        /*\n         * Spec. 13.3.1\n         * Collect and encode input elements.\n         * Additionally the hidden element jakarta.faces.ViewState\n         * Enhancement partial page submit\n         */\n        this.resolveRequestType(this.dataSource, executes);\n        this.encodeSubmittableFields(this.dataSource, this.partialIds);\n        this.applyViewState(this.dataSource);\n    }\n\n    /**\n     * @returns a Form data representation, this is needed for file submits\n     */\n    toFormData(): FormData {\n        /*\n           * expands key: [item1, item2]\n           * to: [{key: key,  value: item1}, {key: key, value: item2}]\n           */\n        let expandValueArrays = ([key, item]) => {\n            if (Array.isArray(item)) {\n                return new Es2019Array(...item).map(value => {\n                    return {key, value}\n                })\n            }\n            return [{key, value: item}]\n        }\n\n        /*\n         * remaps the incoming {key, value} tuples\n         * to naming container prefixed keys and values\n         */\n        let remapForNamingContainer = ({key, value}) => {\n            key = this.remapKeyForNamingContainer(key);\n            return {key, value}\n        };\n\n        /*\n         * collects everything into a FormData object\n         */\n        return ofAssoc(this.value)\n            .flatMap(expandValueArrays)\n            .map(remapForNamingContainer)\n            .reduce((formData: FormData, {key, value}: any) => {\n                formData.append(key, value);\n                return formData;\n            }, new FormData()) as FormData;\n    }\n\n    /**\n     * returns an encoded string representation of our xhr form data\n     *\n     * @param defaultStr optional default value if nothing is there to encode\n     */\n    toString(defaultStr = EMPTY_STR): string {\n        return encodeFormData(this, this.paramsMapper, defaultStr);\n    }\n\n    /**\n     * generic post init code, for now, this performs some post assign data post-processing\n     * @param rootElement the root element which knows the request type (usually a form)\n     * @param executes the executable dom nodes which need to be processed into the form data, which we can send\n     * in our ajax request\n     */\n    private resolveRequestType(rootElement: DQ, executes?: Array<string>) {\n        if (!executes || executes.indexOf(IDENT_NONE) != -1) {\n            return;\n        }\n        this.isMultipartRequest = rootElement.isMultipartCandidate(true);\n    }\n\n    /**\n     * special case view state handling\n     *\n     * @param form the form holding the view state value\n     */\n    private applyViewState(form: DQ) {\n        if (this.getIf($nsp(P_VIEWSTATE)).isPresent()) {\n            return;\n        }\n        let viewStateElement = form.querySelectorAllDeep(`[name*='${$nsp(P_VIEWSTATE)}'`);\n        let viewState = viewStateElement.inputValue;\n        this.appendIf(viewState.isPresent(), this.remapKeyForNamingContainer(viewStateElement.name.value)).value = viewState.value;\n    }\n\n    /**\n     * determines fields to submit\n     * @param {Node} parentItem - form element item is nested in\n     * @param {Array} partialIds - ids fo PPS\n     */\n    private encodeSubmittableFields(parentItem: DQ, partialIds: string[] = []) {\n\n        const mergeIntoThis = ([key, value]) => this.append(key).value = value;\n        const namingContainerRemap = ([key, value]) => this.paramsMapper(key as string, value);\n\n        const remappedPartialIds = partialIds.map(partialId => this.remapKeyForNamingContainer(partialId));\n        const partialIdsFilter = ([key, value]) => (!remappedPartialIds.length || key.indexOf(\"@\") == 0) ? true :\n            remappedPartialIds.indexOf(key) != -1;\n\n        let inputs = getFormInputsAsArr(parentItem);\n        inputs\n            .map(fixEmptyParameters)\n            .map(namingContainerRemap)\n            .filter(partialIdsFilter)\n            .forEach(mergeIntoThis);\n    }\n\n    private remapKeyForNamingContainer(key: string): string {\n        return this.paramsMapper(key, \"\")[0];\n    }\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AsyncRunnable, IAsyncRunnable} from \"../util/AsyncRunnable\";\nimport {Config, DQ} from \"mona-dish\";\nimport {Implementation} from \"../AjaxImpl\";\n\nimport {XhrFormData} from \"./XhrFormData\";\nimport {ErrorData} from \"./ErrorData\";\nimport {EventData} from \"./EventData\";\nimport {ExtLang} from \"../util/Lang\";\nimport {\n    $faces,\n    BEGIN,\n    COMPLETE,\n    CONTENT_TYPE,\n    CTX_PARAM_MF_INTERNAL,\n    CTX_PARAM_REQ_PASS_THR,\n    ERROR,\n    HEAD_FACES_REQ,\n    MALFORMEDXML,\n    NO_TIMEOUT,\n    ON_ERROR,\n    ON_EVENT, P_EXECUTE,\n    REQ_ACCEPT,\n    REQ_TYPE_GET,\n    REQ_TYPE_POST, SOURCE,\n    STATE_EVT_TIMEOUT,\n    STD_ACCEPT,\n    URL_ENCODED,\n    VAL_AJAX, IDENT_NONE, CTX_PARAM_SRC_FRM_ID, CTX_PARAM_SRC_CTL_ID, CTX_PARAM_PPS\n} from \"../core/Const\";\nimport {\n    resolveFinalUrl,\n    resolveHandlerFunc,\n    resoveNamingContainerMapper\n} from \"./RequestDataResolver\";\nimport failSaveExecute = ExtLang.failSaveExecute;\nimport {ExtConfig} from \"../util/ExtDomQuery\";\n\n/**\n * Faces XHR Request Wrapper\n * as AsyncRunnable for our Asynchronous queue\n * This means from the outside the\n * xhr request is similar to a Promise in a way\n * that you can add then and catch and finally callbacks.\n *\n *\n * The idea is that we basically just enqueue\n * a single ajax request into our queue\n * and let the queue do the processing.\n *\n *\n */\n\nexport class XhrRequest extends AsyncRunnable<XMLHttpRequest> {\n\n    private responseContext: Config;\n\n    private stopProgress = false;\n\n\n    private xhrObject = new XMLHttpRequest();\n\n    /**\n     * Required Parameters\n     *\n     * @param requestContext the request context with all pass through values\n     * @param internalContext internal context with internal info which is passed through, not used by the user\n     * Optional Parameters\n     * @param timeout optional xhr timeout\n     * @param ajaxType optional request type, default \"POST\"\n     * @param contentType optional content type, default \"application/x-www-form-urlencoded\"\n     */\n    constructor(\n        private requestContext: ExtConfig,\n        private internalContext: Config,\n        private timeout = NO_TIMEOUT,\n        private ajaxType = REQ_TYPE_POST,\n        private contentType = URL_ENCODED\n    ) {\n        super();\n        // we omit promises here because we have to deal with cancel functionality,\n        // and promises to not provide that (yet) instead we have our async queue\n        // which uses an api internally, which is very close to promises\n        this.registerXhrCallbacks((data: any) => this.resolve(data), (data: any) => this.reject(data));\n    }\n\n    start(): IAsyncRunnable<XMLHttpRequest> {\n\n        let ignoreErr = failSaveExecute;\n        let xhrObject = this.xhrObject;\n        let sourceForm = DQ.byId(this.internalContext.getIf(CTX_PARAM_SRC_FRM_ID).value)\n\n        let executesArr = () => {\n            return this.requestContext.getIf(CTX_PARAM_REQ_PASS_THR, P_EXECUTE).get(IDENT_NONE).value.split(/\\s+/gi);\n        };\n\n        try {\n            // encoded we need to decode\n            // We generated a base representation of the current form\n            // in case someone has overloaded the viewState with additional decorators we merge\n            // that in, there is no way around it, the spec allows it and getViewState\n            // must be called, so whatever getViewState delivers has higher priority then\n            // whatever the formData object delivers\n            // the partialIdsArray arr is almost deprecated legacy code where we allowed to send a separate list of partial\n            // ids for reduced load and server processing, this will be removed soon, we can handle the same via execute\n            const executes = executesArr();\n            const partialIdsArray = this.internalContext.getIf(CTX_PARAM_PPS).value === true ? executes : [];\n            const formData: XhrFormData = new XhrFormData(\n                sourceForm,\n                resoveNamingContainerMapper(this.internalContext),\n                executes, partialIdsArray\n            );\n\n            this.contentType = formData.isMultipartRequest ? \"undefined\" : this.contentType;\n\n            // next step the pass through parameters are merged in for post params\n            this.requestContext.$nspEnabled = false;\n            const requestContext = this.requestContext;\n            const requestPassThroughParams = requestContext.getIf(CTX_PARAM_REQ_PASS_THR) as ExtConfig;\n\n            // we are turning off here the jsf, faces remapping because we are now dealing with\n            // pass-through parameters\n            requestPassThroughParams.$nspEnabled = false;\n            // this is an extension where we allow pass through parameters to be sent down additionally\n            // this can be used and is used in the impl to enrich the post request parameters with additional\n            // information\n            try {\n                formData.shallowMerge(requestPassThroughParams, true, true);\n            } finally {\n                // unfortunately as long as we support\n                // both namespaces we have to keep manual control\n                // on the key renaming before doing ops like deep copy\n                this.requestContext.$nspEnabled = true;\n                requestPassThroughParams.$nspEnabled = true;\n            }\n\n            this.responseContext = requestPassThroughParams.deepCopy;\n\n            // we have to shift the internal passthroughs around to build up our response context\n            const responseContext = this.responseContext;\n\n            responseContext.assign(CTX_PARAM_MF_INTERNAL).value = this.internalContext.value;\n\n            // per spec the onEvent and onError handlers must be passed through to the response\n            responseContext.assign(ON_EVENT).value = requestContext.getIf(ON_EVENT).value;\n            responseContext.assign(ON_ERROR).value = requestContext.getIf(ON_ERROR).value;\n\n            xhrObject.open(this.ajaxType, resolveFinalUrl(sourceForm, formData, this.ajaxType), true);\n\n            // adding timeout\n            this.timeout ? xhrObject.timeout = this.timeout : null;\n\n            // a bug in the xhr stub library prevents the setRequestHeader to be properly executed on fake xhr objects\n            // normal browsers should resolve this\n            // tests can quietly fail on this one\n            if (this.contentType != \"undefined\") {\n                ignoreErr(() => xhrObject.setRequestHeader(CONTENT_TYPE, `${this.contentType}; charset=utf-8`));\n            }\n\n            ignoreErr(() => xhrObject.setRequestHeader(HEAD_FACES_REQ, VAL_AJAX));\n\n            // probably not needed anymore, will test this\n            // some webkit based mobile browsers do not follow the w3c spec of\n            // setting, they accept headers automatically\n            ignoreErr(() => xhrObject.setRequestHeader(REQ_ACCEPT, STD_ACCEPT));\n\n            this.sendEvent(BEGIN);\n            this.sendRequest(formData);\n        } catch (e) {\n            // this happens usually in a client side condition, hence we have to deal in with it in a client\n            // side manner\n            this.handleErrorAndClearQueue(e);\n            throw e;\n        }\n        return this;\n    }\n\n\n\n    cancel() {\n        try {\n            // this causes onError to be called where the error\n            // handling takes over\n            this.xhrObject.abort();\n        } catch (e) {\n            this.handleError(e);\n        }\n    }\n\n\n    /**\n     * attaches the internal event and processing\n     * callback within the promise to our xhr object\n     *\n     * @param resolve\n     * @param reject\n     */\n    private registerXhrCallbacks(resolve: Consumer<any>, reject: Consumer<any>) {\n        const xhrObject = this.xhrObject;\n\n        xhrObject.onabort = () => {\n            this.onAbort(resolve, reject);\n        };\n        xhrObject.ontimeout = () => {\n            this.onTimeout(resolve, reject);\n        };\n        xhrObject.onload = () => {\n            this.onResponseReceived(resolve)\n        };\n        xhrObject.onloadend = () => {\n            this.onResponseProcessed(this.xhrObject, resolve);\n        };\n        xhrObject.onerror = (errorData: any) => {\n            // Safari in rare cases triggers an error when cancelling a request internally, or when\n            // in this case we simply ignore the request and clear up the queue, because\n            // it is not safe anymore to proceed with the current queue\n\n            // This bypasses a Safari issue where it keeps requests hanging after page unload\n            // and then triggers a cancel error on then instead of just stopping\n            // and clearing the code\n            // in a page unload case it is safe to clear the queue\n            // in the exact safari case any request after this one in the queue is invalid\n            // because the queue references xhr requests to a page which already is gone!\n            if (this.isCancelledResponse(this.xhrObject)) {\n                /*\n                 * this triggers the catch chain and after that finally\n                 */\n                this.stopProgress = true;\n                reject();\n                return;\n            }\n            // error already processed somewhere else\n            if (this.stopProgress) {\n                return;\n            }\n            this.handleError(errorData);\n        };\n    }\n\n    private isCancelledResponse(currentTarget: XMLHttpRequest): boolean {\n        return currentTarget?.status === 0 && // cancelled internally by browser\n            currentTarget?.readyState === 4 &&\n            currentTarget?.responseText === '' &&\n            currentTarget?.responseXML === null;\n    }\n\n    /*\n     * xhr processing callbacks\n     *\n     * Those methods are the callbacks called by\n     * the xhr object depending on its own state\n     */\n    /**\n     * client side abort... also here for now we clean the queue\n     *\n     * @param resolve\n     * @param reject\n     * @private\n     */\n    private onAbort(resolve: Consumer<any>, reject: Consumer<any>) {\n        // reject means clear queue, in this case we abort entirely the processing\n        // does not happen yet, we have to probably rethink this strategy in the future\n        // when we introduce cancel functionality\n        this.handleGenericError(reject);\n    }\n\n    /**\n     * request timeout, this must be handled like a generic server error per spec\n     * unfortunately, so we have to jump to the next item (we cancelled before)\n     * @param resolve\n     * @param reject\n     * @private\n     */\n    private onTimeout(resolve: Consumer<any>, reject: Consumer<any>) {\n        // timeout also means we we probably should clear the queue,\n        // the state is unsafe for the next requests\n        this.sendEvent(STATE_EVT_TIMEOUT);\n        this.handleGenericError(resolve);\n    }\n\n    /**\n     * the response is received and normally is a normal response\n     * but also can be some kind of error (http code >= 300)\n     * In any case the response will be resolved either as error or response\n     * and the next item in the queue will be processed\n     * @param resolve\n     * @private\n     */\n    private onResponseReceived(resolve: Consumer<any>) {\n\n        this.sendEvent(COMPLETE);\n        /*\n         * second on error path\n         */\n        if ((this.xhrObject?.status ?? 0) >= 300 || !this?.xhrObject?.responseXML) {\n            // all errors from the server are resolved without interfering in the queue\n            this.handleGenericError(resolve);\n            return;\n        }\n\n        $faces().ajax.response(this.xhrObject, this.responseContext.value ?? {});\n    }\n\n    private handleGenericError(resolveOrReject: Function) {\n        this.stopProgress = true;\n        const errorData = {\n            type: ERROR,\n            status: MALFORMEDXML,\n            responseCode: this.xhrObject?.status ?? 400,\n            responseText: this.xhrObject?.responseText ?? \"Error\",\n            source: this.internalContext.getIf(CTX_PARAM_SRC_CTL_ID).value\n        };\n        try {\n            this.handleError(errorData, true);\n        } finally {\n            // we issue a resolveOrReject in this case to allow the system to recover\n            // reject would clean up the queue\n            // resolve would trigger the next element in the queue to be processed\n            resolveOrReject(errorData);\n        }\n        // non blocking non clearing\n    }\n\n    /**\n     * last minute cleanup, the request now either is fully done\n     * or not by having had a cancel or error event be\n     * @param data\n     * @param resolve\n     * @private\n     */\n    private onResponseProcessed(data: any, resolve: Consumer<any>) {\n        // if stop progress true, the cleanup already has been performed\n        if (this.stopProgress) {\n            return;\n        }\n        /*\n         * normal case, cleanup == next item if possible\n         */\n        resolve(data);\n    }\n\n    private sendRequest(formData: XhrFormData) {\n        const isPost = this.ajaxType != REQ_TYPE_GET;\n        if (formData.isMultipartRequest) {\n            // in case of a multipart request we send in a formData object as body\n            this.xhrObject.send((isPost) ? formData.toFormData() : null);\n        } else {\n            // in case of a normal request we send it normally\n            this.xhrObject.send((isPost) ? formData.toString() : null);\n        }\n    }\n\n    /*\n     * other helpers\n     */\n    private sendEvent(evtType: string) {\n        const eventData = EventData.createFromRequest(this.xhrObject, this.requestContext, evtType);\n        try {\n            // User code error, we might cover\n            // this in onError, but also we cannot swallow it.\n            // We need to resolve the local handlers lazily,\n            // because some frameworks might decorate them over the context in the response\n            let eventHandler = resolveHandlerFunc(this.requestContext, this.responseContext, ON_EVENT);\n\n            Implementation.sendEvent(eventData, eventHandler);\n        } catch (e) {\n            e.source = e?.source ?? this.requestContext.getIf(SOURCE).value;\n            // this is a client error, no save state anymore for queue processing!\n            this.handleErrorAndClearQueue(e);\n            // we forward the error upward like all client side errors\n            throw e;\n        }\n    }\n\n    private handleErrorAndClearQueue(e, responseFormatError: boolean = false) {\n        this.handleError(e, responseFormatError);\n        this.reject(e);\n    }\n\n    private handleError(exception, responseFormatError: boolean = false) {\n        const errorData = (responseFormatError) ? ErrorData.fromHttpConnection(exception.source, exception.type, exception.status, exception.responseText, exception.responseCode, exception.status) : ErrorData.fromClient(exception);\n        const eventHandler = resolveHandlerFunc(this.requestContext, this.responseContext, ON_ERROR);\n\n        Implementation.sendError(errorData, eventHandler);\n    }\n}","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {DQ} from \"mona-dish\";\nimport {ExtLang} from \"../impl/util/Lang\";\n\n/**\n * legacy code to enable various aspects\n * of myfaces, used to be rendered inline\n * for jsf 2.0 we can externalize it into its own custom resource\n *\n * note this is a straight 1:1 port from the existing codebase\n * (not too much work has been spent here, the important thing is, that\n * the namespace and functions need to be kept intact for legacy code)\n *\n * we might move the code over in the future, but for now a straight 1:1 port suffices\n */\nexport module oam {\n    import ofAssoc = ExtLang.ofAssoc;\n    /**\n     * sets a hidden input field\n     * @param formName the formName\n     * @param name the hidden field\n     * @param value the value to be rendered\n     */\n    export const setHiddenInput = function (formName: string, name: string, value: string): void {\n        DQ.byId(document.forms[formName])\n            .each(form => {\n                const input = form.querySelectorAll(`input[type='hidden'][name='${name}']`);\n                if (input.isPresent()) {\n                    input.inputValue.value = value;\n                } else {\n                    const newInput = DQ.fromMarkup(`<input type='hidden' id='${name}' name='${name}'>`);\n                    newInput.inputValue.value = value;\n                    newInput.appendTo(form);\n                }\n            });\n    };\n\n    /**\n     * clears a hidden input field\n     *\n     * @param formName formName for the input\n     * @param name the name of the input field\n     */\n    export const clearHiddenInput = function (formName: string, name: string): void {\n        let element = document.forms?.[formName]?.elements?.[name];\n        if(!element) {\n            return;\n        }\n        DQ.byId(element).delete();\n    };\n\n    // noinspection JSUnusedGlobalSymbols,JSUnusedLocalSymbols\n    /**\n     * does special form submit remapping\n     * re-maps the issuing command link into something,\n     * the \"decode\" of the command link on the server can understand\n     *\n     * @param formName\n     * @param linkId\n     * @param target\n     * @param params\n     */\n    export const submitForm = function (formName: string, linkId: string | null = null, target: string |null = null, params: AssocArr<any> | Tuples<string, any> | null = {} ): boolean {\n\n\n        //handle a possible incoming null, not sure if this is used that way anywhere, but we allow it\n        params = (!params) ? {} : params;\n\n        let clearFn = 'clearFormHiddenParams_' + formName.replace(/-/g, '\\$:').replace(/:/g, '_');\n        window?.[clearFn]?.(formName);\n\n        //autoscroll code\n        if (window?.myfaces?.core?.config?.autoScroll && (window as any)?.getScrolling) {\n            myfaces.oam.setHiddenInput(formName, 'autoScroll', (window as any)?.getScrolling());\n        }\n        let paramsStream: Array<[string, any]> = Array.isArray(params) ? [...params] : ofAssoc(params);\n        paramsStream.forEach(([key, data]) => myfaces.oam.setHiddenInput(formName, key, data));\n\n        //we call the namespaced function, to allow decoration, via a direct call we would\n        myfaces.oam.setHiddenInput(formName, `${formName}:_idcl`, linkId ?? '');\n\n\n        DQ.byId(document.forms?.[formName] ?? document.getElementById(formName)).each(form => {\n            const ATTR_TARGET = \"target\";\n            const formElement = form.getAsElem(0).value as HTMLFormElement;\n            const oldTarget = (form.getAsElem(0).value as HTMLFormElement).getAttribute(\"target\");\n\n            if(target != \"null\" && target) {\n                (form.getAsElem(0).value as HTMLFormElement).setAttribute(\"target\", target);\n            }\n\n            const result = formElement?.onsubmit?.(null);\n\n            try {\n                if ((!!result) || 'undefined' == typeof result) {\n                    formElement.submit();\n                }\n            } catch (e) {\n                window?.console.error(e);\n            } finally {\n                if(oldTarget == null || oldTarget == \"null\") {\n                    (form.getAsElem(0).value as HTMLFormElement).removeAttribute(\"target\");\n                } else {\n                    (form.getAsElem(0).value as HTMLFormElement).setAttribute(\"target\", oldTarget);\n                }\n\n                // noinspection JSUnusedLocalSymbols\n                paramsStream.forEach(([key, data]) => {\n                    myfaces.oam.clearHiddenInput(formName, key);\n                });\n                myfaces.oam.clearHiddenInput(formName, `${formName}:_idcl`);\n            }\n\n        });\n        return false;\n    };\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*! Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\n\n/**\n * faces.js init layer which provides as per spec the proper\n * window namespace if it does not exist already\n *\n * The idea is that we use a small shim on top of\n * the implementation to provide the window namespace.\n * The implementation itself is in a protected namespace\n * which will be bound by the build system\n *\n * The documentation nevertheless targets the _api file, which\n * hosts the full api\n */\nif(!window.faces) {\n    //we lazily load the code to prevent ram bloat\n    const faces = require(\"./_api\").faces;\n    window['faces'] = window?.faces ?? faces;\n}\nif(!window?.myfaces?.ab) {\n    const myfaces = require(\"./_api\").myfaces;\n\n    //namespace might be extended is not exclusively reserved so we merge\n    (window as any)[\"myfaces\"] = window?.myfaces ?? {};\n    Object.keys(myfaces).forEach(key => window.myfaces[key] = window.myfaces?.[key] ?? myfaces[key]);\n}\nexport var faces = window.faces;\nexport var myfaces = window.myfaces;\n"],"names":[],"sourceRoot":""}